/*! For license information please see main.beaad150.js.LICENSE.txt */
!function(){var e={694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var u in n)r.call(n,u)&&n[u]&&e.push(u);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Te(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Se(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Se())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,It,Et,Tt=!1,St=[],Ct=null,Nt=null,At=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(Vt),Dt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Bt(t,e)}if(0<St.length){Bt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Tn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=an(Tn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Rn),Pn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Ur(e,0)}function Yn(e){if(H(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Wn(t,Hn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Er("animationend"),Sr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),s(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Tr,"onAnimationEnd"),Dr(Sr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Sn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Tr:case Sr:case Cr:s=mn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Wr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Xn;else if(Kn(u))if($n)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Wn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(m=Gr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Jt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=De(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Wr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Wr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ti(e,t){xi++,_i[xi]=e.current,e.current=t}var Si={},Ci=Ii(Si),Ni=Ii(!1),Ai=Si;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ei(Ni),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Si)throw Error(a(168));Ti(Ci,t),Ti(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Ai=Ci.current,Ti(Ci,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Ti(Ci,e)):Ei(Ni),Ti(Ni,n)}var Ui=null,Vi=!1,ji=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,zi),i}finally{kt=t,ji=!1}}return null}var qi=b.ReactCurrentBatchConfig;function Ki(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Wi=Ii(null),Gi=null,Hi=null,Qi=null;function Yi(){Qi=Hi=Gi=null}function Xi(e){var t=Wi.current;Ei(Wi),e._currentValue=t}function $i(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ji(e,t){Gi=e,Qi=Hi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Zi(e){var t=e._currentValue;if(Qi!==e)if(e={context:e,memoizedValue:t,next:null},null===Hi){if(null===Gi)throw Error(a(308));Hi=e,Gi.dependencies={lanes:0,firstContext:e}}else Hi=Hi.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sa(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:ta=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ps|=o,e.lanes=o,e.memoizedState=f}}function ca(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var la=(new r.Component).refs;function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ha={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$s(),i=Js(e),a=ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zs(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$s(),i=Js(e),a=ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zs(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$s(),r=Js(e),i=ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),aa(e,i),null!==(t=Zs(e,r,n))&&oa(t,e,r)}};function da(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function pa(e,t,n){var r=!1,i=Si,a=t.contextType;return"object"===typeof a&&null!==a?a=Zi(a):(i=Di(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Si),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ha,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ha.enqueueReplaceState(t,t.state,null)}function ya(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=la,na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Zi(a):(a=Di(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(fa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ha.enqueueReplaceState(i,i.state,null),sa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var ma=[],ga=0,ka=null,ba=0,wa=[],_a=0,xa=null,Ia=1,Ea="";function Ta(e,t){ma[ga++]=ba,ma[ga++]=ka,ka=e,ba=t}function Sa(e,t,n){wa[_a++]=Ia,wa[_a++]=Ea,wa[_a++]=xa,xa=e;var r=Ia;e=Ea;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ia=1<<32-ot(t)+i|n<<i|r,Ea=a+e}else Ia=1<<a|n<<i|r,Ea=e}function Ca(e){null!==e.return&&(Ta(e,1),Sa(e,1,0))}function Na(e){for(;e===ka;)ka=ma[--ga],ma[ga]=null,ba=ma[--ga],ma[ga]=null;for(;e===xa;)xa=wa[--_a],wa[_a]=null,Ea=wa[--_a],wa[_a]=null,Ia=wa[--_a],wa[_a]=null}var Aa=null,Ra=null,Da=!1,Pa=null;function Oa(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function La(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Aa=e,Ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Aa=e,Ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==xa?{id:Ia,overflow:Ea}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Aa=e,Ra=null,!0);default:return!1}}function Ma(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Fa(e){if(Da){var t=Ra;if(t){var n=t;if(!La(e,t)){if(Ma(e))throw Error(a(418));t=ci(n.nextSibling);var r=Aa;t&&La(e,t)?Oa(r,n):(e.flags=-4097&e.flags|2,Da=!1,Aa=e)}}else{if(Ma(e))throw Error(a(418));e.flags=-4097&e.flags|2,Da=!1,Aa=e}}}function Ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Aa=e}function Va(e){if(e!==Aa)return!1;if(!Da)return Ua(e),Da=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Ra)){if(Ma(e)){for(e=Ra;e;)e=ci(e.nextSibling);throw Error(a(418))}for(;t;)Oa(e,t),t=ci(t.nextSibling)}if(Ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ra=null}}else Ra=Aa?ci(e.stateNode.nextSibling):null;return!0}function ja(){Ra=Aa=null,Da=!1}function Ba(e){null===Pa?Pa=[e]:Pa.push(e)}function za(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===la&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ka(e){return(0,e._init)(e._payload)}function Wa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Ka(a)===t.type)?((r=i(t,n.props)).ref=za(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=za(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=za(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Oc(t,e.mode,n,null)).return=e,t;qa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);qa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);qa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),Da&&Ta(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Da&&Ta(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),Da&&Ta(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),Da&&Ta(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return Da&&Ta(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Da&&Ta(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Ka(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=za(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Oc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Pc(o.type,o.key,o.props,null,r.mode,s)).ref=za(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);qa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ga=Wa(!0),Ha=Wa(!1),Qa={},Ya=Ii(Qa),Xa=Ii(Qa),$a=Ii(Qa);function Ja(e){if(e===Qa)throw Error(a(174));return e}function Za(e,t){switch(Ti($a,t),Ti(Xa,e),Ti(Ya,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ya),Ti(Ya,t)}function eo(){Ei(Ya),Ei(Xa),Ei($a)}function to(e){Ja($a.current);var t=Ja(Ya.current),n=se(t,e.type);t!==n&&(Ti(Xa,e),Ti(Ya,n))}function no(e){Xa.current===e&&(Ei(Ya),Ei(Xa))}var ro=Ii(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var uo=b.ReactCurrentDispatcher,so=b.ReactCurrentBatchConfig,co=0,lo=null,fo=null,ho=null,po=!1,vo=!1,yo=0,mo=0;function go(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function bo(e,t,n,r,i,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=null===e||null===e.memoizedState?ru:iu,e=n(r,i),vo){o=0;do{if(vo=!1,yo=0,25<=o)throw Error(a(301));o+=1,ho=fo=null,t.updateQueue=null,uo.current=au,e=n(r,i)}while(vo)}if(uo.current=nu,t=null!==fo&&null!==fo.next,co=0,ho=fo=lo=null,po=!1,t)throw Error(a(300));return e}function wo(){var e=0!==yo;return yo=0,e}function _o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?lo.memoizedState=ho=e:ho=ho.next=e,ho}function xo(){if(null===fo){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?lo.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?lo.memoizedState=ho=e:ho=ho.next=e}return ho}function Io(e,t){return"function"===typeof t?t(e):t}function Eo(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((co&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,lo.lanes|=f,Ps|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,lo.lanes|=o,Ps|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function To(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function Co(e,t){var n=lo,r=xo(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Vo(Ro.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Oo(9,Ao.bind(null,n,r,i,t),void 0,null),null===Ts)throw Error(a(349));0!==(30&co)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ao(e,t,n,r){t.value=n,t.getSnapshot=r,Do(t)&&Zs(e,1,-1)}function Ro(e,t,n){return n((function(){Do(t)&&Zs(e,1,-1)}))}function Do(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Po(e){var t=_o();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=$o.bind(null,lo,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return xo().memoizedState}function Mo(e,t,n,r){var i=_o();lo.flags|=e,i.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function Fo(e,t,n,r){var i=xo();r=void 0===r?null:r;var a=void 0;if(null!==fo){var o=fo.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Oo(t,n,a,r))}lo.flags|=e,i.memoizedState=Oo(1|t,n,a,r)}function Uo(e,t){return Mo(8390656,8,e,t)}function Vo(e,t){return Fo(2048,8,e,t)}function jo(e,t){return Fo(4,2,e,t)}function Bo(e,t){return Fo(4,4,e,t)}function zo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,zo.bind(null,t,e),n)}function Ko(){}function Wo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Go(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),lo.lanes|=n,Ps|=n,e.baseState=!0),t)}function Qo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{kt=n,so.transition=r}}function Yo(){return xo().memoizedState}function Xo(e,t,n){var r=Js(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jo(e)?Zo(t,n):(eu(e,t,n),null!==(e=Zs(e,r,n=$s()))&&tu(e,t,r))}function $o(e,t,n){var r=Js(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))Zo(t,i);else{eu(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o))return}catch(s){}null!==(e=Zs(e,r,n=$s()))&&tu(e,t,r)}}function Jo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function Zo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eu(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function tu(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var nu={readContext:Zi,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ru={readContext:Zi,useCallback:function(e,t){return _o().memoizedState=[e,void 0===t?null:t],e},useContext:Zi,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=_o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_o();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Xo.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_o().memoizedState=e},useState:Po,useDebugValue:Ko,useDeferredValue:function(e){return _o().memoizedState=e},useTransition:function(){var e=Po(!1),t=e[0];return e=Qo.bind(null,e[1]),_o().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,i=_o();if(Da){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ts)throw Error(a(349));0!==(30&co)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Ro.bind(null,r,o,e),[e]),r.flags|=2048,Oo(9,Ao.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=_o(),t=Ts.identifierPrefix;if(Da){var n=Ea;t=":"+t+"R"+(n=(Ia&~(1<<32-ot(Ia)-1)).toString(32)+n),0<(n=yo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iu={readContext:Zi,useCallback:Wo,useContext:Zi,useEffect:Vo,useImperativeHandle:qo,useInsertionEffect:jo,useLayoutEffect:Bo,useMemo:Go,useReducer:Eo,useRef:Lo,useState:function(){return Eo(Io)},useDebugValue:Ko,useDeferredValue:function(e){return Ho(xo(),fo.memoizedState,e)},useTransition:function(){return[Eo(Io)[0],xo().memoizedState]},useMutableSource:So,useSyncExternalStore:Co,useId:Yo,unstable_isNewReconciler:!1},au={readContext:Zi,useCallback:Wo,useContext:Zi,useEffect:Vo,useImperativeHandle:qo,useInsertionEffect:jo,useLayoutEffect:Bo,useMemo:Go,useReducer:To,useRef:Lo,useState:function(){return To(Io)},useDebugValue:Ko,useDeferredValue:function(e){var t=xo();return null===fo?t.memoizedState=e:Ho(t,fo.memoizedState,e)},useTransition:function(){return[To(Io)[0],xo().memoizedState]},useMutableSource:So,useSyncExternalStore:Co,useId:Yo,unstable_isNewReconciler:!1};function ou(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var su,cu,lu,fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bs||(Bs=!0,zs=r),uu(0,t)},n}function du(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uu(0,t),"function"!==typeof r&&(null===qs?qs=new Set([this]):qs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function vu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function mu(e,t){if(!Da)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ku(e,t,n){var r=t.pendingProps;switch(Na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gu(t),null;case 1:case 17:return Di(t.type)&&Pi(),gu(t),null;case 3:return r=t.stateNode,eo(),Ei(Ni),Ei(Ci),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Va(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Pa&&(ac(Pa),Pa=null))),gu(t),null;case 5:no(t);var i=Ja($a.current);if(n=t.type,null!==e&&null!=t.stateNode)cu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return gu(t),null}if(e=Ja(Ya.current),Va(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,su(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return gu(t),null;case 6:if(e&&null!=t.stateNode)lu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ja($a.current),Ja(Ya.current),Va(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=Aa))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return gu(t),null;case 13:if(Ei(ro),r=t.memoizedState,Da&&null!==Ra&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ra;r;)r=ci(r.nextSibling);return ja(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Va(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[hi]=t}else ja(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return gu(t),null}return null!==Pa&&(ac(Pa),Pa=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Va(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Rs&&(Rs=3):pc())),null!==t.updateQueue&&(t.flags|=4),gu(t),null);case 4:return eo(),null===e&&zr(t.stateNode.containerInfo),gu(t),null;case 10:return Xi(t.type._context),gu(t),null;case 19:if(Ei(ro),null===(o=t.memoizedState))return gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)mu(o,!1);else{if(0!==Rs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=io(e))){for(t.flags|=128,mu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Vs&&(t.flags|=128,r=!0,mu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),mu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Da)return gu(t),null}else 2*$e()-o.renderingStartTime>Vs&&1073741824!==n&&(t.flags|=128,r=!0,mu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=ro.current,Ti(ro,r?1&n|2:1&n),t):(gu(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ns)&&(gu(t),6&t.subtreeFlags&&(t.flags|=8192)):gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}su=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ja(Ya.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var bu=b.ReactCurrentOwner,wu=!1;function _u(e,t,n,r){t.child=null===e?Ha(t,null,n,r):Ga(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ji(t,i),r=bo(e,t,n,r,a,i),n=wo(),null===e||wu?(Da&&n&&Ca(t),t.flags|=1,_u(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Iu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Cu(e,t,n,r,i)}function Tu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(As,Ns),Ns|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(As,Ns),Ns|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(As,Ns),Ns|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(As,Ns),Ns|=r;return _u(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,i){var a=Di(n)?Ai:Ci.current;return a=Ri(t,a),Ji(t,i),n=bo(e,t,n,r,a,i),r=wo(),null===e||wu?(Da&&r&&Ca(t),t.flags|=1,_u(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Nu(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ji(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ya(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Zi(c):c=Ri(t,c=Di(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&va(t,o,r,c),ta=!1;var h=t.memoizedState;o.state=h,sa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||ta?("function"===typeof l&&(fa(t,n,l,r),s=t.memoizedState),(u=ta||da(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Ki(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Zi(s):s=Ri(t,s=Di(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&va(t,o,r,s),ta=!1,h=t.memoizedState,o.state=h,sa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||ta?("function"===typeof d&&(fa(t,n,d,r),p=t.memoizedState),(c=ta||da(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,bu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ga(t,e.child,null,a),t.child=Ga(t,null,u,a)):_u(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ru(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Za(e,t.containerInfo)}function Du(e,t,n,r,i){return ja(),Ba(i),t.flags|=256,_u(e,t,n,r),t.child}var Pu={dehydrated:null,treeContext:null,retryLane:0};function Ou(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lu(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Mu(e,t,n){var r,i=t.pendingProps,o=ro.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(ro,1&o),null===e)return Fa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Lc(o,i,0,null),e=Oc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Ou(n),t.memoizedState=Pu,e):Fu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,ju(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Lc({mode:"visible",children:i.children},o,0,null),(u=Oc(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&Ga(t,e.child,null,n),t.child.memoizedState=Ou(n),t.memoizedState=Pu,u);if(0===(1&t.mode))t=ju(e,t,n,null);else if("$!"===r.data)t=ju(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),wu||i){if(null!==(i=Ts)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Zs(e,i,-1))}pc(),t=ju(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ra=ci(r.nextSibling),Aa=t,Da=!0,Pa=null,null!==n&&(wa[_a++]=Ia,wa[_a++]=Ea,wa[_a++]=xa,Ia=n.id,Ea=n.overflow,xa=t),(t=Fu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Vu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Pu,i):(n=Uu(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Vu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Pu,i):(n=Uu(e,t,i.children,n),t.memoizedState=null,n)}function Fu(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){var i=e.child;return e=i.sibling,n=Dc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Vu(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=Dc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Dc(o,r):(r=Oc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ju(e,t,n,r){return null!==r&&Ba(r),Ga(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),$i(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_u(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ps|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){switch(Na(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ei(Ni),Ei(Ci),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ei(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ja()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ro),null;case 4:return eo(),null;case 10:return Xi(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var Gu=!1,Hu=!1,Qu="function"===typeof WeakSet?WeakSet:Set,Yu=null;function Xu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function $u(e,t,n){try{n()}catch(r){xc(e,t,r)}}var Ju=!1;function Zu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&$u(t,n,a)}i=i.next}while(i!==r)}}function es(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ts(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ns(e){var t=e.alternate;null!==t&&(e.alternate=null,ns(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rs(e){return 5===e.tag||3===e.tag||4===e.tag}function is(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function as(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(as(e,t,n),e=e.sibling;null!==e;)as(e,t,n),e=e.sibling}function os(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(os(e,t,n),e=e.sibling;null!==e;)os(e,t,n),e=e.sibling}var us=null,ss=!1;function cs(e,t,n){for(n=n.child;null!==n;)ls(e,t,n),n=n.sibling}function ls(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Hu||Xu(n,t);case 6:var r=us,i=ss;us=null,cs(e,t,n),ss=i,null!==(us=r)&&(ss?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ss?(e=us,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(us,n.stateNode));break;case 4:r=us,i=ss,us=n.stateNode.containerInfo,ss=!0,cs(e,t,n),us=r,ss=i;break;case 0:case 11:case 14:case 15:if(!Hu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&$u(n,t,o),i=i.next}while(i!==r)}cs(e,t,n);break;case 1:if(!Hu&&(Xu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){xc(n,t,u)}cs(e,t,n);break;case 21:cs(e,t,n);break;case 22:1&n.mode?(Hu=(r=Hu)||null!==n.memoizedState,cs(e,t,n),Hu=r):cs(e,t,n);break;default:cs(e,t,n)}}function fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qu),t.forEach((function(t){var r=Sc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ss=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ss=!0;break e}s=s.return}if(null===us)throw Error(a(160));ls(o,u,i),us=null,ss=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){xc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ds(t,e),t=t.sibling}function ds(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hs(t,e),ps(e),4&r){try{Zu(3,e,e.return),es(3,e)}catch(v){xc(e,e.return,v)}try{Zu(5,e,e.return)}catch(v){xc(e,e.return,v)}}break;case 1:hs(t,e),ps(e),512&r&&null!==n&&Xu(n,n.return);break;case 5:if(hs(t,e),ps(e),512&r&&null!==n&&Xu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(v){xc(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(v){xc(e,e.return,v)}}break;case 6:if(hs(t,e),ps(e),4&r){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(v){xc(e,e.return,v)}}break;case 3:if(hs(t,e),ps(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(v){xc(e,e.return,v)}break;case 4:default:hs(t,e),ps(e);break;case 13:hs(t,e),ps(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(Us=$e()),4&r&&fs(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Hu=(f=Hu)||l,hs(t,e),Hu=f):hs(t,e),ps(e),8192&r){f=null!==e.memoizedState;e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,f?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=d.stateNode,u=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(v){xc(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(v){xc(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(f&&!l&&0!==(1&e.mode))for(Yu=e,e=e.child;null!==e;){for(l=Yu=e;null!==Yu;){switch(h=(f=Yu).child,f.tag){case 0:case 11:case 14:case 15:Zu(4,f,f.return);break;case 1:if(Xu(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){d=f,p=f.return;try{i=d,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(v){xc(d,p,v)}}break;case 5:Xu(f,f.return);break;case 22:if(null!==f.memoizedState){gs(l);continue}}null!==h?(h.return=f,Yu=h):gs(l)}e=e.sibling}}break;case 19:hs(t,e),ps(e),4&r&&fs(e);case 21:}}function ps(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rs(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),os(e,is(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;as(e,is(e),o);break;default:throw Error(a(161))}}catch(u){xc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vs(e,t,n){Yu=e,ys(e,t,n)}function ys(e,t,n){for(var r=0!==(1&e.mode);null!==Yu;){var i=Yu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Gu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Hu;u=Gu;var c=Hu;if(Gu=o,(Hu=s)&&!c)for(Yu=i;null!==Yu;)s=(o=Yu).child,22===o.tag&&null!==o.memoizedState?ks(i):null!==s?(s.return=o,Yu=s):ks(i);for(;null!==a;)Yu=a,ys(a,t,n),a=a.sibling;Yu=i,Gu=u,Hu=c}ms(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Yu=a):ms(e)}}function ms(e){for(;null!==Yu;){var t=Yu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Hu||es(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Hu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ki(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ca(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ca(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Hu||512&t.flags&&ts(t)}catch(d){xc(t,t.return,d)}}if(t===e){Yu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Yu=n;break}Yu=t.return}}function gs(e){for(;null!==Yu;){var t=Yu;if(t===e){Yu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Yu=n;break}Yu=t.return}}function ks(e){for(;null!==Yu;){var t=Yu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{es(4,t)}catch(s){xc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){xc(t,i,s)}}var a=t.return;try{ts(t)}catch(s){xc(t,a,s)}break;case 5:var o=t.return;try{ts(t)}catch(s){xc(t,o,s)}}}catch(s){xc(t,t.return,s)}if(t===e){Yu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Yu=u;break}Yu=t.return}}var bs,ws=Math.ceil,_s=b.ReactCurrentDispatcher,xs=b.ReactCurrentOwner,Is=b.ReactCurrentBatchConfig,Es=0,Ts=null,Ss=null,Cs=0,Ns=0,As=Ii(0),Rs=0,Ds=null,Ps=0,Os=0,Ls=0,Ms=null,Fs=null,Us=0,Vs=1/0,js=null,Bs=!1,zs=null,qs=null,Ks=!1,Ws=null,Gs=0,Hs=0,Qs=null,Ys=-1,Xs=0;function $s(){return 0!==(6&Es)?$e():-1!==Ys?Ys:Ys=$e()}function Js(e){return 0===(1&e.mode)?1:0!==(2&Es)&&0!==Cs?Cs&-Cs:null!==qi.transition?(0===Xs&&(Xs=vt()),Xs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function Zs(e,t,n){if(50<Hs)throw Hs=0,Qs=null,Error(a(185));var r=ec(e,t);return null===r?null:(mt(r,t,n),0!==(2&Es)&&r===Ts||(r===Ts&&(0===(2&Es)&&(Os|=t),4===Rs&&oc(r,Cs)),nc(r,n),1===t&&0===Es&&0===(1&e.mode)&&(Vs=$e()+500,Vi&&zi())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Ts||null!==ea)&&0!==(1&e.mode)&&0===(2&Es)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ts?Cs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(uc.bind(null,e)):Bi(uc.bind(null,e)),oi((function(){0===Es&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Ys=-1,Xs=0,0!==(6&Es))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ts?Cs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Es;Es|=2;var o=dc();for(Ts===e&&Cs===t||(js=null,Vs=$e()+500,fc(e,t));;)try{mc();break}catch(s){hc(e,s)}Yi(),_s.current=o,Es=i,null!==Ss?t=0:(Ts=null,Cs=0,t=Rs)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Ds,fc(e,0),oc(e,r),nc(e,$e()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Ds,fc(e,0),oc(e,r),nc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Fs,js);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Us+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){$s(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Fs,js),t);break}bc(e,Fs,js);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ws(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Fs,js),r);break}bc(e,Fs,js);break;default:throw Error(a(329))}}}return nc(e,$e()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Ms;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Fs,Fs=n,null!==t&&ac(t)),e}function ac(e){null===Fs?Fs=e:Fs.push.apply(Fs,e)}function oc(e,t){for(t&=~Ls,t&=~Os,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Es))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,$e()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ds,fc(e,0),oc(e,t),nc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Fs,js),nc(e,$e()),null}function sc(e,t){var n=Es;Es|=1;try{return e(t)}finally{0===(Es=n)&&(Vs=$e()+500,Vi&&zi())}}function cc(e){null!==Ws&&0===Ws.tag&&0===(6&Es)&&wc();var t=Es;Es|=1;var n=Is.transition,r=kt;try{if(Is.transition=null,kt=1,e)return e()}finally{kt=r,Is.transition=n,0===(6&(Es=t))&&zi()}}function lc(){Ns=As.current,Ei(As)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ss)for(n=Ss.return;null!==n;){var r=n;switch(Na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:eo(),Ei(Ni),Ei(Ci),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ei(ro);break;case 10:Xi(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Ts=e,Ss=e=Dc(e.current,null),Cs=Ns=t,Rs=0,Ds=null,Ls=Os=Ps=0,Fs=Ms=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function hc(e,t){for(;;){var n=Ss;try{if(Yi(),uo.current=nu,po){for(var r=lo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,ho=fo=lo=null,vo=!1,yo=0,xs.current=null,null===n||null===n.return){Rs=1,Ds=t,Ss=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Cs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vu(u);if(null!==p){p.flags&=-257,yu(p,u,s,0,t),1&p.mode&&pu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){pu(o,l,t),pc();break e}c=Error(a(426))}else if(Da&&1&s.mode){var m=vu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),yu(m,u,s,0,t),Ba(c);break e}}o=c,4!==Rs&&(Rs=2),null===Ms?Ms=[o]:Ms.push(o),c=ou(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ua(s,hu(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===qs||!qs.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ua(s,du(s,o,t));break e}}s=s.return}while(null!==s)}kc(n)}catch(b){t=b,Ss===n&&null!==n&&(Ss=n=n.return);continue}break}}function dc(){var e=_s.current;return _s.current=nu,null===e?nu:e}function pc(){0!==Rs&&3!==Rs&&2!==Rs||(Rs=4),null===Ts||0===(268435455&Ps)&&0===(268435455&Os)||oc(Ts,Cs)}function vc(e,t){var n=Es;Es|=2;var r=dc();for(Ts===e&&Cs===t||(js=null,fc(e,t));;)try{yc();break}catch(i){hc(e,i)}if(Yi(),Es=n,_s.current=r,null!==Ss)throw Error(a(261));return Ts=null,Cs=0,Rs}function yc(){for(;null!==Ss;)gc(Ss)}function mc(){for(;null!==Ss&&!Ye();)gc(Ss)}function gc(e){var t=bs(e.alternate,e,Ns);e.memoizedProps=e.pendingProps,null===t?kc(e):Ss=t,xs.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ku(n,t,Ns)))return void(Ss=n)}else{if(null!==(n=Wu(n,t)))return n.flags&=32767,void(Ss=n);if(null===e)return Rs=6,void(Ss=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ss=t);Ss=t=e}while(null!==t);0===Rs&&(Rs=5)}function bc(e,t,n){var r=kt,i=Is.transition;try{Is.transition=null,kt=1,function(e,t,n,r){do{wc()}while(null!==Ws);if(0!==(6&Es))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ts&&(Ss=Ts=null,Cs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ks||(Ks=!0,Cc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=kt;kt=1;var s=Es;Es|=4,xs.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Yu=t;null!==Yu;)if(e=(t=Yu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Yu=e;else for(;null!==Yu;){t=Yu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Ki(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;if(1===b.nodeType)b.textContent="";else if(9===b.nodeType){var w=b.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(_){xc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Yu=e;break}Yu=t.return}v=Ju,Ju=!1}(e,n),ds(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,vs(n,e,i),Xe(),Es=s,kt=u,Is.transition=o}else e.current=n;if(Ks&&(Ks=!1,Ws=e,Gs=i),0===(o=e.pendingLanes)&&(qs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Bs)throw Bs=!1,e=zs,zs=null,e;0!==(1&Gs)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Qs?Hs++:(Hs=0,Qs=e):Hs=0,zi()}(e,t,n,r)}finally{Is.transition=i,kt=r}return null}function wc(){if(null!==Ws){var e=bt(Gs),t=Is.transition,n=kt;try{if(Is.transition=null,kt=16>e?16:e,null===Ws)var r=!1;else{if(e=Ws,Ws=null,Gs=0,0!==(6&Es))throw Error(a(331));var i=Es;for(Es|=4,Yu=e.current;null!==Yu;){var o=Yu,u=o.child;if(0!==(16&Yu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Yu=l;null!==Yu;){var f=Yu;switch(f.tag){case 0:case 11:case 15:Zu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Yu=h;else for(;null!==Yu;){var d=(f=Yu).sibling,p=f.return;if(ns(f),f===l){Yu=null;break}if(null!==d){d.return=p,Yu=d;break}Yu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Yu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Yu=u;else e:for(;null!==Yu;){if(0!==(2048&(o=Yu).flags))switch(o.tag){case 0:case 11:case 15:Zu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Yu=g;break e}Yu=o.return}}var k=e.current;for(Yu=k;null!==Yu;){var b=(u=Yu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Yu=b;else e:for(u=k;null!==Yu;){if(0!==(2048&(s=Yu).flags))try{switch(s.tag){case 0:case 11:case 15:es(9,s)}}catch(_){xc(s,s.return,_)}if(s===u){Yu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Yu=w;break e}Yu=s.return}}if(Es=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Is.transition=t}}return!1}function _c(e,t,n){aa(e,t=hu(0,t=ou(n,t),1)),t=$s(),null!==(e=ec(e,1))&&(mt(e,1,t),nc(e,t))}function xc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qs||!qs.has(r))){aa(t,e=du(t,e=ou(n,e),1)),e=$s(),null!==(t=ec(t,1))&&(mt(t,1,e),nc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=$s(),e.pingedLanes|=e.suspendedLanes&n,Ts===e&&(Cs&n)===n&&(4===Rs||3===Rs&&(130023424&Cs)===Cs&&500>$e()-Us?fc(e,0):Ls|=n),nc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=$s();null!==(e=ec(e,t))&&(mt(e,t,n),nc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Sc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Cc(e,t){return He(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Nc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Oc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Ac(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Ac(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case S:u=9;break e;case C:u=11;break e;case R:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function jc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Si;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=ia(r=$s(),i=Js(n))).callback=void 0!==t&&null!==t?t:null,aa(n,a),e.current.lanes=i,mt(e,i,r),nc(e,r),e}function qc(e,t,n,r){var i=t.current,a=$s(),o=Js(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=Zs(i,o,a))&&oa(e,i,o),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}bs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Ru(t),ja();break;case 5:to(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Wi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Ti(ro,1&ro.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ti(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Tu(e,t,n)}return Ku(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,Da&&0!==(1048576&t.flags)&&Sa(t,ba,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ri(t,Ci.current);Ji(t,n),i=bo(null,t,r,e,i,n);var o=wo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=ha,t.stateNode=i,i._reactInternals=t,ya(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,Da&&o&&Ca(t),_u(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=Ki(r,e),i){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=Nu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=Iu(null,t,r,Ki(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 1:return r=t.type,i=t.pendingProps,Nu(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 3:e:{if(Ru(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),sa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Du(e,t,r,n,i=Error(a(424)));break e}for(Ra=ci(t.stateNode.containerInfo.firstChild),Aa=t,Da=!0,Pa=null,n=Ha(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ja(),r===i){t=Ku(e,t,n);break e}_u(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Fa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),_u(e,t,u,n),t.child;case 6:return null===e&&Fa(t),null;case 13:return Mu(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ga(t,null,r,n):_u(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 7:return _u(e,t,t.pendingProps,n),t.child;case 8:case 12:return _u(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(Wi,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ia(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),$i(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),$i(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}_u(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ji(t,n),r=r(i=Zi(i)),t.flags|=1,_u(e,t,r,n),t.child;case 14:return i=Ki(r=t.type,t.pendingProps),Iu(e,t,r,i=Ki(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ki(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ji(t,n),pa(t,r,i),ya(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Tu(e,t,n)}throw Error(a(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),cc((function(){qc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){qc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),nc(t,$e()),0===(6&Es)&&(Vs=$e()+500,zi()))}break;case 13:var r=$s();cc((function(){return Zs(e,1,r)})),Gc(e,1)}},_t=function(e){13===e.tag&&(Zs(e,134217728,$s()),Gc(e,134217728))},xt=function(e){if(13===e.tag){var t=$s(),n=Js(e);Zs(e,n,t),Gc(e,n)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=sc,Ne=cc;var el={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Se,sc]},tl={findFiberByHostInstance:gi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{it=rl.inject(nl),at=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return jc(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(cc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=sc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.1.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,P(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(T),T=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,T=-1,S=5,C=-1;function N(){return!(t.unstable_now()-C<S)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,x=function(){D.postMessage(null)}}else x=function(){m(A,0)};function P(e){E=e,I||(I=!0,x())}function O(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(T),T=-1):y=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},391:function(e){"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return U},SDK_VERSION:function(){return Je},_DEFAULT_ENTRY_NAME:function(){return Ve},_addComponent:function(){return qe},_addOrOverwriteComponent:function(){return Ke},_apps:function(){return Be},_clearComponents:function(){return Qe},_components:function(){return ze},_getProvider:function(){return Ge},_registerComponent:function(){return We},_removeServiceInstance:function(){return He},deleteApp:function(){return nt},getApp:function(){return et},getApps:function(){return tt},initializeApp:function(){return Ze},onLog:function(){return at},registerVersion:function(){return it},setLogLevel:function(){return ot}});var t=n(791),r=n(250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||u()}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function b(e,t){if(t&&("object"===k(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function w(e){var t=g();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function _(e,t,n){return _=g()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i},_.apply(null,arguments)}function x(e){var t="function"===typeof Map?new Map:void 0;return x=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _(e,arguments,m(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,e)},x(e)}var I=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(I(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},T=function(e){return function(e){var t=I(e);return E.encodeByteArray(t,!0)}(e).replace(/\./g,"")},S=function(e){try{return E.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function C(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=C(e[n],t[n]));return e}var N=function(){function e(){var t=this;l(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return h(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function A(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[T(JSON.stringify({alg:"none",type:"JWT"})),T(JSON.stringify(a)),""].join(".")}function R(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function D(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(R())}function P(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function O(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function L(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function M(){var e=R();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function F(){return"object"===typeof indexedDB}var U=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(p(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(p(a),V.prototype.create),a}return h(n)}(x(Error)),V=function(){function e(t,n,r){l(this,e),this.service=t,this.serviceName=n,this.errors=r}return h(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?j(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new U(n,a,t);return o}}]),e}();function j(e,t){return e.replace(B,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var B=/\{\$([^}]+)}/g;function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function q(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(K(u)&&K(s)){if(!q(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function K(e){return null!==e&&"object"===typeof e}function W(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function G(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function H(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Q(e,t){var n=new Y(e,t);return n.subscribe.bind(n)}var Y=function(){function e(t,n){var r=this;l(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return h(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=d(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=X),void 0===r.error&&(r.error=X),void 0===r.complete&&(r.complete=X);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function X(){}function $(e){return e&&e._delegate?e._delegate:e}function J(){J=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(S){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new I(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==k(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(b.prototype),u(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Z(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ee(e){return function(e){if(Array.isArray(e))return a(e)}(e)||Z(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){te(a,r,i,o,u,"next",e)}function u(e){te(a,r,i,o,u,"throw",e)}o(void 0)}))}}var re=function(){function e(t,n,r){l(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return h(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ie="[DEFAULT]",ae=function(){function e(t,n){l(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return h(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new N;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ie})}catch(c){}var t,n=d(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ne(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ee(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ee(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=d(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(a_){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ie?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(a_){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie;return this.component?this.component.multipleInstances?e:ie:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var oe,ue,se=function(){function e(t){l(this,e),this.name=t,this.providers=new Map}return h(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ae(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ce=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ue||(ue={}));var le={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},fe=ue.INFO,he=(c(oe={},ue.DEBUG,"log"),c(oe,ue.VERBOSE,"log"),c(oe,ue.INFO,"info"),c(oe,ue.WARN,"warn"),c(oe,ue.ERROR,"error"),oe),de=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=he[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},pe=function(){function e(t){l(this,e),this.name=t,this._logLevel=fe,this._logHandler=de,this._userLogHandler=null,ce.push(this)}return h(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ue))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?le[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ue.DEBUG].concat(t)),this._logHandler.apply(this,[this,ue.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ue.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ue.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ue.INFO].concat(t)),this._logHandler.apply(this,[this,ue.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ue.WARN].concat(t)),this._logHandler.apply(this,[this,ue.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ue.ERROR].concat(t)),this._logHandler.apply(this,[this,ue.ERROR].concat(t))}}]),e}();function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me,ge;var ke=new WeakMap,be=new WeakMap,we=new WeakMap,_e=new WeakMap,xe=new WeakMap;var Ie={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return be.get(e);if("objectStoreNames"===t)return e.objectStoreNames||we.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Se(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ee(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ce(this),n),Se(ke.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Se(e.apply(Ce(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ce(this),t].concat(r));return we.set(a,t.sort?t.sort():[t]),Se(a)}}function Te(e){return"function"===typeof e?Ee(e):(e instanceof IDBTransaction&&function(e){if(!be.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));be.set(e,t)}}(e),t=e,(me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Ie):e);var t}function Se(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Se(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&ke.set(t,e)})).catch((function(){})),xe.set(t,e),t}(e);if(_e.has(e))return _e.get(e);var t=Te(e);return t!==e&&(_e.set(e,t),xe.set(t,e)),t}var Ce=function(e){return xe.get(e)};var Ne,Ae,Re=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],Pe=new Map;function Oe(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Pe.get(t))return Pe.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=De.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Re.includes(n))){var a=function(){var e=ne(J().mark((function e(t){var a,o,u,s,c,l,f=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Pe.set(t,a),a}}}Ie=function(e){return ye(ye({},e),{},{get:function(t,n,r){return Oe(t,n)||e.get(t,n,r)},has:function(t,n){return!!Oe(t,n)||e.has(t,n)}})}(Ie);var Le=function(){function e(t){l(this,e),this.container=t}return h(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Me="@firebase/app",Fe="0.7.25",Ue=new pe("@firebase/app"),Ve="[DEFAULT]",je=(c(Ne={},Me,"fire-core"),c(Ne,"@firebase/app-compat","fire-core-compat"),c(Ne,"@firebase/analytics","fire-analytics"),c(Ne,"@firebase/analytics-compat","fire-analytics-compat"),c(Ne,"@firebase/app-check","fire-app-check"),c(Ne,"@firebase/app-check-compat","fire-app-check-compat"),c(Ne,"@firebase/auth","fire-auth"),c(Ne,"@firebase/auth-compat","fire-auth-compat"),c(Ne,"@firebase/database","fire-rtdb"),c(Ne,"@firebase/database-compat","fire-rtdb-compat"),c(Ne,"@firebase/functions","fire-fn"),c(Ne,"@firebase/functions-compat","fire-fn-compat"),c(Ne,"@firebase/installations","fire-iid"),c(Ne,"@firebase/installations-compat","fire-iid-compat"),c(Ne,"@firebase/messaging","fire-fcm"),c(Ne,"@firebase/messaging-compat","fire-fcm-compat"),c(Ne,"@firebase/performance","fire-perf"),c(Ne,"@firebase/performance-compat","fire-perf-compat"),c(Ne,"@firebase/remote-config","fire-rc"),c(Ne,"@firebase/remote-config-compat","fire-rc-compat"),c(Ne,"@firebase/storage","fire-gcs"),c(Ne,"@firebase/storage-compat","fire-gcs-compat"),c(Ne,"@firebase/firestore","fire-fst"),c(Ne,"@firebase/firestore-compat","fire-fst-compat"),c(Ne,"fire-js","fire-js"),c(Ne,"firebase","fire-js-all"),Ne),Be=new Map,ze=new Map;function qe(e,t){try{e.container.addComponent(t)}catch(n){Ue.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ke(e,t){e.container.addOrOverwriteComponent(t)}function We(e){var t=e.name;if(ze.has(t))return Ue.debug("There were multiple attempts to register component ".concat(t,".")),!1;ze.set(t,e);var n,r=d(Be.values());try{for(r.s();!(n=r.n()).done;){qe(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ge(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function He(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ve;Ge(e,t).clearInstance(n)}function Qe(){ze.clear()}var Ye=(c(Ae={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),c(Ae,"bad-app-name","Illegal App name: '{$appName}"),c(Ae,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),c(Ae,"app-deleted","Firebase App named '{$appName}' already deleted"),c(Ae,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),c(Ae,"invalid-log-argument","First argument to `onLog` must be null or a function."),c(Ae,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),c(Ae,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),c(Ae,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),c(Ae,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Ae),Xe=new V("app","Firebase",Ye),$e=function(){function e(t,n,r){var i=this;l(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new re("app",(function(){return i}),"PUBLIC"))}return h(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Xe.create("app-deleted",{appName:this._name})}}]),e}(),Je="9.8.2";function Ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Ve,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Xe.create("bad-app-name",{appName:String(i)});var a=Be.get(i);if(a){if(q(e,a.options)&&q(r,a.config))return a;throw Xe.create("duplicate-app",{appName:i})}var o,u=new se(i),s=d(ze.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new $e(e,r,u);return Be.set(i,l),l}function et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=Be.get(e);if(!t)throw Xe.create("no-app",{appName:e});return t}function tt(){return Array.from(Be.values())}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Be.has(n)){e.next=6;break}return Be.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e,t,n){var r,i=null!==(r=je[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ue.warn(u.join(" "))}We(new re("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function at(e,t){if(null!==e&&"function"!==typeof e)throw Xe.create("invalid-log-argument");!function(e,t){var n,r=d(ce);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=le[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ue[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ot(e){var t;t=e,ce.forEach((function(e){e.setLogLevel(t)}))}var ut="firebase-heartbeat-store",st=null;function ct(){return st||(st=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Se(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Se(u.result),e.oldVersion,e.newVersion,Se(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(ut)}}).catch((function(e){throw Xe.create("storage-open",{originalErrorMessage:e.message})}))),st}function lt(e){return ft.apply(this,arguments)}function ft(){return ft=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct();case 3:return n=e.sent,e.abrupt("return",n.transaction(ut).objectStore(ut).get(pt(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Xe.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ft.apply(this,arguments)}function ht(e,t){return dt.apply(this,arguments)}function dt(){return dt=ne(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct();case 3:return r=e.sent,i=r.transaction(ut,"readwrite"),a=i.objectStore(ut),e.next=8,a.put(n,pt(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),Xe.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),dt.apply(this,arguments)}function pt(e){return"".concat(e.name,"!").concat(e.options.appId)}var vt=function(){function e(t){var n=this;l(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new bt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return h(e,[{key:"triggerHeartbeat",value:function(){var e=ne(J().mark((function e(){var t,n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=yt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ne(J().mark((function e(){var t,n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=yt(),n=mt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=T(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function yt(){return(new Date).toISOString().substring(0,10)}function mt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=d(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),wt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),wt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var gt,kt,bt=function(){function e(t){l(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return h(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ne(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,lt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ne(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ht(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ne(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ht(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ee(r.heartbeats),ee(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function wt(e){return T(JSON.stringify({version:2,heartbeats:e})).length}gt="",We(new re("platform-logger",(function(e){return new Le(e)}),"PRIVATE")),We(new re("heartbeat",(function(e){return new vt(e)}),"PRIVATE")),it(Me,Fe,gt),it(Me,Fe,"esm2017"),it("fire-js","");var _t=function(){function e(t,n){var r=this;l(this,e),this._delegate=t,this.firebase=n,qe(t,new re("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return h(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),nt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ve;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ve;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){qe(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ke(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),xt=(c(kt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),c(kt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),kt),It=new V("app-compat","Firebase",xt);var Et=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ze(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(z(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:it,setLogLevel:ot,onLog:at,apps:null,SDK_VERSION:Je,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(We(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw It.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&C(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!z(n,e=e||Ve))throw It.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(_t);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){C(n,e)},createSubscribe:Q,ErrorFactory:V,deepExtend:C}),n}(),Tt=new pe("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Tt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var St=self.firebase.SDK_VERSION;St&&St.indexOf("LITE")>=0&&Tt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ct=Et;!function(e){it("@firebase/app-compat","0.1.26",e)}();function Nt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function At(){return At="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Nt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},At.apply(this,arguments)}Ct.registerVersion("firebase","9.8.2","app-compat");function Rt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Dt;Object.create;var Pt="facebook.com",Ot="github.com",Lt="google.com",Mt="password",Ft="twitter.com",Ut="EMAIL_SIGNIN",Vt="PASSWORD_RESET",jt="RECOVER_EMAIL",Bt="REVERT_SECOND_FACTOR_ADDITION",zt="VERIFY_AND_CHANGE_EMAIL",qt="VERIFY_EMAIL";function Kt(){return c({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Wt=function(){var e;return c(e={},"admin-restricted-operation","This operation is restricted to administrators only."),c(e,"argument-error",""),c(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),c(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),c(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),c(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),c(e,"cordova-not-ready","Cordova framework is not ready."),c(e,"cors-unsupported","This browser is not supported."),c(e,"credential-already-in-use","This credential is already associated with a different user account."),c(e,"custom-token-mismatch","The custom token corresponds to a different audience."),c(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),c(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),c(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),c(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),c(e,"email-already-in-use","The email address is already in use by another account."),c(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),c(e,"expired-action-code","The action code has expired."),c(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),c(e,"internal-error","An internal AuthError has occurred."),c(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),c(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),c(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),c(e,"invalid-auth-event","An internal AuthError has occurred."),c(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),c(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),c(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),c(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),c(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),c(e,"invalid-email","The email address is badly formatted."),c(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),c(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),c(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),c(e,"invalid-credential","The supplied auth credential is malformed or has expired."),c(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),c(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),c(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),c(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),c(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),c(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),c(e,"wrong-password","The password is invalid or the user does not have a password."),c(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),c(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),c(e,"invalid-provider-id","The specified provider ID is invalid."),c(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),c(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),c(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),c(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),c(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),c(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),c(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),c(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),c(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),c(e,"missing-continue-uri","A continue URL must be provided in the request."),c(e,"missing-iframe-start","An internal AuthError has occurred."),c(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),c(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),c(e,"missing-multi-factor-info","No second factor identifier is provided."),c(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),c(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),c(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),c(e,"app-deleted","This instance of FirebaseApp has been deleted."),c(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),c(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),c(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),c(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),c(e,"no-auth-event","An internal AuthError has occurred."),c(e,"no-such-provider","User was not linked to an account with the given provider."),c(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),c(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),c(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),c(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),c(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),c(e,"provider-already-linked","User can only be linked to one identity for the given provider."),c(e,"quota-exceeded","The project's quota for this operation has been exceeded."),c(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),c(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),c(e,"rejected-credential","The request contains malformed or mismatching credentials."),c(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),c(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),c(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),c(e,"timeout","The operation has timed out."),c(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),c(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),c(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),c(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),c(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),c(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),c(e,"unverified-email","The operation requires a verified email."),c(e,"user-cancelled","The user did not grant your application the permissions it requested."),c(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),c(e,"user-disabled","The user account has been disabled by an administrator."),c(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),c(e,"user-signed-out",""),c(e,"weak-password","The password must be 6 characters long or more."),c(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),c(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Gt=Kt,Ht=new V("auth","Firebase",Kt()),Qt=new pe("@firebase/auth");function Yt(e){if(Qt.logLevel<=ue.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Qt.error.apply(Qt,["Auth (".concat(Je,"): ").concat(e)].concat(n))}}function Xt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw en.apply(void 0,[e].concat(n))}function $t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return en.apply(void 0,[e].concat(n))}function Jt(e,t,n){var r=Object.assign(Object.assign({},Gt()),c({},t,n));return new V("auth","Firebase",r).create(t,{appName:e.name})}function Zt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Xt(e,"argument-error"),Jt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function en(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ee(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ee(o)))}return Ht.create.apply(Ht,[e].concat(n))}function tn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw en.apply(void 0,[t].concat(r))}}function nn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Yt(t),new Error(t)}function rn(e,t){e||nn(t)}var an=new Map;function on(e){rn(e instanceof Function,"Expected a class definition");var t=an.get(e);return t?(rn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,an.set(e,t),t)}function un(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function sn(){return"http:"===cn()||"https:"===cn()}function cn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var ln=function(){function e(t,n){l(this,e),this.shortDelay=t,this.longDelay=n,rn(n>t,"Short delay should be less than long delay!"),this.isMobile=D()||L()}return h(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(sn()||O()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function fn(e,t){rn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var hn=function(){function e(){l(this,e)}return h(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),dn=(c(Dt={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),c(Dt,"MISSING_CUSTOM_TOKEN","internal-error"),c(Dt,"INVALID_IDENTIFIER","invalid-email"),c(Dt,"MISSING_CONTINUE_URI","internal-error"),c(Dt,"INVALID_PASSWORD","wrong-password"),c(Dt,"MISSING_PASSWORD","internal-error"),c(Dt,"EMAIL_EXISTS","email-already-in-use"),c(Dt,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),c(Dt,"INVALID_IDP_RESPONSE","invalid-credential"),c(Dt,"INVALID_PENDING_TOKEN","invalid-credential"),c(Dt,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),c(Dt,"MISSING_REQ_TYPE","internal-error"),c(Dt,"EMAIL_NOT_FOUND","user-not-found"),c(Dt,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),c(Dt,"EXPIRED_OOB_CODE","expired-action-code"),c(Dt,"INVALID_OOB_CODE","invalid-action-code"),c(Dt,"MISSING_OOB_CODE","internal-error"),c(Dt,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),c(Dt,"INVALID_ID_TOKEN","invalid-user-token"),c(Dt,"TOKEN_EXPIRED","user-token-expired"),c(Dt,"USER_NOT_FOUND","user-token-expired"),c(Dt,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),c(Dt,"INVALID_CODE","invalid-verification-code"),c(Dt,"INVALID_SESSION_INFO","invalid-verification-id"),c(Dt,"INVALID_TEMPORARY_PROOF","invalid-credential"),c(Dt,"MISSING_SESSION_INFO","missing-verification-id"),c(Dt,"SESSION_EXPIRED","code-expired"),c(Dt,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),c(Dt,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),c(Dt,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),c(Dt,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),c(Dt,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),c(Dt,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),c(Dt,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),c(Dt,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),c(Dt,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),c(Dt,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),c(Dt,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Dt),pn=new ln(3e4,6e4);function vn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function yn(e,t,n,r){return mn.apply(this,arguments)}function mn(){return mn=ne(J().mark((function e(t,n,r,i){var a,o=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",gn(t,a,ne(J().mark((function e(){var a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=W(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",hn.fetch()(_n(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),mn.apply(this,arguments)}function gn(e,t,n){return kn.apply(this,arguments)}function kn(){return(kn=ne(J().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},dn),n),e.prev=2,a=new xn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw In(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw In(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw In(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw In(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Jt(t,p,d);case 34:Xt(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof U)){e.next=41;break}throw e.t0;case 41:Xt(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function bn(e,t,n,r){return wn.apply(this,arguments)}function wn(){return wn=ne(J().mark((function e(t,n,r,i){var a,o,u=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,yn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Xt(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),wn.apply(this,arguments)}function _n(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?fn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var xn=function(){function e(t){var n=this;l(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t($t(n.auth,"network-request-failed"))}),pn.get())}))}return h(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function In(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=$t(e,t,r);return i.customData._tokenResponse=n,i}function En(e,t){return Tn.apply(this,arguments)}function Tn(){return(Tn=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sn(e,t){return Cn.apply(this,arguments)}function Cn(){return(Cn=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nn(e,t){return An.apply(this,arguments)}function An(){return(An=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rn(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Dn(){return Dn=ne(J().mark((function e(t){var n,r,i,a,o,u,s=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=$(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,tn((a=On(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Rn(Pn(a.auth_time)),issuedAtTime:Rn(Pn(a.iat)),expirationTime:Rn(Pn(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Dn.apply(this,arguments)}function Pn(e){return 1e3*Number(e)}function On(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Yt("JWT malformed, contained fewer than 3 sections"),null;try{var a=S(r);return a?JSON.parse(a):(Yt("Failed to decode base64 JWT payload"),null)}catch(o){return Yt("Caught error parsing JWT payload as JSON",o),null}}function Ln(e,t){return Mn.apply(this,arguments)}function Mn(){return Mn=ne(J().mark((function e(t,n){var r=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof U&&Fn(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Mn.apply(this,arguments)}function Fn(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Un=function(){function e(t){l(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return h(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ne(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Vn=function(){function e(t,n){l(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return h(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Rn(this.lastLoginAt),this.creationTime=Rn(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function jn(e){return Bn.apply(this,arguments)}function Bn(){return Bn=ne(J().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ln(t,Nn(r,{idToken:i}));case 6:tn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Kn(o.providerUserInfo):[],s=qn(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Vn(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Bn.apply(this,arguments)}function zn(){return(zn=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$(t),e.next=3,jn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ee(n),ee(t))}function Kn(e){return e.map((function(e){var t=e.providerId,n=Rt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Wn(e,t){return Gn.apply(this,arguments)}function Gn(){return(Gn=ne(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gn(t,{},ne(J().mark((function e(){var r,i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=W({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=_n(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",hn.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hn=function(){function e(){l(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return h(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){tn(e.idToken,"internal-error"),tn("undefined"!==typeof e.idToken,"internal-error"),tn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=On(e);return tn(t,"internal-error"),tn("undefined"!==typeof t.exp,"internal-error"),tn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ne(J().mark((function e(t){var n,r=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],tn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ne(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return nn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(tn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(tn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(tn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Qn(e,t){tn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Yn=function(){function e(t){l(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Rt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?ee(a.providerData):[],this.metadata=new Vn(a.createdAt||void 0,a.lastLoginAt||void 0)}return h(e,[{key:"getIdToken",value:function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ln(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(tn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Dn.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return zn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(tn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){tn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ne(J().mark((function e(t){var n,r,i=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,jn(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ne(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ln(this,En(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;tn(k&&x,t,"internal-error");var I=Hn.fromJSON(this.name,x);tn("string"===typeof k,t,"internal-error"),Qn(f,t.name),Qn(h,t.name),tn("boolean"===typeof b,t,"internal-error"),tn("boolean"===typeof w,t,"internal-error"),Qn(d,t.name),Qn(p,t.name),Qn(v,t.name),Qn(y,t.name),Qn(m,t.name),Qn(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=ne(J().mark((function t(n,r){var i,a,o,u=arguments;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Hn).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,jn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Xn=function(){function e(){l(this,e),this.type="NONE",this.storage={}}return h(e,[{key:"_isAvailable",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Xn.type="NONE";var $n=Xn;function Jn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Zn=function(){function e(t,n,r){l(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Jn(this.userKey,a.apiKey,o),this.fullPersistenceKey=Jn("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return h(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ne(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Yn._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ne(J().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,p,v,y=arguments;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(on($n),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||on($n),u=Jn(i,n.config.apiKey,n.name),s=null,c=d(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return p=Yn._fromJSON(n,h),f!==o&&(s=p),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(v=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=v[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function er(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ir(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(tr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(or(t))return"Blackberry";if(ur(t))return"Webos";if(nr(t))return"Safari";if((t.includes("chrome/")||rr(t))&&!t.includes("edge/"))return"Chrome";if(ar(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/firefox\//i.test(e)}function nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/crios\//i.test(e)}function ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/iemobile/i.test(e)}function ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/android/i.test(e)}function or(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/blackberry/i.test(e)}function ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/webos/i.test(e)}function sr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/iphone|ipad|ipod/i.test(e)}function cr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return sr(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function lr(){return M()&&10===document.documentMode}function fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return sr(e)||ar(e)||ur(e)||or(e)||/windows phone/i.test(e)||ir(e)}function hr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=er(R());break;case"Worker":t="".concat(er(R()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Je,"/").concat(r)}var dr=function(){function e(t){l(this,e),this.auth=t,this.queue=[]}return h(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=ne(J().mark((function e(t){var n,r,i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=d(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=d(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),pr=function(){function e(t,n,r){l(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yr(this),this.idTokenSubscription=new yr(this),this.beforeStateQueue=new dr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ht,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return h(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=on(t)),this._initializationPromise=this.queue(ne(J().mark((function r(){var i,a;return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Zn.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ne(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ne(J().mark((function e(t){var n,r,i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return tn(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?$(t):null)&&tn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ne(J().mark((function e(t){var n,r=this,i=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&tn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ne(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(on(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new V("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ne(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return tn(n=t&&on(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Zn.create(this,[on(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ne(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ne(J().mark((function e(t){var n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return tn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return tn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ne(J().mark((function e(){var t,n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function vr(e){return $(e)}var yr=function(){function e(t){var n=this;l(this,e),this.auth=t,this.observer=null,this.addObserver=Q((function(e){return n.observer=e}))}return h(e,[{key:"next",get:function(){return tn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function mr(e,t,n){var r=vr(e);tn(r._canInitEmulator,r,"emulator-config-failed"),tn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=gr(t),o=function(e){var t=gr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:kr(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:kr(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function gr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function kr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var br=function(){function e(t,n){l(this,e),this.providerId=t,this.signInMethod=n}return h(e,[{key:"toJSON",value:function(){return nn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return nn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return nn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return nn("not implemented")}}]),e}();function wr(e,t){return _r.apply(this,arguments)}function _r(){return(_r=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:resetPassword",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xr(e,t){return Ir.apply(this,arguments)}function Ir(){return(Ir=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Er(e,t){return Tr.apply(this,arguments)}function Tr(){return(Tr=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:update",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sr(e,t){return Cr.apply(this,arguments)}function Cr(){return(Cr=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:signInWithPassword",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nr(e,t){return Ar.apply(this,arguments)}function Ar(){return(Ar=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:sendOobCode",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rr(e,t){return Dr.apply(this,arguments)}function Dr(){return(Dr=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pr(e,t){return Or.apply(this,arguments)}function Or(){return(Or=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lr(e,t){return Mr.apply(this,arguments)}function Mr(){return(Mr=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fr(e,t){return Ur.apply(this,arguments)}function Ur(){return(Ur=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vr(e,t){return jr.apply(this,arguments)}function jr(){return(jr=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:signInWithEmailLink",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Br(e,t){return zr.apply(this,arguments)}function zr(){return(zr=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:signInWithEmailLink",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qr=function(e){y(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return l(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return h(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Sr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Vr(t,{email:this._email,oobCode:this._password}));case 5:Xt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",xr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Br(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Xt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(br);function Kr(e,t){return Wr.apply(this,arguments)}function Wr(){return(Wr=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:signInWithIdp",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Gr=function(e){y(n,e);var t=w(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return h(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Kr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Kr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Kr(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=W(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xt("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Rt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(br);function Hr(e,t){return Qr.apply(this,arguments)}function Qr(){return(Qr=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:sendVerificationCode",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yr(){return(Yr=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:signInWithPhoneNumber",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xr(){return(Xr=ne(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bn(t,"POST","/v1/accounts:signInWithPhoneNumber",vn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw In(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $r=c({},"USER_NOT_FOUND","user-not-found");function Jr(){return(Jr=ne(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",bn(t,"POST","/v1/accounts:signInWithPhoneNumber",vn(t,r),$r));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zr=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone","phone")).params=e,r}return h(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Yr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Xr.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Jr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(br);var ei=function(){function e(t){var n,r,i,a,o,u;l(this,e);var s=G(H(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,f=null!==(r=s.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);tn(c&&f&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=f,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return h(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=G(H(e)).link,n=t?G(H(t)).deep_link_id:null,r=G(H(e)).deep_link_id;return(r?G(H(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(a_){return null}}}]),e}();var ti=function(){function e(){l(this,e),this.providerId=e.PROVIDER_ID}return h(e,null,[{key:"credential",value:function(e,t){return qr._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ei.parseLink(t);return tn(n,"argument-error"),qr._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ti.PROVIDER_ID="password",ti.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ti.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ni=function(){function e(t){l(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return h(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ri=function(e){y(n,e);var t=w(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).scopes=[],e}return h(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ee(this.scopes)}}]),n}(ni),ii=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return tn(e.idToken||e.accessToken,"argument-error"),Gr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return tn("providerId"in t&&"signInMethod"in t,"argument-error"),Gr._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(ri),ai=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.call(this,"facebook.com")}return h(n,null,[{key:"credential",value:function(e){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(a_){return null}}}]),n}(ri);ai.FACEBOOK_SIGN_IN_METHOD="facebook.com",ai.PROVIDER_ID="facebook.com";var oi=function(e){y(n,e);var t=w(n);function n(){var e;return l(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return h(n,null,[{key:"credential",value:function(e,t){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a_){return null}}}]),n}(ri);oi.GOOGLE_SIGN_IN_METHOD="google.com",oi.PROVIDER_ID="google.com";var ui=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.call(this,"github.com")}return h(n,null,[{key:"credential",value:function(e){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(a_){return null}}}]),n}(ri);ui.GITHUB_SIGN_IN_METHOD="github.com",ui.PROVIDER_ID="github.com";var si=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return h(n,[{key:"_getIdTokenResponse",value:function(e){return Kr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Kr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Kr(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(br),ci=function(e){y(n,e);var t=w(n);function n(e){return l(this,n),tn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return h(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=si.fromJSON(e);return tn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return si._create(r,n)}catch(i){return null}}}]),n}(ni),li=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.call(this,"twitter.com")}return h(n,null,[{key:"credential",value:function(e,t){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a_){return null}}}]),n}(ri);function fi(e,t){return hi.apply(this,arguments)}function hi(){return(hi=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:signUp",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}li.TWITTER_SIGN_IN_METHOD="twitter.com",li.PROVIDER_ID="twitter.com";var di=function(){function e(t){l(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return h(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ne(J().mark((function t(n,r,i){var a,o,u,s,c=arguments;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Yn._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=pi(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ne(J().mark((function t(n,r,i){var a;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=pi(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function pi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function vi(){return vi=ne(J().mark((function e(t){var n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new di({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,fi(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,di._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),vi.apply(this,arguments)}var yi=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o,u;return l(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(p(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return h(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(U);function mi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw yi._fromErrorAndOperation(e,n,t,r);throw n}))}function gi(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ki(e,t){return bi.apply(this,arguments)}function bi(){return bi=ne(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$(t),e.next=3,xi(!0,r,n);case 3:return e.t0=Sn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=gi(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),bi.apply(this,arguments)}function wi(e,t){return _i.apply(this,arguments)}function _i(){return _i=ne(J().mark((function e(t,n){var r,i,a=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ln,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",di._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}function xi(e,t,n){return Ii.apply(this,arguments)}function Ii(){return(Ii=ne(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jn(n);case 2:i=gi(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",tn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ei(e,t){return Ti.apply(this,arguments)}function Ti(){return Ti=ne(J().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Ln(t,mi(i,a,n,t),r);case 6:return tn((o=e.sent).idToken,i,"internal-error"),tn(u=On(o.idToken),i,"internal-error"),s=u.sub,tn(t.uid===s,i,"user-mismatch"),e.abrupt("return",di._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Xt(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ti.apply(this,arguments)}function Si(e,t){return Ci.apply(this,arguments)}function Ci(){return Ci=ne(J().mark((function e(t,n){var r,i,a,o,u=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,mi(t,i,n);case 4:return a=e.sent,e.next=7,di._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ci.apply(this,arguments)}function Ni(e,t){return Ai.apply(this,arguments)}function Ai(){return(Ai=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Si(vr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ri(e,t){return Di.apply(this,arguments)}function Di(){return(Di=ne(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$(t),e.next=3,xi(!1,r,n.providerId);case 3:return e.abrupt("return",wi(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pi(e,t){return Oi.apply(this,arguments)}function Oi(){return(Oi=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei($(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Li(e,t){return Mi.apply(this,arguments)}function Mi(){return(Mi=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:signInWithCustomToken",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fi(){return(Fi=ne(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vr(t),e.next=3,Li(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,di._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ui=function(){function e(t,n){l(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return h(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Vi._fromServerResponse(e,t):Xt(e,"internal-error")}}]),e}(),Vi=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return h(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ui);function ji(e,t,n){var r;tn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),tn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(tn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(tn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Bi(){return(Bi=ne(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$(t),a={requestType:"PASSWORD_RESET",email:n},r&&ji(i,a,r),e.next=5,Pr(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zi(){return(zi=ne(J().mark((function e(t,n,r){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wr($(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qi(){return(qi=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Er($(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ki(e,t){return Wi.apply(this,arguments)}function Wi(){return(Wi=ne(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$(t),e.next=3,wr(r,{oobCode:n});case 3:i=e.sent,tn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return tn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:tn(i.mfaInfo,r,"internal-error");case 13:tn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Ui._fromServerResponse(vr(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gi(){return(Gi=ne(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ki($(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hi(e,t,n){return Qi.apply(this,arguments)}function Qi(){return(Qi=ne(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vr(t),e.next=3,fi(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,di._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yi(){return(Yi=ne(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$(t),a={requestType:"EMAIL_SIGNIN",email:n},tn(r.handleCodeInApp,i,"argument-error"),r&&ji(i,a,r),e.next=6,Lr(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xi(){return(Xi=ne(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$(t),tn((a=ti.credentialWithLink(n,r||un()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ni(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $i(e,t){return Ji.apply(this,arguments)}function Ji(){return(Ji=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:createAuthUri",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zi(){return(Zi=ne(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sn()?un():"http://localhost",i={identifier:n,continueUri:r},e.next=4,$i($(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(){return(ea=ne(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&ji(r.auth,a,n),e.next=8,Rr(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ta(){return(ta=ne(J().mark((function e(t,n,r){var i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&ji(i.auth,o,r),e.next=8,Fr(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(e,t){return ra.apply(this,arguments)}function ra(){return(ra=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(){return(ia=ne(J().mark((function e(t,n){var r,i,a,o,u,s,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=$(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ln(a,na(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aa(e,t,n){return oa.apply(this,arguments)}function oa(){return(oa=ne(J().mark((function e(t,n,r){var i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ln(t,xr(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ua=h((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};l(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),sa=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this,e,r,i)).username=a,o}return h(n)}(ua),ca=function(e){y(n,e);var t=w(n);function n(e,r){return l(this,n),t.call(this,e,"facebook.com",r)}return h(n)}(ua),la=function(e){y(n,e);var t=w(n);function n(e,r){return l(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return h(n)}(sa),fa=function(e){y(n,e);var t=w(n);function n(e,r){return l(this,n),t.call(this,e,"google.com",r)}return h(n)}(ua),ha=function(e){y(n,e);var t=w(n);function n(e,r,i){return l(this,n),t.call(this,e,"twitter.com",r,i)}return h(n)}(sa);function da(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=On(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ua(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ca(a,i);case"github.com":return new la(a,i);case"google.com":return new fa(a,i);case"twitter.com":return new ha(a,i,e.screenName||null);case"custom":case"anonymous":return new ua(a,null);default:return new ua(a,r,i)}}(n)}var pa=function(){function e(t,n){l(this,e),this.type=t,this.credential=n}return h(e,[{key:"toJSON",value:function(){return{multiFactorSession:c({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),va=function(){function e(t,n,r){l(this,e),this.session=t,this.hints=n,this.signInResolver=r}return h(e,[{key:"resolveSignIn",value:function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=vr(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Ui._fromServerResponse(r,e)}));tn(i.mfaPendingCredential,r,"internal-error");var o=pa._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ne(J().mark((function e(t){var a,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,di._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return tn(n.user,r,"internal-error"),e.abrupt("return",di._forOperation(n.user,n.operationType,u));case 17:Xt(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function ya(e,t){return yn(e,"POST","/v2/accounts/mfaEnrollment:start",vn(e,t))}var ma=function(){function e(t){var n=this;l(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Ui._fromServerResponse(t.auth,e)})))}))}return h(e,[{key:"getSession",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=pa,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ne(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ln(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ne(J().mark((function e(t){var n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Ln(this.user,yn(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",vn(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ga=new WeakMap;var ka="__sak",ba=function(){function e(t,n){l(this,e),this.storageRetriever=t,this.type=n}return h(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ka,"1"),this.storage.removeItem(ka),Promise.resolve(!0)):Promise.resolve(!1)}catch(a_){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var wa=function(e){y(n,e);var t=w(n);function n(){var e;return l(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=R();return nr(e)||sr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=fr(),e._shouldAllowMigration=!0,e}return h(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);lr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ne(J().mark((function e(t,r){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(m(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ne(J().mark((function e(t){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(m(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(m(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ba);wa.type="LOCAL";var _a=wa,xa=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return h(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ba);xa.type="SESSION";var Ia=xa;function Ea(e){return Promise.all(e.map(function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ta=function(){function e(t){l(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return h(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ne(J().mark((function e(t){var n,r,i,a,o,u,s,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ea(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Sa(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ta.receivers=[];var Ca=function(){function e(t){l(this,e),this.target=t,this.handlers=new Set}return h(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ne(J().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Sa("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Na(){return window}function Aa(){return"undefined"!==typeof Na().WorkerGlobalScope&&"function"===typeof Na().importScripts}function Ra(){return Da.apply(this,arguments)}function Da(){return(Da=ne(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Pa(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Oa="firebaseLocalStorageDb",La="firebaseLocalStorage",Ma="fbase_key",Fa=function(){function e(t){l(this,e),this.request=t}return h(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ua(e,t){return e.transaction([La],t?"readwrite":"readonly").objectStore(La)}function Va(){var e=indexedDB.deleteDatabase(Oa);return new Fa(e).toPromise()}function ja(){var e=indexedDB.open(Oa,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(La,{keyPath:Ma})}catch(r){n(r)}})),e.addEventListener("success",ne(J().mark((function n(){var r;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(La)){n.next=12;break}return r.close(),n.next=5,Va();case 5:return n.t0=t,n.next=8,ja();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ba(e,t,n){return za.apply(this,arguments)}function za(){return za=ne(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ua(t,!0).put((c(i={},Ma,n),c(i,"value",r),i)),e.abrupt("return",new Fa(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),za.apply(this,arguments)}function qa(e,t){return Ka.apply(this,arguments)}function Ka(){return Ka=ne(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ua(t,!1).get(n),e.next=3,new Fa(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Ka.apply(this,arguments)}function Wa(e,t){var n=Ua(e,!0).delete(t);return new Fa(n).toPromise()}var Ga=function(){function e(){l(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return h(e,[{key:"_openDb",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,ja();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ne(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aa()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ne(J().mark((function e(){var t=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ta._getInstance(Aa()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ne(J().mark((function e(n,r){var i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ne(J().mark((function e(){var t,n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ca(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Pa()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ne(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,ja();case 5:return t=e.sent,e.next=8,Ba(t,ka,"1");case 8:return e.next=10,Wa(t,ka);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ne(J().mark((function e(t,n){var r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ba(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return qa(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ne(J().mark((function e(t){var n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Wa(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ne(J().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ua(e,!1).getAll();return new Fa(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=d(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ne(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ga.type="LOCAL";var Ha=Ga;function Qa(e,t){return yn(e,"POST","/v2/accounts/mfaSignIn:start",vn(e,t))}function Ya(e){return Xa.apply(this,arguments)}function Xa(){return(Xa=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $a(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=$t("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ja(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Za=1e12,eo=function(){function e(t){l(this,e),this.auth=t,this.counter=Za,this._widgets=new Map}return h(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new to(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Za;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Za;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ne(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Za,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),to=function(){function e(t,n,r){var i=this;l(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;tn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return h(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var no=Ja("rcb"),ro=new ln(3e4,6e4),io="https://www.google.com/recaptcha/api.js?",ao=function(){function e(){l(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Na().grecaptcha}return h(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return tn(oo(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Na().grecaptcha):new Promise((function(r,i){var a=Na().setTimeout((function(){i($t(e,"network-request-failed"))}),ro.get());Na()[no]=function(){Na().clearTimeout(a),delete Na()[no];var o=Na().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i($t(e,"internal-error"))},$a("".concat(io,"?").concat(W({onload:no,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i($t(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Na().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function oo(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var uo=function(){function e(){l(this,e)}return h(e,[{key:"load",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new eo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),so="recaptcha",co={theme:"light",type:"image"},lo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},co),r=arguments.length>2?arguments[2]:void 0;l(this,e),this.parameters=n,this.type=so,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vr(r),this.isInvisible="invisible"===this.parameters.size,tn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;tn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new uo:new ao,this.validateStartingState()}return h(e,[{key:"verify",value:function(){var e=ne(J().mark((function e(){var t,n,r,i=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){tn(!this.parameters.sitekey,this.auth,"argument-error"),tn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Na()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){tn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ne(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ne(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tn(sn()&&!Aa(),this.auth,"internal-error"),e.next=3,fo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ya(this.auth);case 8:tn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return tn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function fo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ho=function(){function e(t,n){l(this,e),this.verificationId=t,this.onConfirmation=n}return h(e,[{key:"confirm",value:function(e){var t=Zr._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function po(){return(po=ne(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vr(t),e.next=3,go(i,n,$(r));case 3:return a=e.sent,e.abrupt("return",new ho(a,(function(e){return Ni(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vo(e,t,n){return yo.apply(this,arguments)}function yo(){return(yo=ne(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$(t),e.next=3,xi(!1,i,"phone");case 3:return e.next=5,go(i.auth,n,$(r));case 5:return a=e.sent,e.abrupt("return",new ho(a,(function(e){return Ri(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mo(){return(mo=ne(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$(t),e.next=3,go(i.auth,n,$(r));case 3:return a=e.sent,e.abrupt("return",new ho(a,(function(e){return Pi(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function go(e,t,n){return ko.apply(this,arguments)}function ko(){return ko=ne(J().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,tn("string"===typeof a,t,"argument-error"),tn(r.type===so,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return tn("enroll"===u.type,t,"internal-error"),e.next=13,ya(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return tn("signin"===u.type,t,"internal-error"),tn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Qa(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Hr(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ko.apply(this,arguments)}function bo(){return(bo=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wi($(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wo=function(){function e(t){l(this,e),this.providerId=e.PROVIDER_ID,this.auth=vr(t)}return h(e,[{key:"verifyPhoneNumber",value:function(e,t){return go(this.auth,e,$(t))}}],[{key:"credential",value:function(e,t){return Zr._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Zr._fromTokenResponse(n,r):null}}]),e}();function _o(e,t){return t?on(t):(tn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}wo.PROVIDER_ID="phone",wo.PHONE_SIGN_IN_METHOD="phone";var xo=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,"custom","custom")).params=e,r}return h(n,[{key:"_getIdTokenResponse",value:function(e){return Kr(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Kr(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Kr(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(br);function Io(e){return Si(e.auth,new xo(e),e.bypassAuthState)}function Eo(e){var t=e.auth,n=e.user;return tn(n,t,"internal-error"),Ei(n,new xo(e),e.bypassAuthState)}function To(e){return So.apply(this,arguments)}function So(){return(So=ne(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,tn(r=t.user,n,"internal-error"),e.abrupt("return",wi(r,new xo(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Co=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];l(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return h(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ne(J().mark((function t(n,r){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ne(J().mark((function e(t){var n,r,i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Io;case"linkViaPopup":case"linkViaRedirect":return To;case"reauthViaPopup":case"reauthViaRedirect":return Eo;default:Xt(this.auth,"internal-error")}}},{key:"resolve",value:function(e){rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),No=new ln(2e3,1e4);function Ao(e,t,n){return Ro.apply(this,arguments)}function Ro(){return(Ro=ne(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vr(t),Zt(t,n,ni),a=_o(i,r),o=new Lo(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Do(){return(Do=ne(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt((i=$(t)).auth,n,ni),a=_o(i.auth,r),o=new Lo(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Po(e,t,n){return Oo.apply(this,arguments)}function Oo(){return(Oo=ne(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt((i=$(t)).auth,n,ni),a=_o(i.auth,r),o=new Lo(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lo=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o){var u;return l(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=p(u),u}return h(n,[{key:"executeNotNull",value:function(){var e=ne(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return tn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ne(J().mark((function e(){var t,n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rn(1===this.filter.length,"Popup operations only handle one event"),t=Sa(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject($t(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject($t(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject($t(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,No.get())}()}}]),n}(Co);Lo.currentPopupAction=null;var Mo=new Map,Fo=function(e){y(n,e);var t=w(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return h(n,[{key:"execute",value:function(){var e=ne(J().mark((function e(){var t,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Mo.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Uo(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,At(m(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Mo.set(this.auth._key(),t);case 21:return this.bypassAuthState||Mo.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ne(J().mark((function e(t){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",At(m(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",At(m(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Co);function Uo(e,t){return Vo.apply(this,arguments)}function Vo(){return(Vo=ne(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ko(n),i=qo(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jo(e,t){return Bo.apply(this,arguments)}function Bo(){return(Bo=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qo(t)._set(Ko(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zo(e,t){Mo.set(e._key(),t)}function qo(e){return on(e._redirectPersistence)}function Ko(e){return Jn("pendingRedirect",e.config.apiKey,e.name)}function Wo(e,t,n){return function(e,t,n){return Go.apply(this,arguments)}(e,t,n)}function Go(){return(Go=ne(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vr(t),Zt(t,n,ni),a=_o(i,r),e.next=5,jo(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ho(e,t,n){return function(e,t,n){return Qo.apply(this,arguments)}(e,t,n)}function Qo(){return(Qo=ne(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt((i=$(t)).auth,n,ni),a=_o(i.auth,r),e.next=5,jo(a,i.auth);case 5:return e.next=7,tu(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yo(e,t,n){return function(e,t,n){return Xo.apply(this,arguments)}(e,t,n)}function Xo(){return(Xo=ne(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt((i=$(t)).auth,n,ni),a=_o(i.auth,r),e.next=5,xi(!1,i,n.providerId);case 5:return e.next=7,jo(a,i.auth);case 7:return e.next=9,tu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $o(e,t){return Jo.apply(this,arguments)}function Jo(){return(Jo=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vr(t)._initializationPromise;case 2:return e.abrupt("return",Zo(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zo(e,t){return eu.apply(this,arguments)}function eu(){return eu=ne(J().mark((function e(t,n){var r,i,a,o,u,s=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=vr(t),a=_o(i,n),o=new Fo(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),eu.apply(this,arguments)}function tu(e){return nu.apply(this,arguments)}function nu(){return(nu=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Sa("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ru=function(){function e(t){l(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return h(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return au(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!au(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError($t(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(iu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(iu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function iu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function au(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ou(e){return uu.apply(this,arguments)}function uu(){return uu=ne(J().mark((function e(t){var n,r=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",yn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),uu.apply(this,arguments)}var su=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cu=/^https?/;function lu(){return(lu=ne(J().mark((function e(t){var n,r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ou(t);case 4:n=e.sent,r=n.authorizedDomains,i=d(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!fu(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Xt(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function fu(e){var t=un(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!cu.test(r))return!1;if(su.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var hu=new ln(3e4,6e4);function du(){var e=Na().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ee(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var pu=null;function vu(e){return pu=pu||function(e){return new Promise((function(t,n){var r,i,a;function o(){du(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){du(),n($t(e,"network-request-failed"))},timeout:hu.get()})}if(null===(i=null===(r=Na().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Na().gapi)||void 0===a?void 0:a.load)){var u=Ja("iframefcb");return Na()[u]=function(){gapi.load?o():n($t(e,"network-request-failed"))},$a("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw pu=null,e}))}(e),pu}var yu=new ln(5e3,15e3),mu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ku(e){var t=e.config;tn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?fn(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Je},i=gu.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(W(r).slice(1))}function bu(e){return wu.apply(this,arguments)}function wu(){return wu=ne(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vu(t);case 2:return n=e.sent,tn(r=Na().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ku(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mu,dontclear:!0},(function(e){return new Promise(function(){var n=ne(J().mark((function n(r,i){var a,o,u;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Na().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=$t(t,"network-request-failed"),o=Na().setTimeout((function(){i(a)}),yu.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),wu.apply(this,arguments)}var _u={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xu="_blank",Iu="http://localhost",Eu=function(){function e(t){l(this,e),this.window=t,this.associatedEvent=null}return h(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Tu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},_u),{width:r.toString(),height:i.toString(),top:a,left:o}),l=R().toLowerCase();n&&(u=rr(l)?xu:n),tr(l)&&(t=t||Iu,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(cr(l)&&"_self"!==u)return Su(t||"",u),new Eu(null);var h=window.open(t||"",u,f);tn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Eu(h)}function Su(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Cu="__/auth/handler",Nu="emulator/auth/handler";function Au(e,t,n,r,i,a){tn(e.config.authDomain,e,"auth-domain-config-required"),tn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Je,eventId:i};if(t instanceof ni){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof ri){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Cu);return fn(t,Nu)}(e),"?").concat(W(p).slice(1))}var Ru="webStorageSupport",Du=function(){function e(){l(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ia,this._completeRedirectFn=Zo,this._overrideRedirectResult=zo}return h(e,[{key:"_openPopup",value:function(){var e=ne(J().mark((function e(t,n,r,i){var a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Au(t,n,r,un(),i),e.abrupt("return",Tu(t,o,Sa()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ne(J().mark((function e(t,n,r,i){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Au(t,n,r,un(),i),Na().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(rn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ne(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bu(t);case 2:return n=e.sent,r=new ru(t),n.register("authEvent",(function(e){return tn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Ru,{type:Ru},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Xt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return lu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return fr()||nr()||sr()}}]),e}(),Pu=Du,Ou=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone")).credential=e,r}return h(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return yn(e,"POST","/v2/accounts/mfaEnrollment:finalize",vn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return yn(e,"POST","/v2/accounts/mfaSignIn:finalize",vn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){l(this,e),this.factorId=t}return h(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return nn("unexpected MultiFactorSessionType")}}}]),e}()),Lu=function(){function e(){l(this,e)}return h(e,null,[{key:"assertion",value:function(e){return Ou._fromCredential(e)}}]),e}();Lu.FACTOR_ID="phone";var Mu,Fu="@firebase/auth",Uu="0.20.2",Vu=function(){function e(t){l(this,e),this.auth=t,this.internalListeners=new Map}return h(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){tn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function ju(){return window}Mu="Browser",We(new re("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){tn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),tn(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Mu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hr(Mu)},i=new pr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(on);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),We(new re("auth-internal",(function(e){return function(e){return new Vu(e)}(vr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),it(Fu,Uu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Mu)),it(Fu,Uu,"esm2017");function Bu(e,t,n){return zu.apply(this,arguments)}function zu(){return zu=ne(J().mark((function e(t,n,r){var i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ju(),o=a.BuildInfo,rn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Qu(n.sessionId);case 4:return u=e.sent,s={},sr()?s.ibi=o.packageName:ar()?s.apn=o.packageName:Xt(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Au(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),zu.apply(this,arguments)}function qu(){return(qu=ne(J().mark((function e(t){var n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ju(),r=n.BuildInfo,i={},sr()?i.iosBundleId=r.packageName:ar()?i.androidPackageName=r.packageName:Xt(t,"operation-not-supported-in-this-environment"),e.next=5,ou(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ku(e){var t=ju().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Wu(e,t,n){return Gu.apply(this,arguments)}function Gu(){return Gu=ne(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ju(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i($t(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ar()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Gu.apply(this,arguments)}function Hu(e){var t,n,r,i,a,o,u,s,c,l,f=ju();tn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),tn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),tn("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tn("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Qu(e){return Yu.apply(this,arguments)}function Yu(){return(Yu=ne(J().mark((function e(t){var n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Xu(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xu(e){if(rn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var $u=function(e){y(n,e);var t=w(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return h(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),At(m(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ru);function Ju(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:rs(),postBody:null,tenantId:e.tenantId,error:$t(e,"no-auth-event")}}function Zu(e,t){return is()._set(as(e),t)}function es(e){return ts.apply(this,arguments)}function ts(){return(ts=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,is()._get(as(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,is()._remove(as(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ns(e,t){var n,r,i=function(e){var t=os(e),n=t.link?decodeURIComponent(t.link):void 0,r=os(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return os(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=os(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?$t(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function rs(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function is(){return on(_a)}function as(e){return Jn("authEvent",e.config.apiKey,e.name)}function os(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||Z(t)||o(t)||u();r[0];return G(r.slice(1).join("?"))}var us=function(){function e(){l(this,e),this._redirectPersistence=Ia,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Zo,this._overrideRedirectResult=zo}return h(e,[{key:"_initialize",value:function(){var e=ne(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new $u(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Xt(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ne(J().mark((function e(t,n,r,i){var a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hu(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Mo.clear(),e.next=10,this._originValidation(t);case 10:return o=Ju(t,r,i),e.next=13,Zu(t,o);case 13:return e.next=15,Bu(t,o,n);case 15:return u=e.sent,e.next=18,Ku(u);case 18:return s=e.sent,e.abrupt("return",Wu(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return qu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=ju(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ne(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,es(e);case 2:t.onEvent(cs());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=ne(J().mark((function n(r){var i,a;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,es(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=ns(i,r.url)),t.onEvent(a||cs());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");ju().handleOpenURL=function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),ss=us;function cs(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:$t("no-auth-event")}}function ls(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function fs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return!("file:"!==ls()&&"ionic:"!==ls()&&"capacitor:"!==ls()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function hs(){return M()&&11===(null===document||void 0===document?void 0:document.documentMode)}function ds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/Edge\/\d+/.test(e)}function ps(){try{var e=self.localStorage,t=Sa();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return hs()||ds(e)}()||F()}catch(n){return vs()&&F()}return!1}function vs(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ys(){return("http:"===ls()||"https:"===ls()||O()||fs())&&!(L()||P())&&ps()&&!vs()}function ms(){return fs()&&"undefined"!==typeof document}function gs(){return ks.apply(this,arguments)}function ks(){return(ks=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ms()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bs={LOCAL:"local",NONE:"none",SESSION:"session"},ws=tn,_s="persistence";function xs(e,t){ws(Object.values(bs).includes(t),e,"invalid-persistence-type"),L()?ws(t!==bs.SESSION,e,"unsupported-persistence-type"):P()?ws(t===bs.NONE,e,"unsupported-persistence-type"):vs()?ws(t===bs.NONE||t===bs.LOCAL&&F(),e,"unsupported-persistence-type"):ws(t===bs.NONE||ps(),e,"unsupported-persistence-type")}function Is(e){return Es.apply(this,arguments)}function Es(){return(Es=ne(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Ts(),r=Jn(_s,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ts(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Ss=tn,Cs=function(){function e(){l(this,e),this.browserResolver=on(Pu),this.cordovaResolver=on(ss),this.underlyingResolver=null,this._redirectPersistence=Ia,this._completeRedirectFn=Zo,this._overrideRedirectResult=zo}return h(e,[{key:"_initialize",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ne(J().mark((function e(t,n,r,i){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ne(J().mark((function e(t,n,r,i){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return ms()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Ss(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ne(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,gs();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ns(e){return e.unwrap()}function As(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Ls(e,function(e,t){var n,r=$(e),i=t;return tn(t.customData.operationType,r,"argument-error"),tn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),va._fromError(r,i)}(e,t));else if(r){var i=Rs(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Rs(e){var t=(e instanceof U?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof U)&&"temporaryProof"in t&&"phoneNumber"in t)return wo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Mt)return null;switch(r){case Lt:n=oi;break;case Pt:n=ai;break;case Ot:n=ui;break;case Ft:n=li;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?si._create(r,u):Gr._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new ii(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof U?n.credentialFromError(e):n.credentialFromResult(e)}function Ds(e,t){return t.catch((function(t){throw t instanceof U&&As(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Rs(t)),additionalUserInfo:da(e),user:Ms.getOrCreate(r)}}))}function Ps(e,t){return Os.apply(this,arguments)}function Os(){return(Os=ne(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Ds(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ls=function(){function e(t,n){l(this,e),this.resolver=n,this.auth=t.wrapped()}return h(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Ds(Ns(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Ms=function(){function e(t){l(this,e),this._delegate=t,this.multiFactor=function(e){var t=$(e);return ga.has(t)||ga.set(t,ma._fromUser(t)),ga.get(t)}(t)}return h(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ds(this.auth,Ri(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ps(this.auth,vo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ds(this.auth,Po(this._delegate,t,Cs)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Is(vr(this.auth));case 2:return e.abrupt("return",Yo(this._delegate,t,Cs));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ds(this.auth,Pi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Ps(this.auth,function(e,t,n){return mo.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Ds(this.auth,function(e,t,n){return Do.apply(this,arguments)}(this._delegate,e,Cs))}},{key:"reauthenticateWithRedirect",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Is(vr(this.auth));case 2:return e.abrupt("return",Ho(this._delegate,t,Cs));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ea.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ki(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return aa($(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return aa($(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return bo.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ia.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ta.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Ms.USER_MAP=new WeakMap;var Fs=tn,Us=function(){function e(t,n){if(l(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Fs(r,"invalid-api-key",{appName:t.name}),Fs(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Cs:void 0;this._delegate=n.initialize({options:{persistence:js(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Wt),this.linkUnderlyingAuth()}return h(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Ms.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){mr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return qi.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ki(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return zi.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ds(this._delegate,Hi(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Zi.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ei.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ne(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fs(ys(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,$o(this._delegate,Cs);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Ds(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){vr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Vs(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Vs(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Yi.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Bi.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ne(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xs(this._delegate,t),e.t0=t,e.next=e.t0===bs.SESSION?4:e.t0===bs.LOCAL?6:e.t0===bs.NONE?11:13;break;case 4:return n=Ia,e.abrupt("break",14);case 6:return e.next=8,on(Ha)._isAvailable();case 8:return r=e.sent,n=r?Ha:_a,e.abrupt("break",14);case 11:return n=$n,e.abrupt("break",14);case 13:return e.abrupt("return",Xt("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Ds(this._delegate,function(e){return vi.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Ds(this._delegate,Ni(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Ds(this._delegate,function(e,t){return Fi.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Ds(this._delegate,function(e,t,n){return Ni($(e),ti.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Ds(this._delegate,function(e,t,n){return Xi.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Ps(this._delegate,function(e,t,n){return po.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fs(ys(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Ds(this._delegate,Ao(this._delegate,t,Cs)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fs(ys(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Is(this._delegate);case 3:return e.abrupt("return",Wo(this._delegate,t,Cs));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Gi.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Vs(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Ms.getOrCreate(e))},error:t,complete:n}}function js(e,t){var n=function(e,t){var n=Ts();if(!n)return[];var r=Jn(_s,e,t);switch(n.getItem(r)){case bs.NONE:return[$n];case bs.LOCAL:return[Ha,Ia];case bs.SESSION:return[Ia];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ha)||n.push(Ha),"undefined"!==typeof window)for(var r=0,i=[_a,Ia];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes($n)||n.push($n),n}Us.Persistence=bs;var Bs=function(){function e(){l(this,e),this.providerId="phone",this._delegate=new wo(Ns(Ct.auth()))}return h(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return wo.credential(e,t)}}]),e}();Bs.PHONE_SIGN_IN_METHOD=wo.PHONE_SIGN_IN_METHOD,Bs.PROVIDER_ID=wo.PROVIDER_ID;var zs,qs=tn,Ks=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ct.app();l(this,e),qs(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new lo(t,n,i.auth()),this.type=this._delegate.type}return h(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(zs=Ct).INTERNAL.registerComponent(new re("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Us(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ut,PASSWORD_RESET:Vt,RECOVER_EMAIL:jt,REVERT_SECOND_FACTOR_ADDITION:Bt,VERIFY_AND_CHANGE_EMAIL:zt,VERIFY_EMAIL:qt}},EmailAuthProvider:ti,FacebookAuthProvider:ai,GithubAuthProvider:ui,GoogleAuthProvider:oi,OAuthProvider:ii,SAMLAuthProvider:ci,PhoneAuthProvider:Bs,PhoneMultiFactorGenerator:Lu,RecaptchaVerifier:Ks,TwitterAuthProvider:li,Auth:Us,AuthCredential:br,Error:U}).setInstantiationMode("LAZY").setMultipleInstances(!1)),zs.registerVersion("@firebase/auth-compat","0.2.15");var Ws,Gs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Hs={},Qs=Qs||{},Ys=Gs||self;function Xs(){}function $s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Js(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Zs="closure_uid_"+(1e9*Math.random()>>>0),ec=0;function tc(e,t,n){return e.call.apply(e.bind,arguments)}function nc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function rc(e,t,n){return(rc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tc:nc).apply(null,arguments)}function ic(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ac(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function oc(){this.s=this.s,this.o=this.o}var uc={};oc.prototype.s=!1,oc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Zs)&&e[Zs]||(e[Zs]=++ec)}(this);delete uc[e]}},oc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var sc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},cc=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function lc(e){return Array.prototype.concat.apply([],arguments)}function fc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function hc(e){return/^[\s\xa0]*$/.test(e)}var dc,pc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function vc(e,t){return-1!=e.indexOf(t)}function yc(e,t){return e<t?-1:e>t?1:0}e:{var mc=Ys.navigator;if(mc){var gc=mc.userAgent;if(gc){dc=gc;break e}}dc=""}function kc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function bc(e){var t={};for(var n in e)t[n]=e[n];return t}var wc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _c(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<wc.length;a++)n=wc[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function xc(e){return xc[" "](e),e}xc[" "]=Xs;var Ic,Ec=vc(dc,"Opera"),Tc=vc(dc,"Trident")||vc(dc,"MSIE"),Sc=vc(dc,"Edge"),Cc=Sc||Tc,Nc=vc(dc,"Gecko")&&!(vc(dc.toLowerCase(),"webkit")&&!vc(dc,"Edge"))&&!(vc(dc,"Trident")||vc(dc,"MSIE"))&&!vc(dc,"Edge"),Ac=vc(dc.toLowerCase(),"webkit")&&!vc(dc,"Edge");function Rc(){var e=Ys.document;return e?e.documentMode:void 0}e:{var Dc="",Pc=function(){var e=dc;return Nc?/rv:([^\);]+)(\)|;)/.exec(e):Sc?/Edge\/([\d\.]+)/.exec(e):Tc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ac?/WebKit\/(\S+)/.exec(e):Ec?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Pc&&(Dc=Pc?Pc[1]:""),Tc){var Oc=Rc();if(null!=Oc&&Oc>parseFloat(Dc)){Ic=String(Oc);break e}}Ic=Dc}var Lc,Mc={};function Fc(){return function(e){var t=Mc;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=pc(String(Ic)).split("."),n=pc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=yc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||yc(0==a[2].length,0==o[2].length)||yc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Ys.document&&Tc){var Uc=Rc();Lc=Uc||(parseInt(Ic,10)||void 0)}else Lc=void 0;var Vc=Lc,jc=function(){if(!Ys.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ys.addEventListener("test",Xs,t),Ys.removeEventListener("test",Xs,t)}catch(n){}return e}();function Bc(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function zc(e,t){if(Bc.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Nc){e:{try{xc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:qc[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&zc.Z.h.call(this)}}Bc.prototype.h=function(){this.defaultPrevented=!0},ac(zc,Bc);var qc={2:"touch",3:"pen",4:"mouse"};zc.prototype.h=function(){zc.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Kc="closure_listenable_"+(1e6*Math.random()|0),Wc=0;function Gc(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Wc,this.ca=this.fa=!1}function Hc(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Qc(e){this.src=e,this.g={},this.h=0}function Yc(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=sc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Hc(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Xc(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Qc.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Xc(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Gc(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var $c="closure_lm_"+(1e6*Math.random()|0),Jc={};function Zc(e,t,n,r,i){if(r&&r.once)return tl(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Zc(e,t[a],n,r,i);return null}return n=sl(n),e&&e[Kc]?e.N(t,n,Js(r)?!!r.capture:!!r,i):el(e,t,n,!1,r,i)}function el(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Js(i)?!!i.capture:!!i,u=ol(e);if(u||(e[$c]=u=new Qc(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=al;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)jc||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(il(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function tl(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)tl(e,t[a],n,r,i);return null}return n=sl(n),e&&e[Kc]?e.O(t,n,Js(r)?!!r.capture:!!r,i):el(e,t,n,!0,r,i)}function nl(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)nl(e,t[a],n,r,i);else r=Js(r)?!!r.capture:!!r,n=sl(n),e&&e[Kc]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Xc(a=e.g[t],n,r,i))&&(Hc(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ol(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Xc(t,n,r,i)),(n=-1<e?t[e]:null)&&rl(n))}function rl(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Kc])Yc(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(il(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ol(t))?(Yc(n,e),0==n.h&&(n.src=null,t[$c]=null)):Hc(e)}}}function il(e){return e in Jc?Jc[e]:Jc[e]="on"+e}function al(e,t){if(e.ca)e=!0;else{t=new zc(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&rl(e),e=n.call(r,t)}return e}function ol(e){return(e=e[$c])instanceof Qc?e:null}var ul="__closure_events_fn_"+(1e9*Math.random()>>>0);function sl(e){return"function"===typeof e?e:(e[ul]||(e[ul]=function(t){return e.handleEvent(t)}),e[ul])}function cl(){oc.call(this),this.i=new Qc(this),this.P=this,this.I=null}function ll(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Bc(t,e);else if(t instanceof Bc)t.target=t.target||e;else{var i=t;_c(t=new Bc(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=fl(o,r,!0,t)&&i}if(i=fl(o=t.g=e,r,!0,t)&&i,i=fl(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=fl(o=t.g=n[a],r,!1,t)&&i}function fl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Yc(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ac(cl,oc),cl.prototype[Kc]=!0,cl.prototype.removeEventListener=function(e,t,n,r){nl(this,e,t,n,r)},cl.prototype.M=function(){if(cl.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Hc(n[r]);delete t.g[e],t.h--}}this.I=null},cl.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},cl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var hl=Ys.JSON.stringify;function dl(){var e=wl,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var pl,vl=function(){function e(){l(this,e),this.h=this.g=null}return h(e,[{key:"add",value:function(e,t){var n=yl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),yl=new(function(){function e(t,n){l(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return h(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new ml}),(function(e){return e.reset()})),ml=function(){function e(){l(this,e),this.next=this.g=this.h=null}return h(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function gl(e){Ys.setTimeout((function(){throw e}),0)}function kl(e,t){pl||function(){var e=Ys.Promise.resolve(void 0);pl=function(){e.then(_l)}}(),bl||(pl(),bl=!0),wl.add(e,t)}var bl=!1,wl=new vl;function _l(){for(var e;e=dl();){try{e.h.call(e.g)}catch(n){gl(n)}var t=yl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}bl=!1}function xl(e,t){cl.call(this),this.h=e||1,this.g=t||Ys,this.j=rc(this.kb,this),this.l=Date.now()}function Il(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function El(e,t,n){if("function"===typeof e)n&&(e=rc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=rc(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ys.setTimeout(e,t||0)}function Tl(e){e.g=El((function(){e.g=null,e.i&&(e.i=!1,Tl(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ac(xl,cl),(Ws=xl.prototype).da=!1,Ws.S=null,Ws.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ll(this,"tick"),this.da&&(Il(this),this.start()))}},Ws.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ws.M=function(){xl.Z.M.call(this),Il(this),delete this.g};var Sl=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return h(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Tl(this)}},{key:"M",value:function(){At(m(n.prototype),"M",this).call(this),this.g&&(Ys.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(oc);function Cl(e){oc.call(this),this.h=e,this.g={}}ac(Cl,oc);var Nl=[];function Al(e,t,n,r){Array.isArray(n)||(n&&(Nl[0]=n.toString()),n=Nl);for(var i=0;i<n.length;i++){var a=Zc(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Rl(e){kc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&rl(e)}),e),e.g={}}function Dl(){this.g=!0}function Pl(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return hl(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Cl.prototype.M=function(){Cl.Z.M.call(this),Rl(this)},Cl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Dl.prototype.Aa=function(){this.g=!1},Dl.prototype.info=function(){};var Ol={},Ll=null;function Ml(){return Ll=Ll||new cl}function Fl(e){Bc.call(this,Ol.Ma,e)}function Ul(e){var t=Ml();ll(t,new Fl(t,e))}function Vl(e,t){Bc.call(this,Ol.STAT_EVENT,e),this.stat=t}function jl(e){var t=Ml();ll(t,new Vl(t,e))}function Bl(e,t){Bc.call(this,Ol.Na,e),this.size=t}function zl(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ys.setTimeout((function(){e()}),t)}Ol.Ma="serverreachability",ac(Fl,Bc),Ol.STAT_EVENT="statevent",ac(Vl,Bc),Ol.Na="timingevent",ac(Bl,Bc);var ql={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Kl={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Wl(){}function Gl(e){return e.h||(e.h=e.i())}function Hl(){}Wl.prototype.h=null;var Ql,Yl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Xl(){Bc.call(this,"d")}function $l(){Bc.call(this,"c")}function Jl(){}function Zl(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Cl(this),this.P=tf,e=Cc?125:void 0,this.W=new xl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ef}function ef(){this.i=null,this.g="",this.h=!1}ac(Xl,Bc),ac($l,Bc),ac(Jl,Wl),Jl.prototype.g=function(){return new XMLHttpRequest},Jl.prototype.i=function(){return{}},Ql=new Jl;var tf=45e3,nf={},rf={};function af(e,t,n){e.K=1,e.v=Cf(_f(t)),e.s=n,e.U=!0,of(e,null)}function of(e,t){e.F=Date.now(),lf(e),e.A=_f(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Bf(n.h,"t",r),e.C=0,n=e.l.H,e.h=new ef,e.g=qh(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Sl(rc(e.Ia,e,e.g),e.O)),Al(e.V,e.g,"readystatechange",e.gb),t=e.H?bc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ul(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function uf(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function sf(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=cf(e,n))==rf){4==t&&(e.o=4,jl(14),i=!1),Pl(e.j,e.m,null,"[Incomplete Response]");break}if(r==nf){e.o=4,jl(15),Pl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Pl(e.j,e.m,r,null),vf(e,r)}uf(e)&&r!=rf&&r!=nf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,jl(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Lh(t),t.L=!0,jl(11))):(Pl(e.j,e.m,n,"[Invalid Chunked Response]"),pf(e),df(e))}function cf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?rf:(n=Number(t.substring(n,r)),isNaN(n)?nf:(r+=1)+n>t.length?rf:(t=t.substr(r,n),e.C=r+n,t))}function lf(e){e.Y=Date.now()+e.P,ff(e,e.P)}function ff(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=zl(rc(e.eb,e),t)}function hf(e){e.B&&(Ys.clearTimeout(e.B),e.B=null)}function df(e){0==e.l.G||e.I||Uh(e.l,e)}function pf(e){hf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Il(e.W),Rl(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function vf(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Yf(n.i,e)))if(n.I=e.N,!e.J&&Yf(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Fh(n),Th(n)}Oh(n),jl(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=zl(rc(n.ab,n),6e3));if(1>=Qf(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else jh(n,11)}else if((e.J||n.g==e)&&Fh(n),!hc(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(vc(l,"spdy")||vc(l,"quic")||vc(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Xf(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Sf(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=zh(r,r.H?r.la:null,r.W),d.J){$f(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(hf(p),lf(p)),r.g=d}else Ph(r);0<n.l.length&&Nh(n)}else"stop"!=a[0]&&"close"!=a[0]||jh(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?jh(n,7):Eh(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Ul(4)}catch(a){}}function yf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if($s(e)||"string"===typeof e)cc(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if($s(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if($s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function mf(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof mf)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function gf(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];kf(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)kf(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function kf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Ws=Zl.prototype).setTimeout=function(e){this.P=e},Ws.gb=function(e){e=e.target;var t=this.L;t&&3==bh(e)?t.l():this.Ia(e)},Ws.Ia=function(e){try{if(e==this.g)e:{var t=bh(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Cc||this.g&&(this.h.h||this.g.ga()||wh(this.g)))){this.I||4!=t||7==n||Ul(8==n||0>=r?3:2),hf(this);var i=this.g.ba();this.N=i;t:if(uf(this)){var a=wh(this.g);e="";var o=a.length,u=4==bh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){pf(this),df(this);var s="";break t}this.h.i=new Ys.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hc(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,jl(12),pf(this),df(this);break e}Pl(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vf(this,i)}this.U?(sf(this,t,s),Cc&&this.i&&3==t&&(Al(this.V,this.W,"tick",this.fb),this.W.start())):(Pl(this.j,this.m,s,null),vf(this,s)),4==t&&pf(this),this.i&&!this.I&&(4==t?Uh(this.l,this):(this.i=!1,lf(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,jl(12)):(this.o=0,jl(13)),pf(this),df(this)}}}catch(t){}},Ws.fb=function(){if(this.g){var e=bh(this.g),t=this.g.ga();this.C<t.length&&(hf(this),sf(this,e,t),this.i&&4!=e&&lf(this))}},Ws.cancel=function(){this.I=!0,pf(this)},Ws.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Ul(3),jl(17)),pf(this),this.o=2,df(this)):ff(this,this.Y-e)},(Ws=mf.prototype).R=function(){gf(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Ws.T=function(){return gf(this),this.g.concat()},Ws.get=function(e,t){return kf(this.h,e)?this.h[e]:t},Ws.set=function(e,t){kf(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Ws.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var bf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wf(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof wf){this.g=void 0!==t?t:e.g,xf(this,e.j),this.s=e.s,If(this,e.i),Ef(this,e.m),this.l=e.l,t=e.h;var n=new Ff;n.i=t.i,t.g&&(n.g=new mf(t.g),n.h=t.h),Tf(this,n),this.o=e.o}else e&&(n=String(e).match(bf))?(this.g=!!t,xf(this,n[1]||"",!0),this.s=Nf(n[2]||""),If(this,n[3]||"",!0),Ef(this,n[4]),this.l=Nf(n[5]||"",!0),Tf(this,n[6]||"",!0),this.o=Nf(n[7]||"")):(this.g=!!t,this.h=new Ff(null,this.g))}function _f(e){return new wf(e)}function xf(e,t,n){e.j=n?Nf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function If(e,t,n){e.i=n?Nf(t,!0):t}function Ef(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Tf(e,t,n){t instanceof Ff?(e.h=t,function(e,t){t&&!e.j&&(Uf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Vf(this,t),Bf(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Af(t,Lf)),e.h=new Ff(t,e.g))}function Sf(e,t,n){e.h.set(t,n)}function Cf(e){return Sf(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Nf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Af(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Rf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Rf(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}wf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Af(t,Df,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Af(t,Df,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Af(n,"/"==n.charAt(0)?Of:Pf,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Af(n,Mf)),e.join("")};var Df=/[#\/\?@]/g,Pf=/[#\?:]/g,Of=/[#\?]/g,Lf=/[#\?@]/g,Mf=/#/g;function Ff(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Uf(e){e.g||(e.g=new mf,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Vf(e,t){Uf(e),t=zf(e,t),kf(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,kf((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&gf(e)))}function jf(e,t){return Uf(e),t=zf(e,t),kf(e.g.h,t)}function Bf(e,t,n){Vf(e,t),0<n.length&&(e.i=null,e.g.set(zf(e,t),fc(n)),e.h+=n.length)}function zf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ws=Ff.prototype).add=function(e,t){Uf(this),this.i=null,e=zf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ws.forEach=function(e,t){Uf(this),this.g.forEach((function(n,r){cc(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Ws.T=function(){Uf(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ws.R=function(e){Uf(this);var t=[];if("string"===typeof e)jf(this,e)&&(t=lc(t,this.g.get(zf(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=lc(t,e[n])}return t},Ws.set=function(e,t){return Uf(this),this.i=null,jf(this,e=zf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ws.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Ws.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var qf=h((function e(t,n){l(this,e),this.h=t,this.g=n}));function Kf(e){this.l=e||Gf,Ys.PerformanceNavigationTiming?e=0<(e=Ys.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ys.g&&Ys.g.Ea&&Ys.g.Ea()&&Ys.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Wf,Gf=10;function Hf(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qf(e){return e.h?1:e.g?e.g.size:0}function Yf(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Xf(e,t){e.g?e.g.add(t):e.h=t}function $f(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Jf(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=d(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return fc(e.i)}function Zf(){}function eh(){this.g=new Zf}function th(e,t,n){var r=n||"";try{yf(e,(function(e,n){var i=e;Js(e)&&(i=hl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function nh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function rh(e){this.l=e.$b||null,this.j=e.ib||!1}function ih(e,t){cl.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ah,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Kf.prototype.cancel=function(){if(this.i=Jf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=d(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Zf.prototype.stringify=function(e){return Ys.JSON.stringify(e,void 0)},Zf.prototype.parse=function(e){return Ys.JSON.parse(e,void 0)},ac(rh,Wl),rh.prototype.g=function(){return new ih(this.l,this.j)},rh.prototype.i=(Wf={},function(){return Wf}),ac(ih,cl);var ah=0;function oh(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function uh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,sh(e)}function sh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ws=ih.prototype).open=function(e,t){if(this.readyState!=ah)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,sh(this)},Ws.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ys).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Ws.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,uh(this)),this.readyState=ah},Ws.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,sh(this)),this.g&&(this.readyState=3,sh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Ys.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;oh(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Ws.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?uh(this):sh(this),3==this.readyState&&oh(this)}},Ws.Ua=function(e){this.g&&(this.response=this.responseText=e,uh(this))},Ws.Ta=function(e){this.g&&(this.response=e,uh(this))},Ws.ha=function(){this.g&&uh(this)},Ws.setRequestHeader=function(e,t){this.v.append(e,t)},Ws.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ws.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ih.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ch=Ys.JSON.parse;function lh(e){cl.call(this),this.headers=new mf,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=fh,this.K=this.L=!1}ac(lh,cl);var fh="",hh=/^https?$/i,dh=["POST","PUT"];function ph(e){return"content-type"==e.toLowerCase()}function vh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,yh(e),gh(e)}function yh(e){e.D||(e.D=!0,ll(e,"complete"),ll(e,"error"))}function mh(e){if(e.h&&"undefined"!=typeof Qs&&(!e.C[1]||4!=bh(e)||2!=e.ba()))if(e.v&&4==bh(e))El(e.Fa,0,e);else if(ll(e,"readystatechange"),4==bh(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(bf)[1]||null;if(!a&&Ys.self&&Ys.self.location){var o=Ys.self.location.protocol;a=o.substr(0,o.length-1)}i=!hh.test(a?a.toLowerCase():"")}t=i}if(t)ll(e,"complete"),ll(e,"success");else{e.m=6;try{var u=2<bh(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",yh(e)}}finally{gh(e)}}}function gh(e,t){if(e.g){kh(e);var n=e.g,r=e.C[0]?Xs:null;e.g=null,e.C=null,t||ll(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function kh(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ys.clearTimeout(e.A),e.A=null)}function bh(e){return e.g?e.g.readyState:0}function wh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case fh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function _h(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return kc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Sf(e,t,n))}function xh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ih(e){this.za=0,this.l=[],this.h=new Dl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=xh("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=xh("baseRetryDelayMs",5e3,e),this.$a=xh("retryDelaySeedMs",1e4,e),this.Ya=xh("forwardChannelMaxRetries",2,e),this.ra=xh("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Kf(e&&e.concurrentRequestLimit),this.Ca=new eh,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Eh(e){if(Sh(e),3==e.G){var t=e.V++,n=_f(e.F);Sf(n,"SID",e.J),Sf(n,"RID",t),Sf(n,"TYPE","terminate"),Rh(e,n),(t=new Zl(e,e.h,t,void 0)).K=2,t.v=Cf(_f(n)),n=!1,Ys.navigator&&Ys.navigator.sendBeacon&&(n=Ys.navigator.sendBeacon(t.v.toString(),"")),!n&&Ys.Image&&((new Image).src=t.v,n=!0),n||(t.g=qh(t.l,null),t.g.ea(t.v)),t.F=Date.now(),lf(t)}Bh(e)}function Th(e){e.g&&(Lh(e),e.g.cancel(),e.g=null)}function Sh(e){Th(e),e.u&&(Ys.clearTimeout(e.u),e.u=null),Fh(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ys.clearTimeout(e.m),e.m=null)}function Ch(e,t){e.l.push(new qf(e.Za++,t)),3==e.G&&Nh(e)}function Nh(e){Hf(e.i)||e.m||(e.m=!0,kl(e.Ha,e),e.C=0)}function Ah(e,t){var n;n=t?t.m:e.V++;var r=_f(e.F);Sf(r,"SID",e.J),Sf(r,"RID",n),Sf(r,"AID",e.U),Rh(e,r),e.o&&e.s&&_h(r,e.o,e.s),n=new Zl(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Dh(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Xf(e.i,n),af(n,r,t)}function Rh(e,t){e.j&&yf({},(function(e,n){Sf(t,n,e)}))}function Dh(e,t,n){n=Math.min(e.l.length,n);var r=e.j?rc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{th(l,o,"req"+c+"_")}catch(md){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Ph(e){e.g||e.u||(e.Y=1,kl(e.Ga,e),e.A=0)}function Oh(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=zl(rc(e.Ga,e),Vh(e,e.A)),e.A++,!0)}function Lh(e){null!=e.B&&(Ys.clearTimeout(e.B),e.B=null)}function Mh(e){e.g=new Zl(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=_f(e.oa);Sf(t,"RID","rpc"),Sf(t,"SID",e.J),Sf(t,"CI",e.N?"0":"1"),Sf(t,"AID",e.U),Rh(e,t),Sf(t,"TYPE","xmlhttp"),e.o&&e.s&&_h(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Cf(_f(t)),n.s=null,n.U=!0,of(n,e)}function Fh(e){null!=e.v&&(Ys.clearTimeout(e.v),e.v=null)}function Uh(e,t){var n=null;if(e.g==t){Fh(e),Lh(e),e.g=null;var r=2}else{if(!Yf(e.i,t))return;n=t.D,$f(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ll(r=Ml(),new Bl(r,n,t,i)),Nh(e)}else Ph(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Qf(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=zl(rc(e.Ha,e,t),Vh(e,e.C)),e.C++,!0))}(e,t)||2==r&&Oh(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:jh(e,5);break;case 4:jh(e,10);break;case 3:jh(e,6);break;default:jh(e,2)}}function Vh(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function jh(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=rc(e.jb,e);n||(n=new wf("//www.google.com/images/cleardot.gif"),Ys.location&&"http"==Ys.location.protocol||xf(n,"https"),Cf(n)),function(e,t){var n=new Dl;if(Ys.Image){var r=new Image;r.onload=ic(nh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ic(nh,n,r,"TestLoadImage: error",!1,t),r.onabort=ic(nh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ic(nh,n,r,"TestLoadImage: timeout",!1,t),Ys.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else jl(2);e.G=0,e.j&&e.j.va(t),Bh(e),Sh(e)}function Bh(e){e.G=0,e.I=-1,e.j&&(0==Jf(e.i).length&&0==e.l.length||(e.i.i.length=0,fc(e.l),e.l.length=0),e.j.ua())}function zh(e,t,n){var r=function(e){return e instanceof wf?_f(e):new wf(e,void 0)}(n);if(""!=r.i)t&&If(r,t+"."+r.i),Ef(r,r.m);else{var i=Ys.location;r=function(e,t,n,r){var i=new wf(null,void 0);return e&&xf(i,e),t&&If(i,t),n&&Ef(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&kc(e.aa,(function(e,t){Sf(r,t,e)})),t=e.D,n=e.sa,t&&n&&Sf(r,t,n),Sf(r,"VER",e.ma),Rh(e,r),r}function qh(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new lh(new rh({ib:!0})):new lh(e.qa)).L=e.H,t}function Kh(){}function Wh(){if(Tc&&!(10<=Number(Vc)))throw Error("Environmental error: no available transport.")}function Gh(e,t){cl.call(this),this.g=new Ih(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!hc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!hc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Yh(this)}function Hh(e){Xl.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Qh(){$l.call(this),this.status=1}function Yh(e){this.g=e}(Ws=lh.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ql.g(),this.C=this.u?Gl(this.u):Gl(Ql),this.g.onreadystatechange=rc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void vh(this,a)}e=n||"";var i=new mf(this.headers);r&&yf(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=ph,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Ys.FormData&&e instanceof Ys.FormData,!(0<=sc(dh,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kh(this),0<this.B&&((this.K=function(e){return Tc&&Fc()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rc(this.pa,this)):this.A=El(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){vh(this,a)}},Ws.pa=function(){"undefined"!=typeof Qs&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ll(this,"timeout"),this.abort(8))},Ws.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ll(this,"complete"),ll(this,"abort"),gh(this))},Ws.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gh(this,!0)),lh.Z.M.call(this)},Ws.Fa=function(){this.s||(this.F||this.v||this.l?mh(this):this.cb())},Ws.cb=function(){mh(this)},Ws.ba=function(){try{return 2<bh(this)?this.g.status:-1}catch(Wf){return-1}},Ws.ga=function(){try{return this.g?this.g.responseText:""}catch(Wf){return""}},Ws.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ch(t)}},Ws.Da=function(){return this.m},Ws.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ws=Ih.prototype).ma=8,Ws.G=1,Ws.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Ws.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Zl(this,this.h,e,void 0),n=this.s;if(this.P&&(n?_c(n=bc(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Dh(this,t,r),Sf(i=_f(this.F),"RID",e),Sf(i,"CVER",22),this.D&&Sf(i,"X-HTTP-Session-Id",this.D),Rh(this,i),this.o&&n&&_h(i,this.o,n),Xf(this.i,t),this.Ra&&Sf(i,"TYPE","init"),this.ja?(Sf(i,"$req",r),Sf(i,"SID","null"),t.$=!0,af(t,i,null)):af(t,i,r),this.G=2}}else 3==this.G&&(e?Ah(this,e):0==this.l.length||Hf(this.i)||Ah(this))},Ws.Ga=function(){if(this.u=null,Mh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=zl(rc(this.bb,this),e)}},Ws.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,jl(10),Th(this),Mh(this))},Ws.ab=function(){null!=this.v&&(this.v=null,Th(this),Oh(this),jl(19))},Ws.jb=function(e){e?(this.h.info("Successfully pinged google.com"),jl(2)):(this.h.info("Failed to ping google.com"),jl(1))},(Ws=Kh.prototype).xa=function(){},Ws.wa=function(){},Ws.va=function(){},Ws.ua=function(){},Ws.Oa=function(){},Wh.prototype.g=function(e,t){return new Gh(e,t)},ac(Gh,cl),Gh.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),kl(rc(e.hb,e,t))),jl(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=zh(e,null,e.W),Nh(e)},Gh.prototype.close=function(){Eh(this.g)},Gh.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Ch(this.g,t)}else this.v?((t={}).__data__=hl(e),Ch(this.g,t)):Ch(this.g,e)},Gh.prototype.M=function(){this.g.j=null,delete this.j,Eh(this.g),delete this.g,Gh.Z.M.call(this)},ac(Hh,Xl),ac(Qh,$l),ac(Yh,Kh),Yh.prototype.xa=function(){ll(this.g,"a")},Yh.prototype.wa=function(e){ll(this.g,new Hh(e))},Yh.prototype.va=function(e){ll(this.g,new Qh(e))},Yh.prototype.ua=function(){ll(this.g,"b")},Wh.prototype.createWebChannel=Wh.prototype.g,Gh.prototype.send=Gh.prototype.u,Gh.prototype.open=Gh.prototype.m,Gh.prototype.close=Gh.prototype.close,ql.NO_ERROR=0,ql.TIMEOUT=8,ql.HTTP_ERROR=6,Kl.COMPLETE="complete",Hl.EventType=Yl,Yl.OPEN="a",Yl.CLOSE="b",Yl.ERROR="c",Yl.MESSAGE="d",cl.prototype.listen=cl.prototype.N,lh.prototype.listenOnce=lh.prototype.O,lh.prototype.getLastError=lh.prototype.La,lh.prototype.getLastErrorCode=lh.prototype.Da,lh.prototype.getStatus=lh.prototype.ba,lh.prototype.getResponseJson=lh.prototype.Qa,lh.prototype.getResponseText=lh.prototype.ga,lh.prototype.send=lh.prototype.ea;var Xh=Hs.createWebChannelTransport=function(){return new Wh},$h=Hs.getStatEventTarget=function(){return Ml()},Jh=Hs.ErrorCode=ql,Zh=Hs.EventType=Kl,ed=Hs.Event=Ol,td=Hs.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},nd=Hs.FetchXmlHttpFactory=rh,rd=Hs.WebChannel=Hl,id=Hs.XhrIo=lh,ad="@firebase/firestore",od=function(){function e(t){l(this,e),this.uid=t}return h(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();od.UNAUTHENTICATED=new od(null),od.GOOGLE_CREDENTIALS=new od("google-credentials-uid"),od.FIRST_PARTY=new od("first-party-uid"),od.MOCK_USER=new od("mock-user");var ud="9.8.0",sd=new pe("@firebase/firestore");function cd(){return sd.logLevel}function ld(e){if(sd.logLevel<=ue.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dd);sd.debug.apply(sd,["Firestore (".concat(ud,"): ").concat(e)].concat(ee(i)))}}function fd(e){if(sd.logLevel<=ue.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dd);sd.error.apply(sd,["Firestore (".concat(ud,"): ").concat(e)].concat(ee(i)))}}function hd(e){if(sd.logLevel<=ue.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dd);sd.warn.apply(sd,["Firestore (".concat(ud,"): ").concat(e)].concat(ee(i)))}}function dd(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function pd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ud,") INTERNAL ASSERTION FAILED: ")+e;throw fd(t),new Error(t)}function vd(e,t){e||pd()}function yd(e,t){return e}var md={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},gd=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return h(n)}(U),kd=h((function e(){var t=this;l(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),bd=h((function e(t,n){l(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),wd=function(){function e(){l(this,e)}return h(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(od.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),_d=function(){function e(t){l(this,e),this.token=t,this.changeListener=null}return h(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),xd=function(){function e(t){l(this,e),this.t=t,this.currentUser=od.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return h(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new kd;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new kd,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){ld("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(ld("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new kd)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ld("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(vd("string"==typeof n.accessToken),new bd(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return vd(null===e||"string"==typeof e),new od(e)}}]),e}(),Id=h((function e(t,n,r){l(this,e),this.type="FirstParty",this.user=od.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Ed=function(){function e(t,n,r){l(this,e),this.h=t,this.l=n,this.m=r}return h(e,[{key:"getToken",value:function(){return Promise.resolve(new Id(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(od.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Td=h((function e(t){l(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Sd=function(){function e(t){l(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return h(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ld("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,ld("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ld("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):ld("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(vd("string"==typeof t.token),e.p=t.token,new Td(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Cd=function(){function e(t,n){var r=this;l(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return h(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Nd(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Cd.A=-1;var Ad=function(){function e(){l(this,e)}return h(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Nd(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Rd(e,t){return e<t?-1:e>t?1:0}function Dd(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Pd(e){return e+"\0"}var Od=function(){function e(t,n){if(l(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new gd(md.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new gd(md.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new gd(md.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new gd(md.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return h(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Rd(this.nanoseconds,e.nanoseconds):Rd(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ld=function(){function e(t){l(this,e),this.timestamp=t}return h(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Od(0,0))}},{key:"max",value:function(){return new e(new Od(253402300799,999999999))}}]),e}();function Md(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fd(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ud(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Vd=function(){function e(t,n,r){l(this,e),void 0===n?n=0:n>t.length&&pd(),void 0===r?r=t.length-n:r>t.length-n&&pd(),this.segments=t,this.offset=n,this.len=r}return h(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),jd=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new gd(md.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ee(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Vd),Bd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zd=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Bd.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new gd(md.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new gd(md.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new gd(md.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new gd(md.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Vd),qd=function(){function e(t){l(this,e),this.fields=t,t.sort(zd.comparator)}return h(e,[{key:"covers",value:function(e){var t,n=d(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Dd(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Kd=function(e){function t(e){l(this,t),this.binaryString=e}return h(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Rd(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Kd.EMPTY_BYTE_STRING=new Kd("");var Wd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gd(e){if(vd(!!e),"string"==typeof e){var t=0,n=Wd.exec(e);if(vd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Hd(e.seconds),nanos:Hd(e.nanos)}}function Hd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Qd(e){return"string"==typeof e?Kd.fromBase64String(e):Kd.fromUint8Array(e)}function Yd(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Xd(e){var t=e.mapValue.fields.__previous_value__;return Yd(t)?Xd(t):t}function $d(e){var t=Gd(e.mapValue.fields.__local_write_time__.timestampValue);return new Od(t.seconds,t.nanos)}var Jd=h((function e(t,n,r,i,a,o,u,s){l(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Zd=function(){function e(t,n){l(this,e),this.projectId=t,this.database=n||"(default)"}return h(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function ep(e){return null==e}function tp(e){return 0===e&&1/e==-1/0}function np(e){return"number"==typeof e&&Number.isInteger(e)&&!tp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var rp=function(){function e(t){l(this,e),this.path=t}return h(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===jd.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(jd.fromString(t))}},{key:"fromName",value:function(t){return new e(jd.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(jd.emptyPath())}},{key:"comparator",value:function(e,t){return jd.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new jd(t.slice()))}}]),e}(),ip={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ap={nullValue:"NULL_VALUE"};function op(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Yd(e)?4:bp(e)?9007199254740991:10:pd()}function up(e,t){if(e===t)return!0;var n=op(e);if(n!==op(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return $d(e).isEqual($d(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Gd(e.timestampValue),r=Gd(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Qd(e.bytesValue).isEqual(Qd(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Hd(e.geoPointValue.latitude)===Hd(t.geoPointValue.latitude)&&Hd(e.geoPointValue.longitude)===Hd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Hd(e.integerValue)===Hd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Hd(e.doubleValue),r=Hd(t.doubleValue);return n===r?tp(n)===tp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Dd(e.arrayValue.values||[],t.arrayValue.values||[],up);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Md(n)!==Md(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!up(n[i],r[i])))return!1;return!0}(e,t);default:return pd()}}function sp(e,t){return void 0!==(e.values||[]).find((function(e){return up(e,t)}))}function cp(e,t){if(e===t)return 0;var n=op(e),r=op(t);if(n!==r)return Rd(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rd(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Hd(e.integerValue||e.doubleValue),r=Hd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return lp(e.timestampValue,t.timestampValue);case 4:return lp($d(e),$d(t));case 5:return Rd(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Qd(e),r=Qd(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Rd(n[i],r[i]);if(0!==a)return a}return Rd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Rd(Hd(e.latitude),Hd(t.latitude));return 0!==n?n:Rd(Hd(e.longitude),Hd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=cp(n[i],r[i]);if(a)return a}return Rd(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ip.mapValue&&t===ip.mapValue)return 0;if(e===ip.mapValue)return 1;if(t===ip.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Rd(r[o],a[o]);if(0!==u)return u;var s=cp(n[r[o]],i[a[o]]);if(0!==s)return s}return Rd(r.length,a.length)}(e.mapValue,t.mapValue);default:throw pd()}}function lp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Rd(e,t);var n=Gd(e),r=Gd(t),i=Rd(n.seconds,r.seconds);return 0!==i?i:Rd(n.nanos,r.nanos)}function fp(e){return hp(e)}function hp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Gd(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Qd(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,rp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=d(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=hp(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=d(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(hp(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):pd();var t,n}function dp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function pp(e){return!!e&&"integerValue"in e}function vp(e){return!!e&&"arrayValue"in e}function yp(e){return!!e&&"nullValue"in e}function mp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function gp(e){return!!e&&"mapValue"in e}function kp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Fd(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=kp(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=kp(e.arrayValue.values[r]);return n}return Object.assign({},e)}function bp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function wp(e){return"nullValue"in e?ap:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?dp(Zd.empty(),rp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:pd()}function _p(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?dp(Zd.empty(),rp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ip:pd()}function xp(e,t){var n=cp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ip(e,t){var n=cp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ep=function(){function e(t){l(this,e),this.value=t}return h(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!gp(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kp(t)}},{key:"setAll",value:function(e){var t=this,n=zd.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=kp(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());gp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return up(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];gp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Fd(t,(function(t,n){return e[t]=n}));var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(kp(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Tp(e){var t=[];return Fd(e.fields,(function(e,n){var r=new zd([e]);if(gp(n)){var i=Tp(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=d(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new qd(t)}var Sp=function(){function e(t,n,r,i,a,o){l(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return h(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ep.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ep.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ld.min(),Ld.min(),Ep.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Ld.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ld.min(),Ep.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ld.min(),Ep.empty(),2)}}]),e}(),Cp=h((function e(t,n,r,i){l(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Np(e){return e.fields.find((function(e){return 2===e.kind}))}function Ap(e){return e.fields.filter((function(e){return 2!==e.kind}))}Cp.UNKNOWN_ID=-1;var Rp=h((function e(t,n){l(this,e),this.fieldPath=t,this.kind=n})),Dp=function(){function e(t,n){l(this,e),this.sequenceNumber=t,this.offset=n}return h(e,null,[{key:"empty",value:function(){return new e(0,Lp.min())}}]),e}();function Pp(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ld.fromTimestamp(1e9===r?new Od(n+1,0):new Od(n,r));return new Lp(i,rp.empty(),t)}function Op(e){return new Lp(e.readTime,e.key,-1)}var Lp=function(){function e(t,n,r){l(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return h(e,null,[{key:"min",value:function(){return new e(Ld.min(),rp.empty(),-1)}},{key:"max",value:function(){return new e(Ld.max(),rp.empty(),-1)}}]),e}();function Mp(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=rp.comparator(e.documentKey,t.documentKey))?n:Rd(e.largestBatchId,t.largestBatchId)}var Fp=function(){function e(t,n){l(this,e),this.comparator=t,this.root=n||Vp.EMPTY}return h(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Vp.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Vp.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Up(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Up(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Up(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Up(this.root,e,this.comparator,!0)}}]),e}(),Up=function(){function e(t,n,r,i){l(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return h(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Vp=function(){function e(t,n,r,i,a){l(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return h(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw pd();if(this.right.isRed())throw pd();var e=this.left.check();if(e!==this.right.check())throw pd();return e+(this.isRed()?0:1)}}]),e}();Vp.EMPTY=null,Vp.RED=!0,Vp.BLACK=!1,Vp.EMPTY=new(function(){function e(){l(this,e),this.size=0}return h(e,[{key:"key",get:function(){throw pd()}},{key:"value",get:function(){throw pd()}},{key:"color",get:function(){throw pd()}},{key:"left",get:function(){throw pd()}},{key:"right",get:function(){throw pd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Vp(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var jp=function(){function e(t){l(this,e),this.comparator=t,this.data=new Fp(this.comparator)}return h(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Bp(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Bp(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Bp=function(){function e(t){l(this,e),this.iter=t}return h(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function zp(e){return e.hasNext()?e.getNext():void 0}var qp=h((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;l(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function Kp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new qp(e,t,n,r,i,a,o)}function Wp(e){var t=yd(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+fp(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ep(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return fp(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return fp(e)})).join(",")),t.P=n}return t.P}function Gp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!sv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!up(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!lv(e.startAt,t.startAt)&&lv(e.endAt,t.endAt)}function Hp(e){return rp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Qp(e,t){return e.filters.filter((function(e){return e instanceof $p&&e.field.isEqual(t)}))}function Yp(e,t,n){var r,i=ap,a=!0,o=d(Qp(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ap,c=!0;switch(u.op){case"<":case"<=":s=wp(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=ap}xp({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];xp({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Xp(e,t,n){var r,i=ip,a=!0,o=d(Qp(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ip,c=!0;switch(u.op){case">=":case">":s=_p(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=ip}Ip({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ip({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var $p=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(cp(t,this.value)):null!==t&&op(this.value)===op(t)&&this.v(cp(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pd()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Jp(e,t,r):"array-contains"===t?new nv(e,r):"in"===t?new rv(e,r):"not-in"===t?new iv(e,r):"array-contains-any"===t?new av(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Zp(e,n):new ev(e,n)}}]),n}(function(){return h((function e(){l(this,e)}))}()),Jp=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,e,r,i)).key=rp.fromName(i.referenceValue),a}return h(n,[{key:"matches",value:function(e){var t=rp.comparator(e.key,this.key);return this.v(t)}}]),n}($p),Zp=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,"in",r)).keys=tv("in",r),i}return h(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}($p),ev=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,"not-in",r)).keys=tv("not-in",r),i}return h(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}($p);function tv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return rp.fromName(e.referenceValue)}))}var nv=function(e){y(n,e);var t=w(n);function n(e,r){return l(this,n),t.call(this,e,"array-contains",r)}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return vp(t)&&sp(t.arrayValue,this.value)}}]),n}($p),rv=function(e){y(n,e);var t=w(n);function n(e,r){return l(this,n),t.call(this,e,"in",r)}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&sp(this.value.arrayValue,t)}}]),n}($p),iv=function(e){y(n,e);var t=w(n);function n(e,r){return l(this,n),t.call(this,e,"not-in",r)}return h(n,[{key:"matches",value:function(e){if(sp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!sp(this.value.arrayValue,t)}}]),n}($p),av=function(e){y(n,e);var t=w(n);function n(e,r){return l(this,n),t.call(this,e,"array-contains-any",r)}return h(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!vp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return sp(t.value.arrayValue,e)}))}}]),n}($p),ov=h((function e(t,n){l(this,e),this.position=t,this.inclusive=n})),uv=h((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";l(this,e),this.field=t,this.dir=n}));function sv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function cv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?rp.comparator(rp.fromName(o.referenceValue),n.key):cp(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function lv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!up(e.position[n],t.position[n]))return!1;return!0}var fv=h((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;l(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function hv(e,t,n,r,i,a,o,u){return new fv(e,t,n,r,i,a,o,u)}function dv(e){return new fv(e)}function pv(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function vv(e){var t,n=d(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function yv(e){return null!==e.collectionGroup}function mv(e){var t=yd(e);if(null===t.D){t.D=[];var n=vv(t),r=pv(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new uv(n)),t.D.push(new uv(zd.keyField(),"asc"));else{var i,a=!1,o=d(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new uv(zd.keyField(),s))}}}return t.D}function gv(e){var t=yd(e);if(!t.C)if("F"===t.limitType)t.C=Kp(t.path,t.collectionGroup,mv(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=d(mv(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new uv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new ov(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ov(t.startAt.position,t.startAt.inclusive):null;t.C=Kp(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function kv(e,t,n){return new fv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function bv(e,t){return Gp(gv(e),gv(t))&&e.limitType===t.limitType}function wv(e){return"".concat(Wp(gv(e)),"|lt:").concat(e.limitType)}function _v(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(fp(t.value));var t})).join(", "),"]")),ep(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return fp(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return fp(e)})).join(",")),"Target(".concat(t,")")}(gv(e)),"; limitType=").concat(e.limitType,")")}function xv(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):rp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=d(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=d(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=cv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,mv(e),t))&&!(e.endAt&&!function(e,t,n){var r=cv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,mv(e),t))}(e,t)}function Iv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ev(e){return function(t,n){var r,i=!1,a=d(mv(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Tv(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Tv(e,t,n){var r=e.field.isKeyField()?rp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?cp(r,i):pd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return pd()}}function Sv(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tp(t)?"-0":t}}function Cv(e){return{integerValue:""+e}}function Nv(e,t){return np(t)?Cv(t):Sv(e,t)}var Av=h((function e(){l(this,e),this._=void 0}));function Rv(e,t,n){return e instanceof Ov?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Lv?Mv(e,t):e instanceof Fv?Uv(e,t):function(e,t){var n=Pv(e,t),r=jv(n)+jv(e.k);return pp(n)&&pp(e.k)?Cv(r):Sv(e.M,r)}(e,t)}function Dv(e,t,n){return e instanceof Lv?Mv(e,t):e instanceof Fv?Uv(e,t):n}function Pv(e,t){return e instanceof Vv?pp(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Ov=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n)}(Av),Lv=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).elements=e,r}return h(n)}(Av);function Mv(e,t){var n,r=Bv(t),i=d(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return up(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Fv=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).elements=e,r}return h(n)}(Av);function Uv(e,t){var n,r=Bv(t),i=d(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!up(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Vv=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).M=e,i.k=r,i}return h(n)}(Av);function jv(e){return Hd(e.integerValue||e.doubleValue)}function Bv(e){return vp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var zv=h((function e(t,n){l(this,e),this.field=t,this.transform=n}));var qv=h((function e(t,n){l(this,e),this.version=t,this.transformResults=n})),Kv=function(){function e(t,n){l(this,e),this.updateTime=t,this.exists=n}return h(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Wv(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Gv=h((function e(){l(this,e)}));function Hv(e,t,n){e instanceof Jv?function(e,t,n){var r=e.value.clone(),i=ty(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Zv?function(e,t,n){if(Wv(e.precondition,t)){var r=ty(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ey(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Qv(e,t,n){e instanceof Jv?function(e,t,n){if(Wv(e.precondition,t)){var r=e.value.clone(),i=ny(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument($v(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Zv?function(e,t,n){if(Wv(e.precondition,t)){var r=ny(e.fieldTransforms,n,t),i=t.data;i.setAll(ey(e)),i.setAll(r),t.convertToFoundDocument($v(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Wv(e.precondition,t)&&t.convertToNoDocument(Ld.min())}(e,t)}function Yv(e,t){var n,r=null,i=d(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Pv(a.transform,o||null);null!=u&&(null==r&&(r=Ep.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Xv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Dd(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Lv&&t instanceof Lv||e instanceof Fv&&t instanceof Fv?Dd(e.elements,t.elements,up):e instanceof Vv&&t instanceof Vv?up(e.k,t.k):e instanceof Ov&&t instanceof Ov}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function $v(e){return e.isFoundDocument()?e.version:Ld.min()}var Jv=function(e){y(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return l(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return h(n)}(Gv),Zv=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return l(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return h(n)}(Gv);function ey(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function ty(e,t,n){var r=new Map;vd(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Dv(o,u,n[i]))}return r}function ny(e,t,n){var r,i=new Map,a=d(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Rv(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var ry,iy,ay=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return h(n)}(Gv),oy=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return h(n)}(Gv),uy=h((function e(t){l(this,e),this.count=t}));function sy(e){switch(e){default:return pd();case md.CANCELLED:case md.UNKNOWN:case md.DEADLINE_EXCEEDED:case md.RESOURCE_EXHAUSTED:case md.INTERNAL:case md.UNAVAILABLE:case md.UNAUTHENTICATED:return!1;case md.INVALID_ARGUMENT:case md.NOT_FOUND:case md.ALREADY_EXISTS:case md.PERMISSION_DENIED:case md.FAILED_PRECONDITION:case md.ABORTED:case md.OUT_OF_RANGE:case md.UNIMPLEMENTED:case md.DATA_LOSS:return!0}}function cy(e){if(void 0===e)return fd("GRPC error has no .code"),md.UNKNOWN;switch(e){case ry.OK:return md.OK;case ry.CANCELLED:return md.CANCELLED;case ry.UNKNOWN:return md.UNKNOWN;case ry.DEADLINE_EXCEEDED:return md.DEADLINE_EXCEEDED;case ry.RESOURCE_EXHAUSTED:return md.RESOURCE_EXHAUSTED;case ry.INTERNAL:return md.INTERNAL;case ry.UNAVAILABLE:return md.UNAVAILABLE;case ry.UNAUTHENTICATED:return md.UNAUTHENTICATED;case ry.INVALID_ARGUMENT:return md.INVALID_ARGUMENT;case ry.NOT_FOUND:return md.NOT_FOUND;case ry.ALREADY_EXISTS:return md.ALREADY_EXISTS;case ry.PERMISSION_DENIED:return md.PERMISSION_DENIED;case ry.FAILED_PRECONDITION:return md.FAILED_PRECONDITION;case ry.ABORTED:return md.ABORTED;case ry.OUT_OF_RANGE:return md.OUT_OF_RANGE;case ry.UNIMPLEMENTED:return md.UNIMPLEMENTED;case ry.DATA_LOSS:return md.DATA_LOSS;default:return pd()}}(iy=ry||(ry={}))[iy.OK=0]="OK",iy[iy.CANCELLED=1]="CANCELLED",iy[iy.UNKNOWN=2]="UNKNOWN",iy[iy.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",iy[iy.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",iy[iy.NOT_FOUND=5]="NOT_FOUND",iy[iy.ALREADY_EXISTS=6]="ALREADY_EXISTS",iy[iy.PERMISSION_DENIED=7]="PERMISSION_DENIED",iy[iy.UNAUTHENTICATED=16]="UNAUTHENTICATED",iy[iy.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",iy[iy.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",iy[iy.ABORTED=10]="ABORTED",iy[iy.OUT_OF_RANGE=11]="OUT_OF_RANGE",iy[iy.UNIMPLEMENTED=12]="UNIMPLEMENTED",iy[iy.INTERNAL=13]="INTERNAL",iy[iy.UNAVAILABLE=14]="UNAVAILABLE",iy[iy.DATA_LOSS=15]="DATA_LOSS";var ly=function(){function e(t,n){l(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return h(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Fd(this.inner,(function(t,n){var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ud(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),fy=new Fp(rp.comparator);function hy(){return fy}var dy=new Fp(rp.comparator);function py(){for(var e=dy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function vy(){return new ly((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var yy=new Fp(rp.comparator),my=new jp(rp.comparator);function gy(){for(var e=my,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var ky=new jp(Rd);function by(){return ky}var wy=function(){function e(t,n,r,i,a){l(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return h(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,_y.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ld.min(),r,by(),hy(),gy())}}]),e}(),_y=function(){function e(t,n,r,i,a){l(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return h(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Kd.EMPTY_BYTE_STRING,n,gy(),gy(),gy())}}]),e}(),xy=h((function e(t,n,r,i){l(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),Iy=h((function e(t,n){l(this,e),this.targetId=t,this.$=n})),Ey=h((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kd.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Ty=function(){function e(){l(this,e),this.B=0,this.L=Ny(),this.U=Kd.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return h(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=gy(),t=gy(),n=gy();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:pd()}})),new _y(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Ny()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),Sy=function(){function e(t){l(this,e),this.nt=t,this.st=new Map,this.it=hy(),this.rt=Cy(),this.ot=new jp(Rd)}return h(e,[{key:"ut",value:function(e){var t,n=d(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=d(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:pd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Hp(i))if(0===n){var a=new rp(i.path);this.ct(t,a,Sp.newNoDocument(a,Ld.min()))}else vd(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Hp(a.target)){var o=new rp(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Sp.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=gy();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new wy(e,n,this.ot,this.it,r);return this.it=hy(),this.rt=Cy(),this.ot=new jp(Rd),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Ty,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new jp(Rd),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||ld("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Ty),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Cy(){return new Fp(rp.comparator)}function Ny(){return new Fp(rp.comparator)}var Ay={asc:"ASCENDING",desc:"DESCENDING"},Ry={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dy=h((function e(t,n){l(this,e),this.databaseId=t,this.N=n}));function Py(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Oy(e,t){return e.N?t.toBase64():t.toUint8Array()}function Ly(e,t){return Py(e,t.toTimestamp())}function My(e){return vd(!!e),Ld.fromTimestamp(function(e){var t=Gd(e);return new Od(t.seconds,t.nanos)}(e))}function Fy(e,t){return function(e){return new jd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Uy(e){var t=jd.fromString(e);return vd(um(t)),t}function Vy(e,t){return Fy(e.databaseId,t.path)}function jy(e,t){var n=Uy(t);if(n.get(1)!==e.databaseId.projectId)throw new gd(md.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new gd(md.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new rp(Ky(n))}function By(e,t){return Fy(e.databaseId,t)}function zy(e){var t=Uy(e);return 4===t.length?jd.emptyPath():Ky(t)}function qy(e){return new jd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ky(e){return vd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Wy(e,t,n){return{name:Vy(e,t),fields:n.value.mapValue.fields}}function Gy(e,t,n){var r=jy(e,t.name),i=My(t.updateTime),a=new Ep({mapValue:{fields:t.fields}}),o=Sp.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Hy(e,t){return"found"in t?function(e,t){vd(!!t.found),t.found.name,t.found.updateTime;var n=jy(e,t.found.name),r=My(t.found.updateTime),i=new Ep({mapValue:{fields:t.found.fields}});return Sp.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){vd(!!t.missing),vd(!!t.readTime);var n=jy(e,t.missing),r=My(t.readTime);return Sp.newNoDocument(n,r)}(e,t):pd()}function Qy(e,t){var n;if(t instanceof Jv)n={update:Wy(e,t.key,t.value)};else if(t instanceof ay)n={delete:Vy(e,t.key)};else if(t instanceof Zv)n={update:Wy(e,t.key,t.data),updateMask:om(t.fieldMask)};else{if(!(t instanceof oy))return pd();n={verify:Vy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ov)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Lv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vv)return{fieldPath:t.field.canonicalString(),increment:n.k};throw pd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ly(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:pd()}(e,t.precondition)),n}function Yy(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Kv.updateTime(My(e.updateTime)):void 0!==e.exists?Kv.exists(e.exists):Kv.none()}(t.currentDocument):Kv.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)vd("REQUEST_TIME"===t.setToServerValue),n=new Ov;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Lv(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Fv(i)}else"increment"in t?n=new Vv(e,t.increment):pd();var a=zd.fromServerFormat(t.fieldPath);return new zv(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=jy(e,t.update.name),a=new Ep({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new qd(t.map((function(e){return zd.fromServerFormat(e)})))}(t.updateMask);return new Zv(i,a,o,n,r)}return new Jv(i,a,n,r)}if(t.delete){var u=jy(e,t.delete);return new ay(u,n)}if(t.verify){var s=jy(e,t.verify);return new oy(s,n)}return pd()}function Xy(e,t){return{documents:[By(e,t.path)]}}function $y(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=By(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=By(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(mp(e.value))return{unaryFilter:{field:nm(e.field),op:"IS_NAN"}};if(yp(e.value))return{unaryFilter:{field:nm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(mp(e.value))return{unaryFilter:{field:nm(e.field),op:"IS_NOT_NAN"}};if(yp(e.value))return{unaryFilter:{field:nm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nm(e.field),op:tm(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:nm(e.field),direction:em(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||ep(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Jy(e){var t=zy(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){vd(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Zy(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new uv(rm(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return ep(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ov(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ov(n,t)}(n.endAt)),hv(t,i,u,o,s,"F",c,l)}function Zy(e){return e?void 0!==e.unaryFilter?[am(e)]:void 0!==e.fieldFilter?[im(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Zy(e)})).reduce((function(e,t){return e.concat(t)})):pd():[]}function em(e){return Ay[e]}function tm(e){return Ry[e]}function nm(e){return{fieldPath:e.canonicalString()}}function rm(e){return zd.fromServerFormat(e.fieldPath)}function im(e){return $p.create(rm(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pd()}}(e.fieldFilter.op),e.fieldFilter.value)}function am(e){switch(e.unaryFilter.op){case"IS_NAN":var t=rm(e.unaryFilter.field);return $p.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=rm(e.unaryFilter.field);return $p.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=rm(e.unaryFilter.field);return $p.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=rm(e.unaryFilter.field);return $p.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pd()}}function om(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function um(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function sm(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=lm(t)),t=cm(e.get(n),t);return lm(t)}function cm(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function lm(e){return e+"\x01\x01"}function fm(e){var t=e.length;if(vd(t>=2),2===t)return vd("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),jd.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&pd(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:pd()}a=o+2}return new jd(r)}var hm=["userId","batchId"];function dm(e,t){return[e,sm(t)]}function pm(e,t,n){return[e,sm(t),n]}var vm={},ym=["prefixPath","collectionGroup","readTime","documentId"],mm=["prefixPath","collectionGroup","documentId"],gm=["collectionGroup","readTime","prefixPath","documentId"],km=["canonicalId","targetId"],bm=["targetId","path"],wm=["path","targetId"],_m=["collectionId","parent"],xm=["indexId","uid"],Im=["uid","sequenceNumber"],Em=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Tm=["indexId","uid","orderedDocumentKey"],Sm=["userId","collectionPath","documentId"],Cm=["userId","collectionPath","largestBatchId"],Nm=["userId","collectionGroup","largestBatchId"],Am=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Rm=[].concat(ee(Am),["documentOverlays"]),Dm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Pm=[].concat(Dm,["indexConfiguration","indexState","indexEntries"]),Om="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lm=function(){function e(){l(this,e),this.onCommittedListeners=[]}return h(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Mm=function(){function e(t){var n=this;l(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return h(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&pd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=d(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Fm=function(){function e(t,n){var r=this;l(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new kd,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new jm(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Wm(e.target.error);r.At.reject(new jm(t,n))}}return h(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(ld("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new zm(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new jm(n,t)}}}]),e}(),Um=function(){function e(t,n,r){l(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(R())&&fd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return h(e,[{key:"Nt",value:function(){var e=ne(J().mark((function e(t){var n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ld("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new jm(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new gd(md.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new gd(md.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new jm(t,n))},i.onupgradeneeded=function(e){ld("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){ld("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ne(J().mark((function e(t,n,r,i){var a,o,u,s,c=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(J().mark((function e(){var n,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=Fm.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),Mm.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,ld("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ld("SimpleDb","Removing database:",e),qm(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!F())return!1;if(e.St())return!0;var t=R(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/react-yewon-nopretty",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Vm=function(){function e(t){l(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return h(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return qm(this.Ft.delete())}}]),e}(),jm=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,md.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return h(n)}(gd);function Bm(e){return"IndexedDbTransactionError"===e.name}var zm=function(){function e(t){l(this,e),this.store=t}return h(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ld("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ld("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),qm(n)}},{key:"add",value:function(e){return ld("SimpleDb","ADD",this.store.name,e,e),qm(this.store.add(e))}},{key:"get",value:function(e){var t=this;return qm(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ld("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ld("SimpleDb","DELETE",this.store.name,e),qm(this.store.delete(e))}},{key:"count",value:function(){return ld("SimpleDb","COUNT",this.store.name),qm(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Mm((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Mm((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){ld("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Mm((function(n,r){t.onerror=function(e){var t=Wm(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Mm((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Vm(i),o=t(i.primaryKey,i.value,a);if(o instanceof Mm){var u=o.catch((function(e){return a.done(),Mm.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Mm.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function qm(e){return new Mm((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Wm(e.target.error);n(t)}}))}var Km=!1;function Wm(e){var t=Um.Vt(R());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new gd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Km||(Km=!0,setTimeout((function(){throw r}),0)),r}}return e}var Gm=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return h(n)}(Lm);function Hm(e,t){var n=yd(e);return Um.xt(n.Ht,t)}var Qm=function(){function e(t,n,r,i){l(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return h(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Hv(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=d(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Qv(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=d(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Qv(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ld.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),gy())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Dd(this.mutations,e.mutations,(function(e,t){return Xv(e,t)}))&&Dd(this.baseMutations,e.baseMutations,(function(e,t){return Xv(e,t)}))}}]),e}(),Ym=function(){function e(t,n,r,i){l(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return h(e,null,[{key:"from",value:function(t,n,r){vd(t.mutations.length===r.length);for(var i=yy,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Xm=function(){function e(t,n){l(this,e),this.largestBatchId=t,this.mutation=n}return h(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),$m=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ld.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ld.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Kd.EMPTY_BYTE_STRING;l(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return h(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Jm=h((function e(t){l(this,e),this.Jt=t}));function Zm(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:eg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Vy(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Py(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:tg(t.version)};else{if(!t.isUnknownDocument())return pd();r.unknownDocument={path:n.path.toArray(),version:tg(t.version)}}return r}function eg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function tg(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ng(e){var t=new Od(e.seconds,e.nanoseconds);return Ld.fromTimestamp(t)}function rg(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Yy(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Yy(e.Jt,t)})),u=Od.fromMillis(t.localWriteTimeMs);return new Qm(t.batchId,u,n,o)}function ig(e){var t,n,r=ng(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?ng(e.lastLimboFreeSnapshotVersion):Ld.min();return void 0!==e.query.documents?(vd(1===(n=e.query).documents.length),t=gv(dv(zy(n.documents[0])))):t=function(e){return gv(Jy(e))}(e.query),new $m(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Kd.fromBase64String(e.resumeToken))}function ag(e,t){var n,r=tg(t.snapshotVersion),i=tg(t.lastLimboFreeSnapshotVersion);n=Hp(t.target)?Xy(e.Jt,t.target):$y(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Wp(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function og(e){var t=Jy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?kv(t,t.limit,"L"):t}function ug(e,t){return new Xm(t.largestBatchId,Yy(e.Jt,t.overlayMutation))}function sg(e,t){var n=t.path.lastSegment();return[e,sm(t.path.popLast()),n]}var cg=function(){function e(){l(this,e)}return h(e,[{key:"getBundleMetadata",value:function(e,t){return lg(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:ng(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return lg(e).put({bundleId:(n=t).id,createTime:tg(My(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return fg(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:og(t.bundledQuery),readTime:ng(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return fg(e).put(function(e){return{name:e.name,readTime:tg(My(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function lg(e){return Hm(e,"bundles")}function fg(e){return Hm(e,"namedQueries")}var hg=function(){function e(t,n){l(this,e),this.M=t,this.userId=n}return h(e,[{key:"getOverlay",value:function(e,t){var n=this;return dg(e).get(sg(this.userId,t)).next((function(e){return e?ug(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Xm(t,a);i.push(r.Xt(e,o))})),Mm.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(sm(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(dg(e).Qt("collectionPathOverlayIndex",i))})),Mm.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=vy(),a=sm(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return dg(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=ug(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=vy(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dg(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=ug(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return dg(e).put(function(e,t,n){var r=s(sg(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Qy(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function dg(e){return Hm(e,"documentOverlays")}var pg=function(){function e(){l(this,e)}return h(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Hd(e.integerValue));else if("doubleValue"in e){var n=Hd(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),tp(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Qd(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?bp(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):pd()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),rp.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function vg(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function yg(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=vg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}pg.fe=new pg;var mg=function(){function e(){l(this,e),this.buffer=new Uint8Array(1024),this.position=0}return h(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=yg(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=yg(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),gg=function(){function e(t){l(this,e),this.De=t}return h(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),kg=function(){function e(t){l(this,e),this.De=t}return h(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),bg=function(){function e(){l(this,e),this.De=new mg,this.Ce=new gg(this.De),this.xe=new kg(this.De)}return h(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),wg=function(){function e(t,n,r,i){l(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return h(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function _g(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=xg(e.arrayValue,t.arrayValue))?n:0!==(n=xg(e.directionalValue,t.directionalValue))?n:rp.comparator(e.documentKey,t.documentKey)}function xg(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Ig=function(){function e(t){l(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=d(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return h(e,[{key:"$e",value:function(e){var t=Np(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Ap(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=d(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Eg=function(){function e(){l(this,e),this.qe=new Tg}return h(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Mm.resolve()}},{key:"getCollectionParents",value:function(e,t){return Mm.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Mm.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Mm.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Mm.resolve(null)}},{key:"getIndexType",value:function(e,t){return Mm.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Mm.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Mm.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Mm.resolve(Lp.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Mm.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Mm.resolve()}}]),e}(),Tg=function(){function e(){l(this,e),this.index={}}return h(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new jp(jd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new jp(jd.comparator)).toArray()}}]),e}(),Sg=new Uint8Array(0),Cg=function(){function e(t,n){l(this,e),this.user=t,this.databaseId=n,this.Ke=new Tg,this.Ge=new ly((function(e){return Wp(e)}),(function(e,t){return Gp(e,t)})),this.uid=t.uid||""}return h(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:sm(i)};return Ng(e).put(a)}return Mm.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Pd(t),""],!1,!0);return Ng(e).qt(r).next((function(e){var r,i=d(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(fm(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Rg(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Rg(e),r=Dg(e),i=Ag(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Ag(e),i=!0,a=new Map;return Mm.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=gy(),o=[];return Mm.forEach(a,(function(i,a){var u;ld("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Wp(t)));var s=function(e,t){var n=Np(t);if(void 0===n)return null;var r,i=d(Qp(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=d(Ap(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=d(Qp(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=d(Ap(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Yp(e,o.fieldPath,e.startAt):Xp(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ov(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=d(Ap(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Xp(e,o.fieldPath,e.endAt):Yp(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ov(r,i)}(a,i),h=n.We(i,a,l),p=n.We(i,a,f),v=n.ze(i,a,c),y=n.He(i.indexId,s,h,l.inclusive,p,f.inclusive,v);return Mm.forEach(y,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=rp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Mm.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.Je(t[s/c]):Sg,h=u.Ye(e,f,n[s%c],r),d=u.Xe(e,f,i[s%c],a),p=o.map((function(t){return u.Ye(e,f,t,!0)}));l.push.apply(l,ee(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"Ye",value:function(e,t,n,r){var i=new wg(e,rp.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new wg(e,rp.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new Ig(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Mm.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new jp(zd.comparator),r=!1,i=d(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=d(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new bg,i=d(Ap(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);pg.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new bg;return pg.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new bg;return pg.fe.Zt(dp(this.databaseId,t),n.Ne(function(e){var t=Ap(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new bg);var i,a=0,o=d(Ap(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=d(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&vp(c))r=this.nn(r,s,c);else{var h=f.Ne(s.kind);pg.fe.Zt(c,h)}}}catch(p){l.e(p)}finally{l.f()}}}catch(p){o.e(p)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=ee(e),a=[],o=d(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=d(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new bg;f.seed(l.Se()),pg.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof $p&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Rg(e),i=Dg(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Mm.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Dp(t.sequenceNumber,new Lp(ng(t.readTime),new rp(fm(t.documentKey)),t.largestBatchId)):Dp.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new Rp(zd.fromServerFormat(n),r)}));return new Cp(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Rd(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Rg(e),a=Dg(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Mm.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:tg(r.readTime),documentKey:sm(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Mm.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Mm.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Mm.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?Mm.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return Ag(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return Ag(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=Ag(e),i=new jp(_g);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new wg(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new jp(_g),r=this.Ze(t,e);if(null==r)return n;var i=Np(t);if(null!=i){var a=e.data.field(i.fieldPath);if(vp(a)){var o,u=d(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new wg(t.indexId,e.key,this.Je(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new wg(t.indexId,e.key,Sg,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;ld("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=zp(a),s=zp(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=zp(o)):l?(i(u),u=zp(a)):(u=zp(a),s=zp(o))}}(r,i,_g,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),Mm.waitFor(o)}},{key:"rn",value:function(e){var t=1;return Dg(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return _g(e,t)})).filter((function(e,t,n){return!t||0!==_g(e,n[t-1])}));var r=[];r.push(e);var i,a=d(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=_g(o,e),s=_g(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Sg,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Sg,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return Mm.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||Mp(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=Lp.min()}))})).next((function(){return n}))}}]),e}();function Ng(e){return Hm(e,"collectionParents")}function Ag(e){return Hm(e,"indexEntries")}function Rg(e){return Hm(e,"indexConfiguration")}function Dg(e){return Hm(e,"indexState")}var Pg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Og=function(){function e(t,n,r){l(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return h(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Lg(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){vd(1===u)})));var c,l=[],f=d(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,p=pm(t,h.key.path,n.batchId);a.push(i.delete(p)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return Mm.waitFor(a).next((function(){return l}))}function Mg(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw pd();t=e.noDocument}return JSON.stringify(t).length}Og.DEFAULT_COLLECTION_PERCENTILE=10,Og.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Og.DEFAULT=new Og(41943040,Og.DEFAULT_COLLECTION_PERCENTILE,Og.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Og.DISABLED=new Og(-1,0,0);var Fg=function(){function e(t,n,r,i){l(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return h(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vg(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=jg(e),o=Vg(e);return o.add({}).next((function(u){vd("number"==typeof u);var s,c=new Qm(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Qy(e.Jt,t)})),i=n.mutations.map((function(t){return Qy(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new jp((function(e,t){return Rd(e.canonicalString(),t.canonicalString())})),p=d(r);try{for(p.s();!(s=p.n()).done;){var v=s.value,y=pm(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(y,vm))}}catch(m){p.e(m)}finally{p.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),Mm.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Vg(e).get(t).next((function(e){return e?(vd(e.userId===n.userId),rg(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?Mm.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Vg(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(vd(t.batchId>=r),a=rg(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Vg(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vg(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return rg(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=dm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return jg(e).Wt({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=fm(l);if(c===n.userId&&t.path.isEqual(h))return Vg(e).get(f).next((function(e){if(!e)throw pd();vd(e.userId===n.userId),a.push(rg(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new jp(Rd),i=[];return t.forEach((function(t){var a=dm(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=jg(e).Wt({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=fm(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Mm.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=dm(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new jp(Rd);return jg(e).Wt({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=fm(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Vg(e).get(t).next((function(e){if(null===e)throw pd();vd(e.userId===n.userId),r.push(rg(n.M,e))})))})),Mm.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Lg(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),Mm.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Mm.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return jg(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=fm(e[1]);i.push(a)}else r.done()})).next((function(){vd(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Ug(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return Bg(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return vd(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Ug(e,t,n){var r=dm(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return jg(e).Wt({range:a,jt:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function Vg(e){return Hm(e,"mutations")}function jg(e){return Hm(e,"documentMutations")}function Bg(e){return Hm(e,"mutationQueues")}var zg=function(){function e(t){l(this,e),this.mn=t}return h(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),qg=function(){function e(t,n){l(this,e),this.referenceDelegate=t,this.M=n}return h(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new zg(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return Ld.fromTimestamp(new Od(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Kg(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return vd(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Kg(e).Wt((function(o,u){var s=ig(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Mm.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Kg(e).Wt((function(e,n){var r=ig(n);t(r)}))}},{key:"pn",value:function(e){return Wg(e).get("targetGlobalKey").next((function(e){return vd(null!==e),e}))}},{key:"In",value:function(e,t){return Wg(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Kg(e).put(ag(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Wp(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Kg(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=ig(n);Gp(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Gg(e);return t.forEach((function(t){var o=sm(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Mm.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Gg(e);return Mm.forEach(t,(function(t){var a=sm(t.path);return Mm.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Gg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Gg(e),i=gy();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=fm(e[1]),a=new rp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=sm(t.path),r=IDBKeyRange.bound([n],[Pd(n)],!1,!0),i=0;return Gg(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Kg(e).get(t).next((function(e){return e?ig(e):null}))}}]),e}();function Kg(e){return Hm(e,"targets")}function Wg(e){return Hm(e,"targetGlobal")}function Gg(e){return Hm(e,"targetDocuments")}function Hg(e){return Qg.apply(this,arguments)}function Qg(){return Qg=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===md.FAILED_PRECONDITION&&t.message===Om){e.next=2;break}throw t;case 2:ld("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Qg.apply(this,arguments)}function Yg(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=Rd(r,o);return 0===c?Rd(i,u):c}var Xg=function(){function e(t){l(this,e),this.An=t,this.buffer=new jp(Yg),this.Rn=0}return h(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Yg(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),$g=function(){function e(t,n){l(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return h(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;ld("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,ne(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Bm(n.t0)){n.next=12;break}ld("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Hg(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Jg=function(){function e(t,n){l(this,e),this.Dn=t,this.params=n}return h(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Mm.resolve(Cd.A);var r=new Xg(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ld("LruGarbageCollector","Garbage collection skipped; disabled"),Mm.resolve(Pg)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ld("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Pg):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ld("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),cd()<=ue.DEBUG&&ld("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Mm.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Zg=function(){function e(t,n){l(this,e),this.db=t,this.garbageCollector=function(e,t){return new Jg(e,t)}(this,n)}return h(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return ek(e,n)}},{key:"removeReference",value:function(e,t,n){return ek(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return ek(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return Bg(e).zt((function(r){return Ug(e,r,t).next((function(e){return e&&(n=!0),Mm.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Ld.min()),Gg(e).delete([0,sm(o.path)])}))}));i.push(s)}})).next((function(){return Mm.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return ek(e,t)}},{key:"Mn",value:function(e,t){var n,r=Gg(e),i=Cd.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==Cd.A&&t(new rp(fm(n)),i),i=c,n=u):i=Cd.A})).next((function(){i!==Cd.A&&t(new rp(fm(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function ek(e,t){return Gg(e).put(function(e,t){return{targetId:0,path:sm(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var tk=function(){function e(){l(this,e),this.changes=new ly((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return h(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Sp.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Mm.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),nk=function(){function e(t){l(this,e),this.M=t}return h(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return ak(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return ak(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],eg(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Sp.newInvalidDocument(t);return ak(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ok(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:Sp.newInvalidDocument(t)};return ak(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ok(t))},(function(e,i){r={document:n.$n(t,i),size:Mg(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=hy();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=hy(),i=new Fp(rp.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,Mg(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return Mm.resolve();var r=new jp(sk);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(ok(r.first()),ok(r.last())),a=r.getIterator(),o=a.getNext();return ak(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=rp.fromSegments([].concat(ee(t.prefixPath),[t.collectionGroup,t.documentId]));o&&sk(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(ok(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),eg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ak(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=hy(),i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(rp.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=hy(),o=uk(t,n),u=uk(t,Lp.max());return ak(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(rp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new rk(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return ik(e).get("remoteDocumentGlobalKey").next((function(e){return vd(!!e),e}))}},{key:"Fn",value:function(e,t){return ik(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Gy(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=rp.fromSegments(t.noDocument.path),i=ng(t.noDocument.readTime);n=Sp.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return pd();var a=rp.fromSegments(t.unknownDocument.path),o=ng(t.unknownDocument.version);n=Sp.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Od(e[0],e[1]);return Ld.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Ld.min()))return n}return Sp.newInvalidDocument(e)}}]),e}(),rk=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new ly((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return h(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new jp((function(e,t){return Rd(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Zm(t.Kn.M,o);i=i.add(a.path.popLast());var c=Mg(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Zm(t.Kn.M,o.convertToNoDocument(Ld.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),Mm.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(tk);function ik(e){return Hm(e,"remoteDocumentGlobal")}function ak(e){return Hm(e,"remoteDocumentsV14")}function ok(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function uk(e,t){var n=t.documentKey.path.toArray();return[e,eg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function sk(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Rd(n[a],r[a]))return i;return(i=Rd(n.length,r.length))||((i=Rd(n[n.length-2],r[r.length-2]))||Rd(n[n.length-1],r[r.length-1]))}var ck=function(){function e(t){l(this,e),this.M=t}return h(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Fm("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hm,{unique:!0}),e.createObjectStore("documentMutations")}(e),lk(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Mm.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),lk(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ld.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hm,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Mm.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Sm});t.createIndex("collectionPathOverlayIndex",Cm,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Nm,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:ym});t.createIndex("documentKeyIndex",mm),t.createIndex("collectionGroupIndex",gm)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:xm}).createIndex("sequenceNumberIndex",Im,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Em}).createIndex("documentKeyIndex",Tm,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=Mg(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return Mm.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return Mm.forEach(r,(function(r){vd(r.userId===n.userId);var i=rg(t.M,r);return Lg(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new jd(n),o=function(e){return[0,sm(e)]}(a);r.push(t.get(o).next((function(n){return n?Mm.resolve():function(n){return t.put({targetId:0,path:sm(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Mm.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:_m});var n=t.store("collectionParents"),r=new Tg,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:sm(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new jd(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],fm(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=ig(r),a=ag(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new rp(jd.fromString(i.document.name).popFirst(5)):i.noDocument?rp.fromSegments(i.noDocument.path):i.unknownDocument?rp.fromSegments(i.unknownDocument.path):pd()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Mm.waitFor(r)}))}}]),e}();function lk(e){e.createObjectStore("targetDocuments",{keyPath:bm}).createIndex("documentTargetsIndex",wm,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",km,{unique:!0}),e.createObjectStore("targetGlobal")}var fk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",hk=function(){function e(t,n,r,i,a,o,u,s,c,f){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(l(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=f,this.ts=h,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new gd(md.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Zg(this,i),this.hs=n+"main",this.M=new Jm(s),this.ls=new Um(this.hs,this.ts,new ck(this.M)),this.fs=new qg(this.referenceDelegate,this.M),this.ds=function(e){return new nk(e)}(this.M),this._s=new cg,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===f&&fd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return h(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new gd(md.FAILED_PRECONDITION,fk);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Cd(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=ne(J().mark((function n(r){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=ne(J().mark((function t(n){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return pk(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(Bm(t))return ld("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ld("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return dk(e).get("owner").next((function(e){return Mm.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return pk(e).delete(this.clientId)}},{key:"vs",value:function(){var e=ne(J().mark((function e(){var t,n,r,i,a=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Hm(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Mm.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=d(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?Mm.resolve(!0):dk(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new gd(md.FAILED_PRECONDITION,fk);return!1}}return!(!t.networkEnabled||!t.inForeground)||pk(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ld("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ne(J().mark((function e(){var t=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Gm(e,Cd.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return pk(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Fg.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new Cg(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return hg.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;ld("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?Pm:13===i?Dm:12===i?Rm:11===i?Am:void pd();return this.ls.runTransaction(e,o,u,(function(i){return a=new Gm(i,r.es?r.es.next():Cd.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw fd("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new gd(md.FAILED_PRECONDITION,Om);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return dk(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new gd(md.FAILED_PRECONDITION,fk)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dk(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=dk(e);return n.get("owner").next((function(e){return t.Ps(e)?(ld("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Mm.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(fd("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!P()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ld("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return fd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(ac){fd("Failed to set zombie client id.",ac)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(ac){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Um.vt()}}]),e}();function dk(e){return Hm(e,"owner")}function pk(e){return Hm(e,"clientMetadata")}function vk(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var yk=function(){function e(t,n,r){l(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return h(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=d(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=d(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return rp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):yv(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new rp(t)).next((function(e){var t=py();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=py();return this.indexManager.getCollectionParents(e,i).next((function(o){return Mm.forEach(o,(function(o){var u=function(e,t){return new fv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=d(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=Sp.newInvalidDocument(s),r=r.insert(s,c)),Qv(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){xv(t,n)||(r=r.remove(e))})),r}))}}]),e}(),mk=function(){function e(t,n,r,i){l(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return h(e,null,[{key:"Ys",value:function(t,n){var r,i=gy(),a=gy(),o=d(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),gk=function(){function e(){l(this,e),this.Xs=!1}return h(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return Mm.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Ld.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(cd()<=ue.DEBUG&&ld("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_v(t)),i.ri(e,o,t,Pp(r,-1)))}))}},{key:"si",value:function(e,t){var n=new jp(Ev(e));return t.forEach((function(t,r){xv(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return cd()<=ue.DEBUG&&ld("QueryEngine","Using full collection scan to execute query:",_v(t)),this.Zs.Qs(e,t,Lp.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),kk=function(){function e(t,n,r,i){l(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new Fp(Rd),this.ai=new ly((function(e){return Wp(e)}),Gp),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return h(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new yk(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function bk(e,t,n,r){return new kk(e,t,n,r)}function wk(e,t){return _k.apply(this,arguments)}function _k(){return _k=ne(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yd(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=gy(),s=d(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=d(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var p,v=d(n);try{for(v.s();!(p=v.n()).done;){var y=p.value;o.push(y.batchId);var m,g=d(y.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;u=u.add(k.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){v.e(b)}finally{v.f()}return r.fi.Ks(e,u).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),_k.apply(this,arguments)}function xk(e,t){var n=yd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Mm.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);vd(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}function Ik(e){var t=yd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function Ek(e,t){var n=yd(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Kd.EMPTY_BYTE_STRING,Ld.min()).withLastLimboFreeSnapshotVersion(Ld.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=hy();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Tk(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Ld.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Mm.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ui=i,e}))}function Tk(e,t,n){var r=gy();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=hy();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Ld.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):ld("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function Sk(e,t){var n=yd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function Ck(e,t){var n=yd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,Mm.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new $m(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function Nk(e,t,n){return Ak.apply(this,arguments)}function Ak(){return Ak=ne(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=yd(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Bm(e.t1)){e.next=12;break}throw e.t1;case 12:ld("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Ak.apply(this,arguments)}function Rk(e,t,n){var r=yd(e),i=Ld.min(),a=gy();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=yd(e),i=r.ai.get(n);return void 0!==i?Mm.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,gv(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:Ld.min(),n?a:gy())})).next((function(e){return Ok(r,Iv(t),e),{documents:e,_i:a}}))}))}function Dk(e,t){var n=yd(e),r=yd(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Pk(e,t){var n=yd(e),r=n.ci.get(t)||Ld.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,Pp(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Ok(n,t,e),e}))}function Ok(e,t,n){var r=Ld.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function Lk(e,t,n,r){return Mk.apply(this,arguments)}function Mk(){return Mk=ne(J().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,p,v;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=yd(t),o=gy(),u=hy(),s=d(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.mi(l)).setReadTime(n.gi(l.metadata.readTime)),u=u.insert(f,h)}catch(y){s.e(y)}finally{s.f()}return p=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,Ck(a,function(e){return gv(dv(jd.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Tk(e,p,u).next((function(t){return p.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.fs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Mk.apply(this,arguments)}function Fk(e,t){return Uk.apply(this,arguments)}function Uk(){return Uk=ne(J().mark((function e(t,n){var r,i,a,o=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:gy(),e.next=3,Ck(t,gv(og(n.bundledQuery)));case 3:return i=e.sent,a=yd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=My(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Kd.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Uk.apply(this,arguments)}var Vk=function(){function e(t){l(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return h(e,[{key:"getBundleMetadata",value:function(e,t){return Mm.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:My(n.createTime)}),Mm.resolve()}},{key:"getNamedQuery",value:function(e,t){return Mm.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:og(e.bundledQuery),readTime:My(e.readTime)}}(t)),Mm.resolve()}}]),e}(),jk=function(){function e(){l(this,e),this.overlays=new Fp(rp.comparator),this.Ii=new Map}return h(e,[{key:"getOverlay",value:function(e,t){return Mm.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),Mm.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),Mm.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=vy(),i=t.length+1,a=new rp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Mm.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Fp((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=vy(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=vy(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Mm.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Xm(t,n));var a=this.Ii.get(t);void 0===a&&(a=gy(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),Bk=function(){function e(){l(this,e),this.Ti=new jp(zk.Ei),this.Ai=new jp(zk.Ri)}return h(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new zk(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new zk(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new rp(new jd([])),r=new zk(n,e),i=new zk(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new rp(new jd([])),n=new zk(t,e),r=new zk(t,e+1),i=gy();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new zk(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),zk=function(){function e(t,n){l(this,e),this.key=t,this.Ci=n}return h(e,null,[{key:"Ei",value:function(e,t){return rp.comparator(e.key,t.key)||Rd(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return Rd(e.Ci,t.Ci)||rp.comparator(e.key,t.key)}}]),e}(),qk=function(){function e(t,n){l(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new jp(zk.Ei)}return h(e,[{key:"checkEmpty",value:function(e){return Mm.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new Qm(i,t,n,r);this.Bs.push(a);var o,u=d(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Ni=this.Ni.add(new zk(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Mm.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Mm.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return Mm.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Mm.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return Mm.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new zk(t,0),i=new zk(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),Mm.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new jp(Rd);return t.forEach((function(e){var t=new zk(e,0),i=new zk(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),Mm.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;rp.isDocumentKey(i)||(i=i.child(""));var a=new zk(new rp(i),0),o=new jp(Rd);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),Mm.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;vd(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return Mm.forEach(t.mutations,(function(i){var a=new zk(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new zk(t,0),r=this.Ni.firstAfterOrEqual(n);return Mm.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,Mm.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),Kk=function(){function e(t){l(this,e),this.$i=t,this.docs=new Fp(rp.comparator),this.size=0}return h(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Mm.resolve(n?n.document.mutableCopy():Sp.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=hy();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Sp.newInvalidDocument(e))})),Mm.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=hy(),i=new rp(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Mp(Op(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Mm.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){pd()}},{key:"Bi",value:function(e,t){return Mm.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Wk(this)}},{key:"getSize",value:function(e){return Mm.resolve(this.size)}}]),e}(),Wk=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).Kn=e,r}return h(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),Mm.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(tk),Gk=function(){function e(t){l(this,e),this.persistence=t,this.Li=new ly((function(e){return Wp(e)}),Gp),this.lastRemoteSnapshotVersion=Ld.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Bk,this.targetCount=0,this.Ki=zg.gn()}return h(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),Mm.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Mm.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Mm.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),Mm.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),Mm.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new zg(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,Mm.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),Mm.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Mm.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Mm.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Mm.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return Mm.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),Mm.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Mm.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),Mm.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return Mm.resolve(n)}},{key:"containsKey",value:function(e,t){return Mm.resolve(this.qi.containsKey(t))}}]),e}(),Hk=function(){function e(t,n){var r=this;l(this,e),this.Gi={},this.overlays={},this.es=new Cd(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Gk(this),this.indexManager=new Eg,this.ds=new Kk((function(e){return r.referenceDelegate.Qi(e)})),this.M=new Jm(n),this._s=new Vk(this.M)}return h(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new jk,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new qk(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;ld("MemoryPersistence","Starting transaction:",e);var i=new Qk(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return Mm.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Qk=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return h(n)}(Lm),Yk=function(){function e(t){l(this,e),this.persistence=t,this.Hi=new Bk,this.Ji=null}return h(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw pd()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),Mm.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),Mm.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),Mm.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Mm.forEach(this.Xi,(function(r){var i=rp.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,Ld.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return Mm.or([function(){return Mm.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function Xk(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function $k(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Jk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Zk=function(){function e(t,n,r,i){l(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return h(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new gd(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(fd("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),eb=function(){function e(t,n,r){l(this,e),this.targetId=t,this.state=n,this.error=r}return h(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new gd(i.error.code,i.error.message))),a?new e(t,i.state,r):(fd("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),tb=function(){function e(t,n){l(this,e),this.clientId=t,this.activeTargetIds=n}return h(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=by(),o=0;i&&o<r.activeTargetIds.length;++o)i=np(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(fd("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),nb=function(){function e(t,n){l(this,e),this.clientId=t,this.onlineState=n}return h(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(fd("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),rb=function(){function e(){l(this,e),this.activeTargetIds=by()}return h(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ib=function(){function e(t,n,r,i,a){l(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Fp(Rd),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=Xk(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new rb),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return h(e,[{key:"start",value:function(){var e=ne(J().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=d(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Xk(this.persistenceKey,i)))&&(o=tb.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(u=this.storage.getItem(this.mr))&&(s=this.pr(u))&&this.Ir(s),c=d(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ur(f)}catch(p){c.e(p)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Jk(this.persistenceKey,e));if(n){var r=eb.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Jk(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ld("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ld("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ld("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ld("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void fd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(ne(J().mark((function e(){var r,i,a,o,u,s,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(u));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}s=function(e){var t=Cd.A;if(null!=e)try{var n=JSON.parse(e);vd("number"==typeof n),t=n}catch(e){fd("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Cd.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new Zk(this.currentUser,e,t,n),i=$k(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=$k(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=Jk(this.persistenceKey,e),i=new eb(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return tb.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Zk.tr(new od(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return eb.tr(r,t)}},{key:"pr",value:function(e){return nb.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:ld("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Lr(o,u).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=by();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ab=function(){function e(){l(this,e),this.Ur=new rb,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return h(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new rb,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),ob=function(){function e(){l(this,e)}return h(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),ub=function(){function e(){var t=this;l(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return h(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){ld("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=d(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){ld("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=d(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),sb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},cb=function(){function e(t){l(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return h(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),lb=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return h(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new id;o.listenOnce(Zh.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Jh.NO_ERROR:var t=o.getResponseJson();ld("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Jh.TIMEOUT:ld("Connection",'RPC "'+e+'" timed out'),a(new gd(md.DEADLINE_EXCEEDED,"Request time out"));break;case Jh.HTTP_ERROR:var n=o.getStatus();if(ld("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(md).indexOf(t)>=0?t:md.UNKNOWN}(r.status);a(new gd(u,r.message))}else a(new gd(md.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new gd(md.UNAVAILABLE,"Connection failed."));break;default:pd()}}finally{ld("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Xh(),a=$h(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new nd({})),this.lo(o.initMessageHeaders,t,n),D()||L()||R().indexOf("Electron/")>=0||M()||R().indexOf("MSAppHost/")>=0||O()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");ld("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new cb({Jr:function(e){l?ld("Connection","Not sending because WebChannel is closed:",e):(c||(ld("Connection","Opening WebChannel transport."),s.open(),c=!0),ld("Connection","WebChannel sending:",e),s.send(e))},Yr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,rd.EventType.OPEN,(function(){l||ld("Connection","WebChannel transport opened.")})),h(s,rd.EventType.CLOSE,(function(){l||(l=!0,ld("Connection","WebChannel transport closed"),f.ro())})),h(s,rd.EventType.ERROR,(function(e){l||(l=!0,hd("Connection","WebChannel transport errored:",e),f.ro(new gd(md.UNAVAILABLE,"The operation could not be completed")))})),h(s,rd.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];vd(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){ld("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=ry[e];if(void 0!==t)return cy(t)}(a),u=i.message;void 0===o&&(o=md.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.ro(new gd(o,u)),s.close()}else ld("Connection","WebChannel received:",n),f.oo(n)}})),h(a,ed.STAT_EVENT,(function(e){e.stat===td.PROXY?ld("Connection","Detected buffering proxy"):e.stat===td.NOPROXY&&ld("Connection","Detected no buffering proxy")})),setTimeout((function(){f.io()}),0),f}}]),n}(function(){function e(t){l(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return h(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);ld("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return ld("RestConnection","Received: ",e),e}),(function(t){throw hd("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ud,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=sb[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function fb(){return"undefined"!=typeof window?window:null}function hb(){return"undefined"!=typeof document?document:null}function db(e){return new Dy(e,!0)}var pb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;l(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return h(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&ld("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),vb=function(){function e(t,n,r,i,a,o,u,s){l(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new pb(t,n)}return h(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===md.RESOURCE_EXHAUSTED?(fd(n.toString()),fd("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===md.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new gd(md.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(ne(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return ld("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(ld("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),yb=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return h(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:pd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(vd(void 0===t||"string"==typeof t),Kd.fromBase64String(t||"")):(vd(void 0===t||t instanceof Uint8Array),Kd.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?md.UNKNOWN:cy(e.code);return new gd(t,e.message||"")}(o);n=new Ey(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=jy(e,s.document.name),l=My(s.document.updateTime),f=new Ep({mapValue:{fields:s.document.fields}}),h=Sp.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new xy(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=jy(e,v.document),m=v.readTime?My(v.readTime):Ld.min(),g=Sp.newNoDocument(y,m),k=v.removedTargetIds||[];n=new xy([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=jy(e,b.document),_=b.removedTargetIds||[];n=new xy([],_,w,null)}else{if(!("filter"in t))return pd();t.filter;var x=t.filter;x.targetId;var I=x.count||0,E=new uy(I),T=x.targetId;n=new Iy(T,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Ld.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ld.min():t.readTime?My(t.readTime):Ld.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=qy(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Hp(r)?{documents:Xy(e,r)}:{query:$y(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Oy(e,t.resumeToken):t.snapshotVersion.compareTo(Ld.min())>0&&(n.readTime=Py(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=qy(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(vb),mb=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.Yo=!1,s}return h(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,At(m(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(vd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(vd(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?My(e.updateTime):My(t);return n.isEqual(Ld.min())&&(n=My(t)),new qv(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=My(e.commitTime);return this.listener.tu(n,t)}return vd(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=qy(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Qy(t.M,e)}))};this.Lo(n)}}]),n}(vb),gb=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return h(n,[{key:"iu",value:function(){if(this.su)throw new gd(md.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.So.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===md.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new gd(md.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.So._o(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===md.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new gd(md.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return h((function e(){l(this,e)}))}()),kb=function(){function e(t,n){l(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return h(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(fd(t),this.uu=!1):ld("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),bb=h((function e(t,n,r,i,a){var o=this;l(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr((function(e){r.enqueueAndForget(ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Rb(o),!e.t0){e.next=5;break}return ld("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=yd(t)).wu.add(4),e.next=4,xb(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,wb(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new kb(r,i)}));function wb(e){return _b.apply(this,arguments)}function _b(){return _b=ne(J().mark((function e(t){var n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Rb(t)){e.next=18;break}n=d(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),_b.apply(this,arguments)}function xb(e){return Ib.apply(this,arguments)}function Ib(){return Ib=ne(J().mark((function e(t){var n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Ib.apply(this,arguments)}function Eb(e,t){var n=yd(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),Ab(n)?Nb(n):ow(n).Mo()&&Sb(n,t))}function Tb(e,t){var n=yd(e),r=ow(n);n._u.delete(t),r.Mo()&&Cb(n,t),0===n._u.size&&(r.Mo()?r.$o():Rb(n)&&n.yu.set("Unknown"))}function Sb(e,t){e.pu.Z(t.targetId),ow(e).Ho(t)}function Cb(e,t){e.pu.Z(t),ow(e).Jo(t)}function Nb(e){e.pu=new Sy({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),ow(e).start(),e.yu.au()}function Ab(e){return Rb(e)&&!ow(e).ko()&&e._u.size>0}function Rb(e){return 0===yd(e).wu.size}function Db(e){e.pu=void 0}function Pb(e){return Ob.apply(this,arguments)}function Ob(){return Ob=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){Sb(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Ob.apply(this,arguments)}function Lb(e,t){return Mb.apply(this,arguments)}function Mb(){return Mb=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Db(t),Ab(t)?(t.yu.lu(n),Nb(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Mb.apply(this,arguments)}function Fb(e,t,n){return Ub.apply(this,arguments)}function Ub(){return Ub=ne(J().mark((function e(t,n,r){var i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof Ey&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ne(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=d(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ld("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Vb(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof xy?t.pu.ut(n):n instanceof Iy?t.pu._t(n):t.pu.ht(n),r.isEqual(Ld.min())){e.next=29;break}return e.prev=14,e.next=17,Ik(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(Kd.EMPTY_BYTE_STRING,n.snapshotVersion)),Cb(e,t);var r=new $m(n.target,t,1,n.sequenceNumber);Sb(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ld("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Vb(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Ub.apply(this,arguments)}function Vb(e,t,n){return jb.apply(this,arguments)}function jb(){return jb=ne(J().mark((function e(t,n,r){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Bm(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,xb(t);case 5:t.yu.set("Offline"),r||(r=function(){return Ik(t.localStore)}),t.asyncQueue.enqueueRetryable(ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ld("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,wb(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),jb.apply(this,arguments)}function Bb(e,t){return t().catch((function(n){return Vb(e,n,t)}))}function zb(e){return qb.apply(this,arguments)}function qb(){return qb=ne(J().mark((function e(t){var n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=yd(t),r=uw(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!Kb(n)){e.next=19;break}return e.prev=3,e.next=6,Sk(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,Wb(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Vb(n,e.t0);case 17:e.next=2;break;case 19:Gb(n)&&Hb(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),qb.apply(this,arguments)}function Kb(e){return Rb(e)&&e.du.length<10}function Wb(e,t){e.du.push(t);var n=uw(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function Gb(e){return Rb(e)&&!uw(e).ko()&&e.du.length>0}function Hb(e){uw(e).start()}function Qb(e){return Yb.apply(this,arguments)}function Yb(){return Yb=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:uw(t).nu();case 1:case"end":return e.stop()}}),e)}))),Yb.apply(this,arguments)}function Xb(e){return $b.apply(this,arguments)}function $b(){return $b=ne(J().mark((function e(t){var n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=uw(t),r=d(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),$b.apply(this,arguments)}function Jb(e,t,n){return Zb.apply(this,arguments)}function Zb(){return Zb=ne(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=Ym.from(i,n,r),e.next=3,Bb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,zb(t);case 5:case"end":return e.stop()}}),e)}))),Zb.apply(this,arguments)}function ew(e,t){return tw.apply(this,arguments)}function tw(){return tw=ne(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&uw(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=ne(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!sy(i=n.code)||i===md.ABORTED){e.next=7;break}return r=t.du.shift(),uw(t).Fo(),e.next=5,Bb(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,zb(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Gb(t)&&Hb(t);case 5:case"end":return e.stop()}}),e)}))),tw.apply(this,arguments)}function nw(e,t){return rw.apply(this,arguments)}function rw(){return rw=ne(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=yd(t)).asyncQueue.verifyOperationInProgress(),ld("RemoteStore","RemoteStore received new credentials"),i=Rb(r),r.wu.add(3),e.next=6,xb(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,wb(r);case 12:case"end":return e.stop()}}),e)}))),rw.apply(this,arguments)}function iw(e,t){return aw.apply(this,arguments)}function aw(){return aw=ne(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yd(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,wb(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,xb(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),aw.apply(this,arguments)}function ow(e){return e.Iu||(e.Iu=function(e,t,n){var r=yd(e);return r.iu(),new yb(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Pb.bind(null,e),eo:Lb.bind(null,e),zo:Fb.bind(null,e)}),e.mu.push(function(){var t=ne(J().mark((function t(n){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),Ab(e)?Nb(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:Db(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function uw(e){return e.Tu||(e.Tu=function(e,t,n){var r=yd(e);return r.iu(),new mb(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Qb.bind(null,e),eo:ew.bind(null,e),eu:Xb.bind(null,e),tu:Jb.bind(null,e)}),e.mu.push(function(){var t=ne(J().mark((function t(n){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,zb(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(ld("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var sw=function(){function e(t,n,r,i,a){l(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new kd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return h(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gd(md.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function cw(e,t){if(fd("AsyncQueue","".concat(t,": ").concat(e)),Bm(e))return new gd(md.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var lw=function(){function e(t){l(this,e),this.comparator=t?function(e,n){return t(e,n)||rp.comparator(e.key,n.key)}:function(e,t){return rp.comparator(e.key,t.key)},this.keyedMap=py(),this.sortedSet=new Fp(this.comparator)}return h(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),fw=function(){function e(){l(this,e),this.Eu=new Fp(rp.comparator)}return h(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):pd():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),hw=function(){function e(t,n,r,i,a,o,u,s){l(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return h(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,lw.emptySet(n),a,r,i,!0,!1)}}]),e}(),dw=h((function e(){l(this,e),this.Ru=void 0,this.listeners=[]})),pw=h((function e(){l(this,e),this.queries=new ly((function(e){return wv(e)}),bv),this.onlineState="Unknown",this.bu=new Set}));function vw(e,t){return yw.apply(this,arguments)}function yw(){return yw=ne(J().mark((function e(t,n){var r,i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yd(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new dw),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=cw(e.t0,"Initialization of query '".concat(_v(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&ww(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),yw.apply(this,arguments)}function mw(e,t){return gw.apply(this,arguments)}function gw(){return gw=ne(J().mark((function e(t,n){var r,i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yd(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),gw.apply(this,arguments)}function kw(e,t){var n,r=yd(e),i=!1,a=d(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=d(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&ww(r)}function bw(e,t,n){var r=yd(e),i=r.queries.get(t);if(i){var a,o=d(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function ww(e){e.bu.forEach((function(e){e.next()}))}var _w=function(){function e(t,n,r){l(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return h(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=d(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new hw(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=hw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),xw=function(){function e(t,n){l(this,e),this.payload=t,this.byteLength=n}return h(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),Iw=function(){function e(t){l(this,e),this.M=t}return h(e,[{key:"wi",value:function(e){return jy(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?Gy(this.M,e.document,!1):Sp.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return My(e)}}]),e}(),Ew=function(){function e(t,n,r){l(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Tw(t)}return h(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=jd.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new Iw(this.M),i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.wi(a.metadata.name),s=d(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||gy()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ne(J().mark((function e(){var t,n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lk(this.localStore,new Iw(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=d(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Fk(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Tw(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Sw=h((function e(t){l(this,e),this.key=t})),Cw=h((function e(t){l(this,e),this.key=t})),Nw=function(){function e(t,n){l(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=gy(),this.mutatedKeys=gy(),this.Gu=Ev(t),this.Qu=new lw(this.Gu)}return h(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new fw,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=xv(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pd()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new hw(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new fw,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=gy(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Cw(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new Sw(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=gy();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return hw.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),Aw=h((function e(t,n,r){l(this,e),this.query=t,this.targetId=n,this.view=r})),Rw=h((function e(t){l(this,e),this.key=t,this.na=!1})),Dw=function(){function e(t,n,r,i,a,o){l(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new ly((function(e){return wv(e)}),bv),this.ra=new Map,this.oa=new Set,this.ua=new Fp(rp.comparator),this.aa=new Map,this.ca=new Bk,this.ha={},this.la=new Map,this.fa=zg.yn(),this.onlineState="Unknown",this.da=void 0}return h(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function Pw(e,t){return Ow.apply(this,arguments)}function Ow(){return Ow=ne(J().mark((function e(t,n){var r,i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=T_(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,Ck(r.localStore,gv(n));case 8:return u=e.sent,r.isPrimaryClient&&Eb(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Lw(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Ow.apply(this,arguments)}function Lw(e,t,n,r){return Mw.apply(this,arguments)}function Mw(){return Mw=ne(J().mark((function e(t,n,r,i){var a,o,u,s,c,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=ne(J().mark((function e(t,n,r,i){var a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,Rk(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(n_(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Rk(t.localStore,n,!0);case 3:return a=e.sent,o=new Nw(n,a._i),u=o.Wu(a.documents),s=_y.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),n_(t,r,c.Xu),l=new Aw(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Mw.apply(this,arguments)}function Fw(e,t){return Uw.apply(this,arguments)}function Uw(){return Uw=ne(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yd(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!bv(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Nk(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Tb(r.remoteStore,i.targetId),e_(r,i.targetId)})).catch(Hg);case 9:e.next=14;break;case 11:return e_(r,i.targetId),e.next=14,Nk(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Uw.apply(this,arguments)}function Vw(e,t,n){return jw.apply(this,arguments)}function jw(){return jw=ne(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=S_(t),e.prev=1,e.next=4,function(e,t){var n,r=yd(e),i=Od.now(),a=t.reduce((function(e,t){return e.add(t.key)}),gy());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,u=[],s=d(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Yv(c,n.get(c.key));null!=l&&u.push(new Zv(c.key,l,Tp(l.value.mapValue),Kv.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new Fp(Rd)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,a_(i,a.changes);case 9:return e.next=11,zb(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=cw(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),jw.apply(this,arguments)}function Bw(e,t){return zw.apply(this,arguments)}function zw(){return zw=ne(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yd(t),e.prev=1,e.next=4,Ek(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(vd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?vd(n.na):e.removedDocuments.size>0&&(vd(n.na),n.na=!1))})),e.next=8,a_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Hg(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),zw.apply(this,arguments)}function qw(e,t,n){var r=yd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=yd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=d(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&ww(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Kw(e,t,n){return Ww.apply(this,arguments)}function Ww(){return Ww=ne(J().mark((function e(t,n,r){var i,a,o,u,s,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=yd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Fp(rp.comparator)).insert(o,Sp.newNoDocument(o,Ld.min())),s=gy().add(o),c=new wy(Ld.min(),new Map,new jp(Rd),u,s),e.next=9,Bw(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),i_(i),e.next=16;break;case 14:return e.next=16,Nk(i.localStore,n,!1).then((function(){return e_(i,n,r)})).catch(Hg);case 16:case"end":return e.stop()}}),e)}))),Ww.apply(this,arguments)}function Gw(e,t){return Hw.apply(this,arguments)}function Hw(){return Hw=ne(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yd(t),i=n.batch.batchId,e.prev=1,e.next=4,xk(r.localStore,n);case 4:return a=e.sent,Zw(r,i,null),Jw(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,a_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Hg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Hw.apply(this,arguments)}function Qw(e,t,n){return Yw.apply(this,arguments)}function Yw(){return Yw=ne(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yd(t),e.prev=1,e.next=4,function(e,t){var n=yd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return vd(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Zw(i,n,r),Jw(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,a_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Hg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Yw.apply(this,arguments)}function Xw(e,t){return $w.apply(this,arguments)}function $w(){return $w=ne(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rb((r=yd(t)).remoteStore)||ld("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=yd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=cw(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),$w.apply(this,arguments)}function Jw(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function Zw(e,t,n){var r=yd(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function e_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=d(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||t_(e,t)}))}function t_(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(Tb(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),i_(e))}function n_(e,t,n){var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Sw?(e.ca.addReference(a.key,t),r_(e,a)):a instanceof Cw?(ld("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||t_(e,a.key)):pd()}}catch(o){i.e(o)}finally{i.f()}}function r_(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(ld("SyncEngine","New document in limbo: "+n),e.oa.add(r),i_(e))}function i_(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new rp(jd.fromString(t)),r=e.fa.next();e.aa.set(r,new Rw(n)),e.ua=e.ua.insert(n,r),Eb(e.remoteStore,new $m(gv(dv(n.path)),r,2,Cd.A))}}function a_(e,t,n){return o_.apply(this,arguments)}function o_(){return o_=ne(J().mark((function e(t,n,r){var i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=yd(t),a=[],o=[],u=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){u.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=mk.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sa.zo(a),e.next=9,function(){var e=ne(J().mark((function e(t,n){var r,i,a,o,u,s,c,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Mm.forEach(n,(function(t){return Mm.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Mm.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Bm(e.t0)){e.next=10;break}throw e.t0;case 10:ld("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=d(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),o_.apply(this,arguments)}function u_(e,t){return s_.apply(this,arguments)}function s_(){return s_=ne(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=yd(t)).currentUser.isEqual(n)){e.next=11;break}return ld("SyncEngine","User change. New user:",n.toKey()),e.next=5,wk(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new gd(md.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,a_(r,i.di);case 11:case"end":return e.stop()}}),e)}))),s_.apply(this,arguments)}function c_(e,t){var n=yd(e),r=n.aa.get(t);if(r&&r.na)return gy().add(r.key);var i=gy(),a=n.ra.get(t);if(!a)return i;var o,u=d(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ia.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function l_(e,t){return f_.apply(this,arguments)}function f_(){return f_=ne(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yd(t),e.next=3,Rk(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&n_(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),f_.apply(this,arguments)}function h_(e,t){return d_.apply(this,arguments)}function d_(){return d_=ne(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yd(t),e.abrupt("return",Pk(r.localStore,n).then((function(e){return a_(r,e)})));case 2:case"end":return e.stop()}}),e)}))),d_.apply(this,arguments)}function p_(e,t,n,r){return v_.apply(this,arguments)}function v_(){return v_=ne(J().mark((function e(t,n,r,i){var a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=yd(t),e.next=3,function(e,t){var n=yd(e),r=yd(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):Mm.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,zb(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Zw(a,n,i||null),Jw(a,n),function(e,t){yd(yd(e).Bs)._n(t)}(a.localStore,n)):pd();case 11:return e.next=13,a_(a,o);case 13:e.next=16;break;case 15:ld("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),v_.apply(this,arguments)}function y_(e,t){return m_.apply(this,arguments)}function m_(){return m_=ne(J().mark((function e(t,n){var r,i,a,o,u,s,c,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T_(r=yd(t)),S_(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,g_(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,iw(r.remoteStore,!0);case 9:o=d(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Eb(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],l=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return e_(r,t),Nk(r.localStore,t,!0)})),Tb(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,g_(r,c);case 21:return function(e){var t=yd(e);t.aa.forEach((function(e,n){Tb(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new Fp(rp.comparator)}(r),r.da=!1,e.next=25,iw(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),m_.apply(this,arguments)}function g_(e,t,n){return k_.apply(this,arguments)}function k_(){return k_=ne(J().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,p,v,y,m,g;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=yd(t),a=[],o=[],u=d(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ra.get(c))||0===f.length){e.next=34;break}return e.next=11,Ck(i.localStore,gv(f[0]));case 11:l=e.sent,h=d(f),e.prev=13,h.s();case 15:if((p=h.n()).done){e.next=24;break}return v=p.value,y=i.ia.get(v),e.next=20,l_(i,y);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Dk(i.localStore,c);case 36:return g=e.sent,e.next=39,Ck(i.localStore,g);case 39:return l=e.sent,e.next=42,Lw(i,b_(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),k_.apply(this,arguments)}function b_(e){return hv(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function w_(e){var t=yd(e);return yd(yd(t.localStore).persistence).Fs()}function __(e,t,n,r){return x_.apply(this,arguments)}function x_(){return x_=ne(J().mark((function e(t,n,r,i){var a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=yd(t)).da){e.next=3;break}return e.abrupt("return",void ld("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Pk(a.localStore,Iv(o[0]));case 10:return u=e.sent,s=wy.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,a_(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Nk(a.localStore,n,!0);case 17:return e_(a,n,i),e.abrupt("break",20);case 19:pd();case 20:case"end":return e.stop()}}),e)}))),x_.apply(this,arguments)}function I_(e,t,n){return E_.apply(this,arguments)}function E_(){return E_=ne(J().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=T_(t)).da){e.next=45;break}a=d(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ra.has(u)){e.next=10;break}return ld("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Dk(i.localStore,u);case 12:return s=e.sent,e.next=15,Ck(i.localStore,s);case 15:return c=e.sent,e.next=18,Lw(i,b_(s),c.targetId,!1);case 18:Eb(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=d(r),e.prev=30,h=J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,Nk(i.localStore,t,!1).then((function(){Tb(i.remoteStore,t),e_(i,t)})).catch(Hg);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),E_.apply(this,arguments)}function T_(e){var t=yd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=c_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Kw.bind(null,t),t.sa.zo=kw.bind(null,t.eventManager),t.sa.wa=bw.bind(null,t.eventManager),t}function S_(e){var t=yd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Gw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Qw.bind(null,t),t}function C_(e,t,n){var r=yd(e);(function(){var e=ne(J().mark((function e(t,n,r){var i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=yd(e),r=My(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Tw(i)),a=new Ew(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,a_(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=yd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(hd("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var N_=function(){function e(){l(this,e),this.synchronizeTabs=!1}return h(e,[{key:"initialize",value:function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=db(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return bk(this.persistence,new gk,e.initialUser,this.M)}},{key:"ya",value:function(e){return new Hk(Yk.Yi,this.M)}},{key:"ga",value:function(e){return new ab}},{key:"terminate",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),A_=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return h(n,[{key:"initialize",value:function(){var e=ne(J().mark((function e(t){var r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(m(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,S_(this.Ta.syncEngine);case 6:return e.next=8,zb(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){return bk(this.persistence,new gk,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new $g(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=vk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Og.withCacheSize(this.cacheSizeBytes):Og.DEFAULT;return new hk(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,fb(),hb(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new ab}}]),n}(N_),R_=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return h(n,[{key:"initialize",value:function(){var e=ne(J().mark((function e(t){var r,i=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(m(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof ib,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:p_.bind(null,r),Br:__.bind(null,r),Lr:I_.bind(null,r),Fs:w_.bind(null,r),Fr:h_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y_(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){var t=fb();if(!ib.vt(t))throw new gd(md.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=vk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ib(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(A_),D_=function(){function e(){l(this,e)}return h(e,[{key:"initialize",value:function(){var e=ne(J().mark((function e(t,n){var r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return qw(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=u_.bind(null,this.syncEngine),e.next=12,iw(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new pw}},{key:"createDatastore",value:function(e){var t,n=db(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new lb(t));return function(e,t,n,r){return new gb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return qw(o.syncEngine,e,0)},a=ub.vt()?new ub:new ob,new bb(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Dw(e,t,n,r,i,a);return o&&(u.da=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=yd(t),ld("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,xb(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function P_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ne(J().mark((function r(){var i;return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var O_=function(){function e(t){l(this,e),this.observer=t,this.muted=!1}return h(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),L_=function(){function e(t,n){var r=this;l(this,e),this.Ra=t,this.M=n,this.metadata=new kd,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return h(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ma",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){var e=ne(J().mark((function e(){var t,n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new xw(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=ne(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Da()<0)){e.next=7;break}return e.next=3,this.Ca();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=ne(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),M_=function(){function e(t){l(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return h(e,[{key:"lookup",value:function(){var e=ne(J().mark((function e(t){var n,r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new gd(md.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ne(J().mark((function e(t,n){var r,i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yd(t),i=qy(r.M)+"/documents",a={documents:n.map((function(e){return Vy(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Hy(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());vd(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new ay(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ne(J().mark((function e(){var t,n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=rp.fromPath(t);n.mutations.push(new oy(r,n.precondition(r)))})),e.next=7,function(){var e=ne(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yd(t),i=qy(r.M)+"/documents",a={writes:n.map((function(e){return Qy(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pd();t=Ld.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new gd(md.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Kv.updateTime(t):Kv.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ld.min()))throw new gd(md.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kv.updateTime(t)}return Kv.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),F_=function(){function e(t,n,r,i,a){l(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new pb(this.asyncQueue,"transaction_retry")}return h(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(ne(J().mark((function t(){var n,r;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new M_(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!ep(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!sy(t)}return!1}}]),e}(),U_=function(){function e(t,n,r,i){var a=this;l(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=od.UNAUTHENTICATED,this.clientId=Ad.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ld("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ld("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return h(e,[{key:"getConfiguration",value:function(){var e=ne(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new gd(md.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new kd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ne(J().mark((function n(){var r;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=cw(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function V_(e,t){return j_.apply(this,arguments)}function j_(){return j_=ne(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ld("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,wk(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),j_.apply(this,arguments)}function B_(e,t){return z_.apply(this,arguments)}function z_(){return z_=ne(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,q_(t);case 3:return r=e.sent,ld("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return nw(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return nw(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),z_.apply(this,arguments)}function q_(e){return K_.apply(this,arguments)}function K_(){return K_=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ld("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,V_(t,new N_);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),K_.apply(this,arguments)}function W_(e){return G_.apply(this,arguments)}function G_(){return G_=ne(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ld("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,B_(t,new D_);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),G_.apply(this,arguments)}function H_(e){return q_(e).then((function(e){return e.persistence}))}function Q_(e){return q_(e).then((function(e){return e.localStore}))}function Y_(e){return W_(e).then((function(e){return e.remoteStore}))}function X_(e){return W_(e).then((function(e){return e.syncEngine}))}function $_(e){return J_.apply(this,arguments)}function J_(){return J_=ne(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W_(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Pw.bind(null,n.syncEngine),r.onUnlisten=Fw.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),J_.apply(this,arguments)}function Z_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new kd;return e.asyncQueue.enqueueAndForget(ne(J().mark((function i(){return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new O_({next:function(a){t.enqueueAndForget((function(){return mw(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new gd(md.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new gd(md.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new _w(dv(n.path),a,{includeMetadataChanges:!0,ku:!0});return vw(e,o)},i.next=3,$_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function ex(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new kd;return e.asyncQueue.enqueueAndForget(ne(J().mark((function i(){return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new O_({next:function(n){t.enqueueAndForget((function(){return mw(e,o)})),n.fromCache&&"server"===r.source?i.reject(new gd(md.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new _w(n,a,{includeMetadataChanges:!0,ku:!0});return vw(e,o)},i.next=3,$_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var tx=new Map;function nx(e,t,n){if(!n)throw new gd(md.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function rx(e,t,n,r){if(!0===t&&!0===r)throw new gd(md.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function ix(e){if(!rp.isDocumentKey(e))throw new gd(md.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ax(e){if(rp.isDocumentKey(e))throw new gd(md.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ox(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":pd()}function ux(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new gd(md.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ox(e);throw new gd(md.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function sx(e,t){if(t<=0)throw new gd(md.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var cx=function(){function e(t){var n;if(l(this,e),void 0===t.host){if(void 0!==t.ssl)throw new gd(md.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new gd(md.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,rx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return h(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),lx=function(){function e(t,n,r){l(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cx({}),this._settingsFrozen=!1,t instanceof Zd?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new gd(md.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zd(e.options.projectId)}(t))}return h(e,[{key:"app",get:function(){if(!this._app)throw new gd(md.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new gd(md.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cx(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new wd;switch(e.type){case"gapi":var t=e.client;return vd(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Ed(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new gd(md.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=tx.get(e);t&&(ld("ComponentProvider","Removing Datastore"),tx.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function fx(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=ux(e,lx))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&hd("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=od.MOCK_USER;else{o=A(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new gd(md.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new od(s)}e._authCredentials=new _d(new bd(o,u))}}var hx=function(){function e(t,n,r){l(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return h(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new px(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),dx=function(){function e(t,n,r){l(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return h(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),px=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,e,r,dv(i)))._path=i,a.type="collection",a}return h(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new hx(this.firestore,null,new rp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(dx);function vx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$(e),nx("collection","path",t),e instanceof lx){var a=jd.fromString.apply(jd,[t].concat(r));return ax(a),new px(e,null,a)}if(!(e instanceof hx||e instanceof px))throw new gd(md.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(jd.fromString.apply(jd,[t].concat(r)));return ax(o),new px(e.firestore,null,o)}function yx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$(e),1===arguments.length&&(t=Ad.R()),nx("doc","path",t),e instanceof lx){var a=jd.fromString.apply(jd,[t].concat(r));return ix(a),new hx(e,null,new rp(a))}if(!(e instanceof hx||e instanceof px))throw new gd(md.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(jd.fromString.apply(jd,[t].concat(r)));return ix(o),new hx(e.firestore,e instanceof px?e.converter:null,new rp(o))}function mx(e,t){return e=$(e),t=$(t),(e instanceof hx||e instanceof px)&&(t instanceof hx||t instanceof px)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function gx(e,t){return e=$(e),t=$(t),e instanceof dx&&t instanceof dx&&e.firestore===t.firestore&&bv(e._query,t._query)&&e.converter===t.converter}var kx=function(){function e(){var t=this;l(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new pb(this,"async_queue_retry"),this.Qa=function(){var e=hb();e&&ld("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=hb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return h(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=hb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new kd;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=ne(J().mark((function e(){var t=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Bm(e.t0)){e.next=12;break}throw e.t0;case 12:ld("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw fd("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=sw.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&pd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=ne(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=d(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=d(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function bx(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=d(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var wx=function(){function e(){l(this,e),this._progressObserver={},this._taskCompletionResolver=new kd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return h(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),_x=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new kx,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return h(n,[{key:"_terminate",value:function(){return this._firestoreClient||Ix(this),this._firestoreClient.terminate()}}]),n}(lx);function xx(e){return e._firestoreClient||Ix(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ix(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Jd(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new U_(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Ex(e,t,n){var r=new kd;return e.asyncQueue.enqueue(ne(J().mark((function i(){return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,V_(e,n);case 3:return i.next=5,B_(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===md.FAILED_PRECONDITION||e.code===md.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Tx(e){return function(e){return e.asyncQueue.enqueue(ne(J().mark((function t(){var n,r;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H_(e);case 2:return n=t.sent,t.next=5,Y_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=yd(e);return t.wu.delete(0),wb(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(xx(e=ux(e,_x)))}function Sx(e){return function(e){return e.asyncQueue.enqueue(ne(J().mark((function t(){var n,r;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H_(e);case 2:return n=t.sent,t.next=5,Y_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=yd(t)).wu.add(0),e.next=4,xb(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(xx(e=ux(e,_x)))}function Cx(e,t){var n=xx(e=ux(e,_x)),r=new wx;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new L_(e,t)}(function(e,t){if(e instanceof Uint8Array)return P_(e,t);if(e instanceof ArrayBuffer)return P_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,db(t));e.asyncQueue.enqueueAndForget(ne(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=C_,t.next=3,X_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Nx(e,t){return function(e,t){return e.asyncQueue.enqueue(ne(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=yd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,Q_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(xx(e=ux(e,_x)),t).then((function(t){return t?new dx(e,null,t.query):null}))}function Ax(e){if(e._initialized||e._terminated)throw new gd(md.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Rx=function(){function e(){l(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new gd(md.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zd(n)}return h(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Dx=function(){function e(t){l(this,e),this._byteString=t}return h(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Kd.fromBase64String(t))}catch(t){throw new gd(md.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Kd.fromUint8Array(t))}}]),e}(),Px=h((function e(t){l(this,e),this._methodName=t})),Ox=function(){function e(t,n){if(l(this,e),!isFinite(t)||t<-90||t>90)throw new gd(md.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new gd(md.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return h(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Rd(this._lat,e._lat)||Rd(this._long,e._long)}}]),e}(),Lx=/^__.*__$/,Mx=function(){function e(t,n,r){l(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return h(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Zv(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jv(e,this.data,t,this.fieldTransforms)}}]),e}(),Fx=function(){function e(t,n,r){l(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return h(e,[{key:"toMutation",value:function(e,t){return new Zv(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Ux(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pd()}}var Vx=function(){function e(t,n,r,i,a,o){l(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return h(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return aI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Ux(this.ec)&&Lx.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),jx=function(){function e(t,n,r){l(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||db(t)}return h(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Vx({ec:e,methodName:t,hc:n,path:zd.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function Bx(e){var t=e._freezeSettings(),n=db(e._databaseId);return new jx(e._databaseId,!!t.ignoreUndefinedProperties,n)}function zx(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);tI("Data must be an object, but it was:",o,r);var u,s,c=Zx(r,o);if(a.merge)u=new qd(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=d(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var p=l.value,v=nI(t,p,n);if(!o.contains(v))throw new gd(md.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));oI(f,v)||f.push(v)}}catch(y){h.e(y)}finally{h.f()}u=new qd(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Mx(new Ep(c),u,s)}var qx=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Px);function Kx(e,t,n){return new Vx({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var Wx=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"_toFieldTransform",value:function(e){return new zv(e.path,new Ov)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Px),Gx=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).fc=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=Kx(this,e,!0),n=this.fc.map((function(e){return Jx(e,t)})),r=new Lv(n);return new zv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Px),Hx=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).fc=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=Kx(this,e,!0),n=this.fc.map((function(e){return Jx(e,t)})),r=new Fv(n);return new zv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Px),Qx=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).dc=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=new Vv(e.M,Nv(e.M,this.dc));return new zv(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Px);function Yx(e,t,n,r){var i=e.lc(1,t,n);tI("Data must be an object, but it was:",i,r);var a=[],o=Ep.empty();Fd(r,(function(e,r){var u=iI(t,e,n);r=$(r);var s=i.oc(u);if(r instanceof qx)a.push(u);else{var c=Jx(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new qd(a);return new Fx(o,u,i.fieldTransforms)}function Xx(e,t,n,r,i,a){var o=e.lc(1,t,n),u=[nI(t,r,n)],s=[i];if(a.length%2!=0)throw new gd(md.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(nI(t,a[c])),s.push(a[c+1]);for(var l=[],f=Ep.empty(),h=u.length-1;h>=0;--h)if(!oI(l,u[h])){var d=u[h],p=s[h];p=$(p);var v=o.oc(d);if(p instanceof qx)l.push(d);else{var y=Jx(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new qd(l);return new Fx(f,m,o.fieldTransforms)}function $x(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Jx(n,e.lc(r?4:3,t))}function Jx(e,t){if(eI(e=$(e)))return tI("Unsupported field value:",t,e),Zx(e,t);if(e instanceof Px)return function(e,t){if(!Ux(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=d(e);try{for(a.s();!(n=a.n()).done;){var o=Jx(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=$(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Nv(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Od.fromDate(e);return{timestampValue:Py(t.M,n)}}if(e instanceof Od){var r=new Od(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Py(t.M,r)}}if(e instanceof Ox)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Dx)return{bytesValue:Oy(t.M,e._byteString)};if(e instanceof hx){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Fy(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(ox(e)))}(e,t)}function Zx(e,t){var n={};return Ud(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fd(e,(function(e,r){var i=Jx(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function eI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Od||e instanceof Ox||e instanceof Dx||e instanceof hx||e instanceof Px)}function tI(e,t,n){if(!eI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=ox(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function nI(e,t,n){if((t=$(t))instanceof Rx)return t._internalPath;if("string"==typeof t)return iI(e,t);throw aI("Field path arguments must be of type string or ",e,!1,void 0,n)}var rI=new RegExp("[~\\*/\\[\\]]");function iI(e,t,n){if(t.search(rI)>=0)throw aI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return _(Rx,ee(t.split(".")))._internalPath}catch(r){throw aI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function aI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new gd(md.INVALID_ARGUMENT,u+e+s)}function oI(e,t){return e.some((function(e){return e.isEqual(t)}))}var uI=function(){function e(t,n,r,i,a){l(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return h(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new hx(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new sI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(cI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),sI=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"data",value:function(){return At(m(n.prototype),"data",this).call(this)}}]),n}(uI);function cI(e,t){return"string"==typeof t?iI(e,t):t instanceof Rx?t._internalPath:t._delegate._internalPath}var lI=function(){function e(t,n){l(this,e),this.hasPendingWrites=t,this.fromCache=n}return h(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),fI=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return h(n,[{key:"exists",value:function(){return At(m(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new hI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(cI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(uI),hI=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return At(m(n.prototype),"data",this).call(this,e)}}]),n}(fI),dI=function(){function e(t,n,r,i){l(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new lI(i.hasPendingWrites,i.fromCache),this.query=r}return h(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new hI(n._firestore,n._userDataWriter,r.key,r,new lI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new gd(md.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new hI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new hI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:pI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function pI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pd()}}function vI(e,t){return e instanceof fI&&t instanceof fI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof dI&&t instanceof dI&&e._firestore===t._firestore&&gx(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function yI(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new gd(md.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var mI=h((function e(){l(this,e)}));function gI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var kI=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return h(n,[{key:"_apply",value:function(e){var t=Bx(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new gd(md.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){AI(o,a);var s,c=[],l=d(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(NI(r,e,f))}}catch(p){l.e(p)}finally{l.f()}u={arrayValue:{values:c}}}else u=NI(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||AI(o,a),u=$x(n,"where",o,"in"===a||"not-in"===a);var h=$p.create(i,a,u);return function(e,t){if(t.S()){var n=vv(e);if(null!==n&&!n.isEqual(t.field))throw new gd(md.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=pv(e);null!==r&&RI(e,t.field,r)}var i=function(e,t){var n,r=d(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(p){r.e(p)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new gd(md.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new gd(md.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new dx(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new fv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(mI);var bI=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return h(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new gd(md.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new gd(md.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new uv(t,n);return function(e,t){if(null===pv(e)){var n=vv(e);null!==n&&RI(e,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new dx(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new fv(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(mI);var wI=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return h(n,[{key:"_apply",value:function(e){return new dx(e.firestore,e.converter,kv(e._query,this.yc,this.Ic))}}]),n}(mI);var _I=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return h(n,[{key:"_apply",value:function(e){var t=CI(e,this.type,this.Tc,this.Ec);return new dx(e.firestore,e.converter,function(e,t){return new fv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(mI);function xI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _I("startAt",t,!0)}function II(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _I("startAfter",t,!1)}var EI=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return h(n,[{key:"_apply",value:function(e){var t=CI(e,this.type,this.Tc,this.Ec);return new dx(e.firestore,e.converter,function(e,t){return new fv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(mI);function TI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new EI("endBefore",t,!1)}function SI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new EI("endAt",t,!0)}function CI(e,t,n,r){if(n[0]=$(n[0]),n[0]instanceof uI)return function(e,t,n,r,i){if(!r)throw new gd(md.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=d(mv(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(dp(t,r.key));else{var c=r.data.field(s.field);if(Yd(c))throw new gd(md.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new gd(md.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new ov(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Bx(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new gd(md.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new gd(md.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!yv(e)&&-1!==c.indexOf("/"))throw new gd(md.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(jd.fromString(c));if(!rp.isDocumentKey(l))throw new gd(md.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new rp(l);u.push(dp(t,f))}else{var h=$x(n,r,c);u.push(h)}}return new ov(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function NI(e,t,n){if("string"==typeof(n=$(n))){if(""===n)throw new gd(md.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yv(t)&&-1!==n.indexOf("/"))throw new gd(md.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(jd.fromString(n));if(!rp.isDocumentKey(r))throw new gd(md.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return dp(e,new rp(r))}if(n instanceof hx)return dp(e,n._key);throw new gd(md.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ox(n),"."))}function AI(e,t){if(!Array.isArray(e)||0===e.length)throw new gd(md.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new gd(md.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function RI(e,t,n){if(!n.isEqual(t))throw new gd(md.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var DI={maxAttempts:5},PI=function(){function e(){l(this,e)}return h(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(op(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Fd(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Ox(Hd(e.latitude),Hd(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Xd(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp($d(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Gd(e);return new Od(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=jd.fromString(e);vd(um(n));var r=new Zd(n.get(1),n.get(3)),i=new rp(n.popFirst(5));return r.isEqual(t)||fd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function OI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var LI=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new Dx(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new hx(this.firestore,null,t)}}]),n}(PI),MI=function(){function e(t,n){l(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Bx(t)}return h(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=FI(e,this._firestore),i=OI(r.converter,t,n),a=zx(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Kv.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=FI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=$(t))||t instanceof Rx?Xx(this._dataReader,"WriteBatch.update",i._key,t,n,o):Yx(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Kv.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=FI(e,this._firestore);return this._mutations=this._mutations.concat(new ay(t._key,Kv.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new gd(md.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function FI(e,t){if((e=$(e)).firestore!==t)throw new gd(md.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var UI=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new Dx(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new hx(this.firestore,null,t)}}]),n}(PI);function VI(e){e=ux(e,hx);var t=ux(e.firestore,_x),n=xx(t),r=new UI(t);return function(e,t){var n=new kd;return e.asyncQueue.enqueueAndForget(ne(J().mark((function r(){return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ne(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=yd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new gd(md.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=cw(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Q_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new fI(t,r,e._key,n,new lI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function jI(e){e=ux(e,dx);var t=ux(e.firestore,_x),n=xx(t),r=new UI(t);return function(e,t){var n=new kd;return e.asyncQueue.enqueueAndForget(ne(J().mark((function r(){return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ne(J().mark((function e(t,n,r){var i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Rk(t,n,!0);case 3:i=e.sent,a=new Nw(n,i._i),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=cw(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Q_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new dI(t,r,e,n)}))}function BI(e,t,n){e=ux(e,hx);var r=ux(e.firestore,_x),i=OI(e.converter,t,n);return WI(r,[zx(Bx(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Kv.none())])}function zI(e,t,n){e=ux(e,hx);for(var r=ux(e.firestore,_x),i=Bx(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return WI(r,[("string"==typeof(t=$(t))||t instanceof Rx?Xx(i,"updateDoc",e._key,t,n,o):Yx(i,"updateDoc",e._key,t)).toMutation(e._key,Kv.exists(!0))])}function qI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=$(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||bx(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(bx(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof hx)l=ux(e.firestore,_x),f=dv(e._key.path),c={next:function(t){n[s]&&n[s](GI(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=ux(e,dx);l=ux(p.firestore,_x),f=p._query;var v=new UI(l);c={next:function(e){n[s]&&n[s](new dI(l,v,p,e))},error:n[s+1],complete:n[s+2]},yI(e._query)}return function(e,t,n,r){var i=new O_(r),a=new _w(t,i,n);return e.asyncQueue.enqueueAndForget(ne(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vw,t.next=3,$_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(ne(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=mw,t.next=3,$_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(xx(l),f,h,c)}function KI(e,t){return function(e,t){var n=new O_(t);return e.asyncQueue.enqueueAndForget(ne(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){yd(e).bu.add(t),t.next()},t.next=3,$_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(ne(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){yd(e).bu.delete(t)},t.next=3,$_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(xx(e=ux(e,_x)),bx(t)?t:{next:t})}function WI(e,t){return function(e,t){var n=new kd;return e.asyncQueue.enqueueAndForget(ne(J().mark((function r(){return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Vw,r.next=3,X_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(xx(e),t)}function GI(e,t,n){var r=n.docs.get(t._key),i=new UI(e);return new fI(e,i,t._key,r,new lI(n.hasPendingWrites,n.fromCache),t.converter)}var HI=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r))._firestore=e,i}return h(n,[{key:"get",value:function(e){var t=this,r=FI(e,this._firestore),i=new UI(this._firestore);return At(m(n.prototype),"get",this).call(this,e).then((function(e){return new fI(t._firestore,i,r._key,e._document,new lI(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){l(this,e),this._firestore=t,this._transaction=n,this._dataReader=Bx(t)}return h(e,[{key:"get",value:function(e){var t=this,n=FI(e,this._firestore),r=new LI(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return pd();var i=e[0];if(i.isFoundDocument())return new uI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new uI(t._firestore,r,n._key,null,n.converter);throw pd()}))}},{key:"set",value:function(e,t,n){var r=FI(e,this._firestore),i=OI(r.converter,t,n),a=zx(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=FI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=$(t))||t instanceof Rx?Xx(this._dataReader,"Transaction.update",i._key,t,n,o):Yx(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=FI(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function QI(e,t,n){e=ux(e,_x);var r=Object.assign(Object.assign({},DI),n);return function(e){if(e.maxAttempts<1)throw new gd(md.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new kd;return e.asyncQueue.enqueueAndForget(ne(J().mark((function i(){var a;return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return W_(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new F_(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(xx(e),(function(n){return t(new HI(e,n))}),r)}function YI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Gx("arrayUnion",t)}function XI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Hx("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ud=e}(Je),We(new re("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new _x(i,new xd(e.getProvider("auth-internal")),new Sd(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),it(ad,"3.4.9",e),it(ad,"3.4.9","esm2017")}();function $I(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new gd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function JI(){if("undefined"===typeof Uint8Array)throw new gd("unimplemented","Uint8Arrays are not available in this environment.")}function ZI(){if("undefined"==typeof atob)throw new gd("unimplemented","Blobs are unavailable in Firestore in this environment.")}var eE=function(){function e(t){l(this,e),this._delegate=t}return h(e,[{key:"toBase64",value:function(){return ZI(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return JI(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return ZI(),new e(Dx.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return JI(),new e(Dx.fromUint8Array(t))}}]),e}();function tE(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=d(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var nE=function(){function e(){l(this,e)}return h(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Ax(e=ux(e,_x));var n=xx(e),r=e._freezeSettings(),i=new D_;return Ex(n,i,new A_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Ax(e=ux(e,_x));var t=xx(e),n=e._freezeSettings(),r=new D_;return Ex(t,r,new R_(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new gd(md.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new kd;return e._queue.enqueueAndForgetEvenWhileRestricted(ne(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ne(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Um.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Um.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(vk(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),rE=function(){function e(t,n,r){var i=this;l(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Zd||(this._appCompat=t)}return h(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||hd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};fx(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Tx(this._delegate)}},{key:"disableNetwork",value:function(){return Sx(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&rx("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new kd;return e.asyncQueue.enqueueAndForget(ne(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Xw,n.next=3,X_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(xx(e=ux(e,_x)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return KI(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new gd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new mE(this,vx(this._delegate,e))}catch(t){throw cE(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new sE(this,yx(this._delegate,e))}catch(t){throw cE(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new pE(this,function(e,t){if(e=ux(e,lx),nx("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new gd(md.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new dx(e,null,function(e){return new fv(jd.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw cE(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return QI(this._delegate,(function(n){return e(new aE(t,n))}))}},{key:"batch",value:function(){var e=this;return xx(this._delegate),new oE(new MI(this._delegate,(function(t){return WI(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Cx(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Nx(this._delegate,e).then((function(e){return e?new pE(t,e):null}))}}]),e}(),iE=function(e){y(n,e);var t=w(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new eE(new Dx(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return sE.forKey(t,this.firestore,null)}}]),n}(PI);var aE=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new iE(t)}return h(e,[{key:"get",value:function(e){var t=this,n=gE(e);return this._delegate.get(n).then((function(e){return new hE(t._firestore,new fI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=gE(e);return n?($I("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=gE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=gE(e);return this._delegate.delete(t),this}}]),e}(),oE=function(){function e(t){l(this,e),this._delegate=t}return h(e,[{key:"set",value:function(e,t,n){var r=gE(e);return n?($I("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=gE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=gE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),uE=function(){function e(t,n,r){l(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return h(e,[{key:"fromFirestore",value:function(e,t){var n=new hI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new dE(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new iE(t),n),i.set(n,a)),a}}]),e}();uE.INSTANCES=new WeakMap;var sE=function(){function e(t,n){l(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new iE(t)}return h(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new mE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new mE(this.firestore,vx(this._delegate,e))}catch(t){throw cE(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=$(e))instanceof hx&&mx(this._delegate,e)}},{key:"set",value:function(e,t){t=$I("DocumentReference.set",t);try{return t?BI(this._delegate,e,t):BI(this._delegate,e)}catch(n){throw cE(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?zI(this._delegate,e):zI.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw cE(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return WI(ux(e.firestore,_x),[new ay(e._key,Kv.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=lE(n),a=fE(n,(function(t){return new hE(e.firestore,new fI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return qI(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?VI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ux(e,hx);var t=ux(e.firestore,_x);return Z_(xx(t),e._key,{source:"server"}).then((function(n){return GI(t,e,n)}))}(this._delegate):function(e){e=ux(e,hx);var t=ux(e.firestore,_x);return Z_(xx(t),e._key).then((function(n){return GI(t,e,n)}))}(this._delegate),t.then((function(e){return new hE(n.firestore,new fI(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(uE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new gd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new hx(n._delegate,r,new rp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new hx(n._delegate,r,t))}}]),e}();function cE(e,t,n){return e.message=e.message.replace(t,n),e}function lE(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!tE(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function fE(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=tE(e[0])?e[0]:tE(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var hE=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"ref",get:function(){return new sE(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return vI(this._delegate,e._delegate)}}]),e}(),dE=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||pd()}(void 0!==t),t}}]),n}(hE),pE=function(){function e(t,n){l(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new iE(t)}return h(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,gI(this._delegate,function(e,t,n){var r=t,i=cI("where",e);return new kI(i,r,n)}(t,n,r)))}catch(i){throw cE(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,gI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=cI("orderBy",e);return new bI(n,t)}(t,n)))}catch(r){throw cE(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,gI(this._delegate,function(e){return sx("limit",e),new wI("limit",e,"F")}(t)))}catch(n){throw cE(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,gI(this._delegate,function(e){return sx("limitToLast",e),new wI("limitToLast",e,"L")}(t)))}catch(n){throw cE(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,gI(this._delegate,xI.apply(void 0,arguments)))}catch(t){throw cE(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,gI(this._delegate,II.apply(void 0,arguments)))}catch(t){throw cE(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,gI(this._delegate,TI.apply(void 0,arguments)))}catch(t){throw cE(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,gI(this._delegate,SI.apply(void 0,arguments)))}catch(t){throw cE(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return gx(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?jI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ux(e,dx);var t=ux(e.firestore,_x),n=xx(t),r=new UI(t);return ex(n,e._query,{source:"server"}).then((function(n){return new dI(t,r,e,n)}))}(this._delegate):function(e){e=ux(e,dx);var t=ux(e.firestore,_x),n=xx(t),r=new UI(t);return yI(e._query),ex(n,e._query).then((function(n){return new dI(t,r,e,n)}))}(this._delegate),t.then((function(e){return new yE(n.firestore,new dI(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=lE(n),a=fE(n,(function(t){return new yE(e.firestore,new dI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return qI(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(uE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),vE=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new dE(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),yE=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"query",get:function(){return new pE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new dE(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new vE(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new dE(n._firestore,r))}))}},{key:"isEqual",value:function(e){return vI(this._delegate,e._delegate)}}]),e}(),mE=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return h(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new sE(this.firestore,e):null}},{key:"doc",value:function(e){try{return new sE(this.firestore,void 0===e?yx(this._delegate):yx(this._delegate,e))}catch(t){throw cE(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=ux(e.firestore,_x),r=yx(e),i=OI(e.converter,t);return WI(n,[zx(Bx(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Kv.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new sE(t.firestore,e)}))}},{key:"isEqual",value:function(e){return mx(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(uE.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(pE);function gE(e){return ux(e,hx)}var kE=function(){function e(){l(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=_(Rx,n)}return h(e,[{key:"isEqual",value:function(e){return(e=$(e))instanceof Rx&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(zd.keyField().canonicalString())}}]),e}(),bE=function(){function e(t){l(this,e),this._delegate=t}return h(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Wx("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new qx("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=YI.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=XI.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Qx("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),wE={Firestore:rE,GeoPoint:Ox,Timestamp:Od,Blob:eE,Transaction:aE,WriteBatch:oE,DocumentReference:sE,DocumentSnapshot:hE,Query:pE,QueryDocumentSnapshot:dE,QuerySnapshot:yE,CollectionReference:mE,FieldPath:kE,FieldValue:bE,setLogLevel:function(e){!function(e){sd.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new re("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},wE)))}(e,(function(e,t){return new rE(e,t,new nE)})),e.registerVersion("@firebase/firestore-compat","0.1.18")}(Ct);var _E="firebasestorage.googleapis.com",xE=function(e){y(n,e);var t=w(n);function n(e,r){var i;return l(this,n),(i=t.call(this,IE(e),"Firebase Storage: ".concat(r," (").concat(IE(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(p(i),n.prototype),i}return h(n,[{key:"_codeEquals",value:function(e){return IE(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(U);function IE(e){return"storage/"+e}function EE(){return new xE("unknown","An unknown error occurred, please check the error payload for server response.")}function TE(){return new xE("canceled","User canceled the upload/download.")}function SE(){return new xE("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function CE(e){return new xE("invalid-argument",e)}function NE(){return new xE("app-deleted","The Firebase app was deleted.")}function AE(e){return new xE("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function RE(e,t){return new xE("invalid-format","String does not match format '"+e+"': "+t)}function DE(e){throw new xE("internal-error","Internal error: "+e)}var PE,OE=function(){function e(t,n){l(this,e),this.bucket=t,this.path_=n}return h(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new xE("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===_E?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new xE("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),LE=function(){function e(t){l(this,e),this.promise_=Promise.reject(t)}return h(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function ME(e){return"string"===typeof e||e instanceof String}function FE(e){return UE()&&e instanceof Blob}function UE(){return"undefined"!==typeof Blob}function VE(e,t,n,r){if(r<t)throw CE("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw CE("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function jE(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function BE(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(PE||(PE={}));var zE=function(){function e(t,n,r,i,a,o,u,s,c,f,h){var d=this;l(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return h(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=EE();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?NE():TE());else i(new xE("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new qE(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new qE(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===PE.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new qE(o,r))}else{var u=r.getErrorCode()===PE.ABORT;t(!1,new qE(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),qE=h((function e(t,n,r){l(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function KE(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function WE(){for(var e=KE(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(UE())return new Blob(n);throw new xE("unsupported-environment","This browser doesn't seem to support creating Blobs")}var GE={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},HE=h((function e(t,n){l(this,e),this.data=t,this.contentType=n||null}));function QE(e,t){switch(e){case GE.RAW:return new HE(YE(t));case GE.BASE64:case GE.BASE64URL:return new HE(XE(e,t));case GE.DATA_URL:return new HE(function(e){var t=new $E(e);return t.base64?XE(GE.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw RE(GE.DATA_URL,"Malformed data URL.")}return YE(t)}(t.rest)}(t),new $E(t).contentType)}throw EE()}function YE(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function XE(e,t){switch(e){case GE.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw RE(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case GE.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw RE(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw RE(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var $E=h((function e(t){l(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw RE(GE.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var JE=function(){function e(t,n){l(this,e);var r=0,i="";FE(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return h(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(FE(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(UE()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(WE.apply(null,i))}var a=n.map((function(e){return ME(e)?QE(GE.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function ZE(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function eT(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function tT(e,t){return t}var nT=h((function e(t,n,r,i){l(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||tT})),rT=null;function iT(){if(rT)return rT;var e=[];e.push(new nT("bucket")),e.push(new nT("generation")),e.push(new nT("metageneration")),e.push(new nT("name","fullPath",!0));var t=new nT("name");t.xform=function(e,t){return function(e){return!ME(e)||e.length<2?e:eT(e)}(t)},e.push(t);var n=new nT("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new nT("timeCreated")),e.push(new nT("updated")),e.push(new nT("md5Hash",null,!0)),e.push(new nT("cacheControl",null,!0)),e.push(new nT("contentDisposition",null,!0)),e.push(new nT("contentEncoding",null,!0)),e.push(new nT("contentLanguage",null,!0)),e.push(new nT("contentType",null,!0)),e.push(new nT("metadata","customMetadata",!0)),rT=e}function aT(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new OE(n,r);return t._makeStorageReference(i)}})}(r,e),r}function oT(e,t,n){var r=ZE(t);return null===r?null:aT(e,r,n)}function uT(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function sT(e,t,n){var r=ZE(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=d(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new OE(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=d(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new OE(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var cT=h((function e(t,n,r,i){l(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function lT(e){if(!e)throw EE()}function fT(e,t){return function(n,r){var i=oT(e,r,t);return lT(null!==i),i}}function hT(e,t){return function(n,r){var i=oT(e,r,t);return lT(null!==i),function(e,t,n,r){var i=ZE(t);if(null===i)return null;if(!ME(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return jE("/b/"+o(i)+"/o/"+o(a),n,r)+BE({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function dT(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new xE("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new xE("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new xE("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new xE("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function pT(e){var t=dT(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new xE("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function vT(e,t,n){var r=jE(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new cT(r,"GET",fT(e,n),i);return a.errorHandler=pT(t),a}function yT(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=jE(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new cT(o,"GET",function(e,t){return function(n,r){var i=sT(e,t,r);return lT(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=dT(t),s}function mT(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function gT(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=mT(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+uT(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=JE.getBlob(c,r,l);if(null===f)throw SE();var h={name:s.fullPath},d=jE(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new cT(d,"POST",fT(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=dT(t),v}var kT=h((function e(t,n,r,i){l(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function bT(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){lT(!1)}return lT(!!n&&-1!==(t||["active"]).indexOf(n)),n}var wT=262144;function _T(e,t,n,r,i,a,o,u){var s=new kT(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new xE("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw SE();var v=t.maxUploadRetryTime,y=new cT(n,"POST",(function(e,n){var i,o=bT(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?fT(t,a)(e,n):null,new kT(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=dT(e),y}var xT={STATE_CHANGED:"state_changed"},IT={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ET(e){switch(e){case"running":case"pausing":case"canceling":return IT.RUNNING;case"paused":return IT.PAUSED;case"success":return IT.SUCCESS;case"canceled":return IT.CANCELED;default:return IT.ERROR}}var TT=h((function e(t,n,r){l(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function ST(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var CT=function(){function e(){var t=this;l(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=PE.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=PE.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=PE.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return h(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw DE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw DE("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw DE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw DE("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw DE("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),NT=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(CT);function AT(){return new NT}var RT=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=iT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return h(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=s(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=mT(t,r,i),u={name:o.fullPath},s=jE(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=uT(o,n),f=e.maxUploadRetryTime,h=new cT(s,"POST",(function(e){var t;bT(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){lT(!1)}return lT(ME(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=dT(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,AT,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new cT(n,"POST",(function(e){var t=bT(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){lT(!1)}n||lT(!1);var i=Number(n);return lT(!isNaN(i)),new kT(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=dT(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,AT,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=wT*this._chunkMultiplier,n=new kT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=_T(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,AT,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){wT*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=vT(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,AT,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=gT(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,AT,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=TE(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=ET(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new TT(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(ET(this._state)){case IT.SUCCESS:ST(this._resolve.bind(null,this.snapshot))();break;case IT.CANCELED:case IT.ERROR:ST(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(ET(this._state)){case IT.RUNNING:case IT.PAUSED:e.next&&ST(e.next.bind(e,this.snapshot))();break;case IT.SUCCESS:e.complete&&ST(e.complete.bind(e))();break;default:e.error&&ST(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),DT=function(){function e(t,n){l(this,e),this._service=t,this._location=n instanceof OE?n:OE.makeFromUrl(n,t.host)}return h(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new OE(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return eT(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new OE(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw AE(e)}}]),e}();function PT(e,t,n){return OT.apply(this,arguments)}function OT(){return(OT=ne(J().mark((function e(t,n,r){var i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,LT(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,ee(u.prefixes)),(a=n.items).push.apply(a,ee(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,PT(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LT(e,t){null!=t&&"number"===typeof t.maxResults&&VE("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=yT(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,AT)}function MT(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=jE(t.fullServerUrl(),e.host,e._protocol),a=uT(n,r),o=e.maxOperationRetryTime,u=new cT(i,"PATCH",fT(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=pT(t),u}(e.storage,e._location,t,iT());return e.storage.makeRequestWithTokens(n,AT)}function FT(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=jE(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new cT(r,"GET",hT(e,n),i);return a.errorHandler=pT(t),a}(e.storage,e._location,iT());return e.storage.makeRequestWithTokens(t,AT).then((function(e){if(null===e)throw new xE("no-download-url","The given file does not have any download URLs.");return e}))}function UT(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=jE(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new cT(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=pT(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,AT)}function VT(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new OE(e._location.bucket,n);return new DT(e.storage,r)}function jT(e,t){if(e instanceof KT){var n=e;if(null==n._bucket)throw new xE("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new DT(n,n._bucket);return null!=t?jT(r,t):r}return void 0!==t?VT(e,t):e}function BT(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof KT)return new DT(e,t);throw CE("To use ref(service, url), the first argument must be a Storage instance.")}return jT(e,t)}function zT(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:OE.makeFromBucketSpec(n,e)}function qT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:A(i,e.app.options.projectId))}var KT=function(){function e(t,n,r,i,a){l(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=_E,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?OE.makeFromBucketSpec(i,this._host):zT(this._host,this.app.options)}return h(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=OE.makeFromBucketSpec(this._url,e):this._bucket=zT(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){VE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){VE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=ne(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=ne(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new DT(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new LE(NE());var a=function(e,t,n,r,i,a){var o=BE(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new zE(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=ne(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),WT="@firebase/storage",GT="0.9.6",HT="storage";function QT(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new RT(e,new JE(t),n)}(e=$(e),t,n)}function YT(e){return function(e){e._throwIfRoot("getMetadata");var t=vT(e.storage,e._location,iT());return e.storage.makeRequestWithTokens(t,AT)}(e=$(e))}function XT(e){return function(e){var t={prefixes:[],items:[]};return PT(e,t).then((function(){return t}))}(e=$(e))}function $T(e,t){return BT(e=$(e),t)}function JT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};qT(e,t,n,r)}function ZT(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new KT(r,i,a,n,Je)}We(new re(HT,ZT,"PUBLIC").setMultipleInstances(!0)),it(WT,GT,""),it(WT,GT,"esm2017");var eS=function(){function e(t,n,r){l(this,e),this._delegate=t,this.task=n,this.ref=r}return h(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),tS=function(){function e(t,n){l(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return h(e,[{key:"snapshot",get:function(){return new eS(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new eS(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new eS(e,i,i._ref))}:{next:t.next?function(e){return t.next(new eS(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),nS=function(){function e(t,n){l(this,e),this._delegate=t,this._service=n}return h(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new rS(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new rS(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),rS=function(){function e(t,n){l(this,e),this._delegate=t,this.storage=n}return h(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return VT(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new tS(QT(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GE.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=QE(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new tS(new RT(this._delegate,new JE(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return XT(this._delegate).then((function(t){return new nS(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return LT(e=$(e),t)}(this._delegate,e||void 0).then((function(e){return new nS(e,t.storage)}))}},{key:"getMetadata",value:function(){return YT(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return MT(e=$(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return FT($(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),UT($(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw AE(e)}}]),e}(),iS=function(){function e(t,n){l(this,e),this.app=t,this._delegate=n}return h(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(aS(e))throw CE("ref() expected a child path but got a URL, use refFromURL instead.");return new rS($T(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!aS(e))throw CE("refFromURL() expected a full URL but got a child path, use ref() instead.");try{OE.makeFromUrl(e,this._delegate.host)}catch(t){throw CE("refFromUrl() expected a valid full URL but got an invalid one.")}return new rS($T(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};JT(this._delegate,e,t,n)}}]),e}();function aS(e){return/^[A-Za-z]+:\/\//.test(e)}function oS(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new iS(r,i)}function uS(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function sS(e,t){if(null==e)return{};var n,r,i=uS(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}!function(e){var t={TaskState:IT,TaskEvent:xT,StringFormat:GE,Storage:iS,Reference:rS};e.INTERNAL.registerComponent(new re("storage-compat",oS,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.14")}(Ct);var cS=n(694),lS=n.n(cS),fS=/-(.)/g;var hS=n(184),dS=["xxl","xl","lg","md","sm","xs"],pS=t.createContext({prefixes:{},breakpoints:dS});pS.Consumer,pS.Provider;function vS(e,n){var r=(0,t.useContext)(pS).prefixes;return e||r[n]||n}var yS=["className","bsPrefix","as"],mS=function(e){return e[0].toUpperCase()+(t=e,t.replace(fS,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function gS(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.displayName,i=void 0===r?mS(e):r,a=n.Component,o=n.defaultProps,u=t.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,o=t.as,u=void 0===o?a||"div":o,s=sS(t,yS),c=vS(i,e);return(0,hS.jsx)(u,ye({ref:n,className:lS()(r,c)},s))}));return u.defaultProps=o,u.displayName=i,u}var kS=t.createContext({}),bS=["id","bsPrefix","className","type","isValid","isInvalid","as"],wS=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.className,o=e.type,u=void 0===o?"checkbox":o,s=e.isValid,c=void 0!==s&&s,l=e.isInvalid,f=void 0!==l&&l,h=e.as,d=void 0===h?"input":h,p=sS(e,bS),v=(0,t.useContext)(kS).controlId;return i=vS(i,"form-check-input"),(0,hS.jsx)(d,ye(ye({},p),{},{ref:n,type:u,id:r||v,className:lS()(a,i,c&&"is-valid",f&&"is-invalid")}))}));wS.displayName="FormCheckInput";var _S=wS,xS=t.createContext(null);xS.displayName="InputGroupContext";var IS=xS,ES=["bsPrefix","size","hasValidation","className","as"],TS=gS("input-group-text",{Component:"span"}),SS=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.size,a=e.hasValidation,o=e.className,u=e.as,s=void 0===u?"div":u,c=sS(e,ES);r=vS(r,"input-group");var l=(0,t.useMemo)((function(){return{}}),[]);return(0,hS.jsx)(IS.Provider,{value:l,children:(0,hS.jsx)(s,ye(ye({ref:n},c),{},{className:lS()(o,r,i&&"".concat(r,"-").concat(i),a&&"has-validation")}))})}));SS.displayName="InputGroup";var CS=Object.assign(SS,{Text:TS,Radio:function(e){return(0,hS.jsx)(TS,{children:(0,hS.jsx)(_S,ye({type:"radio"},e))})},Checkbox:function(e){return(0,hS.jsx)(TS,{children:(0,hS.jsx)(_S,ye({type:"checkbox"},e))})}}),NS=(n(391),n(7)),AS=n.n(NS),RS=["as","className","type","tooltip"],DS={type:AS().string,tooltip:AS().bool,as:AS().elementType},PS=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.className,a=e.type,o=void 0===a?"valid":a,u=e.tooltip,s=void 0!==u&&u,c=sS(e,RS);return(0,hS.jsx)(r,ye(ye({},c),{},{ref:t,className:lS()(i,"".concat(o,"-").concat(s?"tooltip":"feedback"))}))}));PS.displayName="Feedback",PS.propTypes=DS;var OS=PS,LS=["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"],MS=t.forwardRef((function(e,n){var r,i,a=e.bsPrefix,o=e.type,u=e.size,s=e.htmlSize,l=e.id,f=e.className,h=e.isValid,d=void 0!==h&&h,p=e.isInvalid,v=void 0!==p&&p,y=e.plaintext,m=e.readOnly,g=e.as,k=void 0===g?"input":g,b=sS(e,LS),w=(0,t.useContext)(kS).controlId;(a=vS(a,"form-control"),y)?r=c({},"".concat(a,"-plaintext"),!0):(c(i={},a,!0),c(i,"".concat(a,"-").concat(u),u),r=i);return(0,hS.jsx)(k,ye(ye({},b),{},{type:o,size:s,ref:n,readOnly:m,id:l||w,className:lS()(f,r,d&&"is-valid",v&&"is-invalid","color"===o&&"".concat(a,"-color"))}))}));MS.displayName="FormControl";var FS=Object.assign(MS,{Feedback:OS}),US=["as","disabled"];function VS(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.onClick,u=e.tabIndex,s=void 0===u?0:u,c=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var l={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},l];var f=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:"button",disabled:void 0,tabIndex:n?void 0:s,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},l]}var jS=t.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,US),a=s(VS(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],u=a[1].tagName;return(0,hS.jsx)(u,Object.assign({},i,o,{ref:t}))}));jS.displayName="Button";var BS=["as","bsPrefix","variant","size","active","className"],zS=t.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,a=e.size,o=e.active,u=e.className,c=sS(e,BS),l=vS(r,"btn"),f=s(VS(ye({tagName:n},c)),2),h=f[0],d=f[1].tagName;return(0,hS.jsx)(d,ye(ye(ye({},h),c),{},{ref:t,className:lS()(u,l,o&&"active",i&&"".concat(l,"-").concat(i),a&&"".concat(l,"-").concat(a),c.href&&c.disabled&&"disabled")}))}));zS.displayName="Button",zS.defaultProps={variant:"primary",active:!1,disabled:!1};var qS=zS,KS=!("undefined"===typeof window||!window.document||!window.document.createElement),WS=!1,GS=!1;try{var HS={get passive(){return WS=!0},get once(){return GS=WS=!0}};KS&&(window.addEventListener("test",HS,HS),window.removeEventListener("test",HS,!0))}catch(PN){}var QS=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!GS){var i=r.once,a=r.capture,o=n;!GS&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,WS?r:a)}e.addEventListener(t,n,r)};function YS(e){return e&&e.ownerDocument||document}var XS,$S=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};function JS(e){if((!XS&&0!==XS||e)&&KS){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),XS=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return XS}var ZS=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};function eC(e){var n=ZS(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var tC=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var nC=function(e,n){return(0,t.useMemo)((function(){return function(e,t){var n=tC(e),r=tC(t);return function(e){n&&n(e),r&&r(e)}}(e,n)}),[e,n])};function rC(e){var n=function(e){var n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)((function(){return function(){return n.current()}}),[])}function iC(e,t){return function(e){var t=YS(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var aC=/([A-Z])/g;var oC=/^ms-/;function uC(e){return function(e){return e.replace(aC,"-$1").toLowerCase()}(e).replace(oC,"-ms-")}var sC=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var cC=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(uC(t))||iC(e).getPropertyValue(uC(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!sC.test(e))}(i)?n+=uC(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(uC(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};var lC=function(e,t,n,r){return QS(e,t,n,r),function(){$S(e,t,n,r)}};function fC(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=lC(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function hC(e,t,n,r){null==n&&(n=function(e){var t=cC(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=fC(e,n,r),a=lC(e,"transitionend",t);return function(){i(),a()}}function dC(e){void 0===e&&(e=YS());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(PN){return e.body}}function pC(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}var vC=n(164);var yC,mC=(yC="modal-open","".concat("data-rr-ui-").concat(yC)),gC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,r=t.handleContainerOverflow,i=void 0===r||r,a=t.isRTL,o=void 0!==a&&a;l(this,e),this.handleContainerOverflow=i,this.isRTL=o,this.modals=[],this.ownerDocument=n}return h(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style=c({overflow:r.style.overflow},n,r.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(cC(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(mC,""),cC(r,t)}},{key:"reset",value:function(){var e=this;ee(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(mC),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),kC=gC,bC=(0,t.createContext)(KS?window:void 0);bC.Provider;function wC(){return(0,t.useContext)(bC)}var _C=function(e,t){var n;return KS?null==e?(t||YS()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null):null};var xC,IC=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function EC(e){var n=wC(),r=e||function(e){return xC||(xC=new kC({ownerDocument:null==e?void 0:e.document})),xC}(n),i=(0,t.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:function(){return r.add(i.current)},remove:function(){return r.remove(i.current)},isTopModal:function(){return r.isTopModal(i.current)},setDialogRef:(0,t.useCallback)((function(e){i.current.dialog=e}),[]),setBackdropRef:(0,t.useCallback)((function(e){i.current.backdrop=e}),[])})}var TC=(0,t.forwardRef)((function(e,n){var r=e.show,i=void 0!==r&&r,a=e.role,o=void 0===a?"dialog":a,u=e.className,c=e.style,l=e.children,f=e.backdrop,h=void 0===f||f,d=e.keyboard,p=void 0===d||d,v=e.onBackdropClick,y=e.onEscapeKeyDown,m=e.transition,g=e.backdropTransition,k=e.autoFocus,b=void 0===k||k,w=e.enforceFocus,_=void 0===w||w,x=e.restoreFocus,I=void 0===x||x,E=e.restoreFocusOptions,T=e.renderDialog,S=e.renderBackdrop,C=void 0===S?function(e){return(0,hS.jsx)("div",Object.assign({},e))}:S,N=e.manager,A=e.container,R=e.onShow,D=e.onHide,P=void 0===D?function(){}:D,O=e.onExit,L=e.onExited,M=e.onExiting,F=e.onEnter,U=e.onEntering,V=e.onEntered,j=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,IC),B=function(e,n){var r=wC(),i=s((0,t.useState)((function(){return _C(e,null==r?void 0:r.document)})),2),a=i[0],o=i[1];if(!a){var u=_C(e);u&&o(u)}return(0,t.useEffect)((function(){n&&a&&n(a)}),[n,a]),(0,t.useEffect)((function(){var t=_C(e);t!==a&&o(t)}),[e,a]),a}(A),z=EC(N),q=function(){var e=(0,t.useRef)(!0),n=(0,t.useRef)((function(){return e.current}));return(0,t.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),n.current}(),K=function(e){var n=(0,t.useRef)(null);return(0,t.useEffect)((function(){n.current=e})),n.current}(i),W=s((0,t.useState)(!i),2),G=W[0],H=W[1],Q=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(function(){return z}),[z]),KS&&!K&&i&&(Q.current=dC()),m||i||G?i&&G&&H(!1):H(!0);var Y=eC((function(){if(z.add(),te.current=lC(document,"keydown",Z),ee.current=lC(document,"focus",(function(){return setTimeout($)}),!0),R&&R(),b){var e=dC(document);z.dialog&&e&&!pC(z.dialog,e)&&(Q.current=e,z.dialog.focus())}})),X=eC((function(){var e;(z.remove(),null==te.current||te.current(),null==ee.current||ee.current(),I)&&(null==(e=Q.current)||null==e.focus||e.focus(E),Q.current=null)}));(0,t.useEffect)((function(){i&&B&&Y()}),[i,B,Y]),(0,t.useEffect)((function(){G&&X()}),[G,X]),rC((function(){X()}));var $=eC((function(){if(_&&q()&&z.isTopModal()){var e=dC();z.dialog&&e&&!pC(z.dialog,e)&&z.dialog.focus()}})),J=eC((function(e){e.target===e.currentTarget&&(null==v||v(e),!0===h&&P())})),Z=eC((function(e){p&&27===e.keyCode&&z.isTopModal()&&(null==y||y(e),e.defaultPrevented||P())})),ee=(0,t.useRef)(),te=(0,t.useRef)(),ne=m;if(!B||!(i||ne&&!G))return null;var re=Object.assign({role:o,ref:z.setDialogRef,"aria-modal":"dialog"===o||void 0},j,{style:c,className:u,tabIndex:-1}),ie=T?T(re):(0,hS.jsx)("div",Object.assign({},re,{children:t.cloneElement(l,{role:"document"})}));ne&&(ie=(0,hS.jsx)(ne,{appear:!0,unmountOnExit:!0,in:!!i,onExit:O,onExiting:M,onExited:function(){H(!0),null==L||L.apply(void 0,arguments)},onEnter:F,onEntering:U,onEntered:V,children:ie}));var ae=null;if(h){var oe=g;ae=C({ref:z.setBackdropRef,onClick:J}),oe&&(ae=(0,hS.jsx)(oe,{appear:!0,in:!!i,children:ae}))}return(0,hS.jsx)(hS.Fragment,{children:vC.createPortal((0,hS.jsxs)(hS.Fragment,{children:[ae,ie]}),B)})}));TC.displayName="Modal";var SC=Object.assign(TC,{Manager:kC});var CC=Function.prototype.bind.call(Function.prototype.call,[].slice);function NC(e,t){return CC(e.querySelectorAll(t))}function AC(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var RC,DC=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",PC=".sticky-top",OC=".navbar-toggler",LC=function(e){y(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"adjustAndStore",value:function(e,t,n){var r=t.style[e];t.dataset[e]=r,cC(t,c({},e,"".concat(parseFloat(cC(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],cC(t,c({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;At(m(n.prototype),"setContainerStyle",this).call(this,e);var r,i,a=this.getElement();if(i="modal-open",(r=a).classList?r.classList.add(i):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,i)||("string"===typeof r.className?r.className=r.className+" "+i:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+i)),e.scrollBarWidth){var o=this.isRTL?"paddingLeft":"paddingRight",u=this.isRTL?"marginLeft":"marginRight";NC(a,DC).forEach((function(n){return t.adjustAndStore(o,n,e.scrollBarWidth)})),NC(a,PC).forEach((function(n){return t.adjustAndStore(u,n,-e.scrollBarWidth)})),NC(a,OC).forEach((function(n){return t.adjustAndStore(u,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;At(m(n.prototype),"removeContainerStyle",this).call(this,e);var r,i,a=this.getElement();i="modal-open",(r=a).classList?r.classList.remove(i):"string"===typeof r.className?r.className=AC(r.className,i):r.setAttribute("class",AC(r.className&&r.className.baseVal||"",i));var o=this.isRTL?"paddingLeft":"paddingRight",u=this.isRTL?"marginLeft":"marginRight";NC(a,DC).forEach((function(e){return t.restore(o,e)})),NC(a,PC).forEach((function(e){return t.restore(u,e)})),NC(a,OC).forEach((function(e){return t.restore(u,e)}))}}]),n}(kC);var MC=!1,FC=t.createContext(null),UC="unmounted",VC="exited",jC="entering",BC="entered",zC="exiting",qC=function(e){var n,r;function i(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=VC,r.appearStatus=jC):i=BC:i=t.unmountOnExit||t.mountOnEnter?UC:VC,r.state={status:i},r.nextCallback=null,r}r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,v(n,r),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===UC?{status:VC}:null};var a=i.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==jC&&n!==BC&&(t=jC):n!==jC&&n!==BC||(t=zC)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===jC?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===VC&&this.setState({status:UC})},a.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[vC.findDOMNode(this),r],a=i[0],o=i[1],u=this.getTimeouts(),s=r?u.appear:u.enter;!e&&!n||MC?this.safeSetState({status:BC},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:jC},(function(){t.props.onEntering(a,o),t.onTransitionEnd(s,(function(){t.safeSetState({status:BC},(function(){t.props.onEntered(a,o)}))}))})))},a.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:vC.findDOMNode(this);t&&!MC?(this.props.onExit(r),this.safeSetState({status:zC},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:VC},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:VC},(function(){e.props.onExited(r)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:vC.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===UC)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,uS(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(FC.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},i}(t.Component);function KC(){}qC.contextType=FC,qC.propTypes={},qC.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:KC,onEntering:KC,onEntered:KC,onExit:KC,onExiting:KC,onExited:KC},qC.UNMOUNTED=UC,qC.EXITED=VC,qC.ENTERING=jC,qC.ENTERED=BC,qC.EXITING=zC;var WC=qC;function GC(e,t){var n=cC(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function HC(e,t){var n=GC(e,"transitionDuration"),r=GC(e,"transitionDelay"),i=hC(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}var QC,YC=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],XC=t.forwardRef((function(e,n){var r=e.onEnter,i=e.onEntering,a=e.onEntered,o=e.onExit,u=e.onExiting,s=e.onExited,c=e.addEndListener,l=e.children,f=e.childRef,h=sS(e,YC),d=(0,t.useRef)(null),p=nC(d,f),v=function(e){var t;p((t=e)&&"setState"in t?vC.findDOMNode(t):null!=t?t:null)},y=function(e){return function(t){e&&d.current&&e(d.current,t)}},m=(0,t.useCallback)(y(r),[r]),g=(0,t.useCallback)(y(i),[i]),k=(0,t.useCallback)(y(a),[a]),b=(0,t.useCallback)(y(o),[o]),w=(0,t.useCallback)(y(u),[u]),_=(0,t.useCallback)(y(s),[s]),x=(0,t.useCallback)(y(c),[c]);return(0,hS.jsx)(WC,ye(ye({ref:n},h),{},{onEnter:m,onEntered:k,onEntering:g,onExit:b,onExited:_,onExiting:w,addEndListener:x,nodeRef:d,children:"function"===typeof l?function(e,t){return l(e,ye(ye({},t),{},{ref:v}))}:t.cloneElement(l,{ref:v})}))})),$C=XC,JC=["className","children","transitionClasses"],ZC=(c(QC={},jC,"show"),c(QC,BC,"show"),QC),eN=t.forwardRef((function(e,n){var r=e.className,i=e.children,a=e.transitionClasses,o=void 0===a?{}:a,u=sS(e,JC),s=(0,t.useCallback)((function(e,t){!function(e){e.offsetHeight}(e),null==u.onEnter||u.onEnter(e,t)}),[u]);return(0,hS.jsx)($C,ye(ye({ref:n,addEndListener:HC},u),{},{onEnter:s,childRef:i.ref,children:function(e,n){return t.cloneElement(i,ye(ye({},n),{},{className:lS()("fade",r,i.props.className,ZC[e],o[e])}))}}))}));eN.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},eN.displayName="Fade";var tN=eN,nN=gS("modal-body"),rN=t.createContext({onHide:function(){}}),iN=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],aN=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.contentClassName,a=e.centered,o=e.size,u=e.fullscreen,s=e.children,c=e.scrollable,l=sS(e,iN);n=vS(n,"modal");var f="".concat(n,"-dialog"),h="string"===typeof u?"".concat(n,"-fullscreen-").concat(u):"".concat(n,"-fullscreen");return(0,hS.jsx)("div",ye(ye({},l),{},{ref:t,className:lS()(f,r,o&&"".concat(n,"-").concat(o),a&&"".concat(f,"-centered"),c&&"".concat(f,"-scrollable"),u&&h),children:(0,hS.jsx)("div",{className:lS()("".concat(n,"-content"),i),children:s})}))}));aN.displayName="ModalDialog";var oN=aN,uN=gS("modal-footer"),sN=["className","variant"],cN={"aria-label":AS().string,onClick:AS().func,variant:AS().oneOf(["white"])},lN=t.forwardRef((function(e,t){var n=e.className,r=e.variant,i=sS(e,sN);return(0,hS.jsx)("button",ye({ref:t,type:"button",className:lS()("btn-close",r&&"btn-close-".concat(r),n)},i))}));lN.displayName="CloseButton",lN.propTypes=cN,lN.defaultProps={"aria-label":"Close"};var fN=lN,hN=["closeLabel","closeVariant","closeButton","onHide","children"],dN=t.forwardRef((function(e,n){var r=e.closeLabel,i=e.closeVariant,a=e.closeButton,o=e.onHide,u=e.children,s=sS(e,hN),c=(0,t.useContext)(rN),l=eC((function(){null==c||c.onHide(),null==o||o()}));return(0,hS.jsxs)("div",ye(ye({ref:n},s),{},{children:[u,a&&(0,hS.jsx)(fN,{"aria-label":r,variant:i,onClick:l})]}))}));dN.defaultProps={closeLabel:"Close",closeButton:!1};var pN=dN,vN=["bsPrefix","className"],yN=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=sS(e,vN);return n=vS(n,"modal-header"),(0,hS.jsx)(pN,ye(ye({ref:t},i),{},{className:lS()(r,n)}))}));yN.displayName="ModalHeader",yN.defaultProps={closeLabel:"Close",closeButton:!1};var mN,gN=yN,kN=(mN="h4",t.forwardRef((function(e,t){return(0,hS.jsx)("div",ye(ye({},e),{},{ref:t,className:lS()(e.className,mN)}))}))),bN=gS("modal-title",{Component:kN}),wN=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"],_N={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:oN};function xN(e){return(0,hS.jsx)(tN,ye(ye({},e),{},{timeout:null}))}function IN(e){return(0,hS.jsx)(tN,ye(ye({},e),{},{timeout:null}))}var EN=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.style,o=e.dialogClassName,u=e.contentClassName,c=e.children,l=e.dialogAs,f=e["aria-labelledby"],h=e["aria-describedby"],d=e["aria-label"],p=e.show,v=e.animation,y=e.backdrop,m=e.keyboard,g=e.onEscapeKeyDown,k=e.onShow,b=e.onHide,w=e.container,_=e.autoFocus,x=e.enforceFocus,I=e.restoreFocus,E=e.restoreFocusOptions,T=e.onEntered,S=e.onExit,C=e.onExiting,N=e.onEnter,A=e.onEntering,R=e.onExited,D=e.backdropClassName,P=e.manager,O=sS(e,wN),L=s((0,t.useState)({}),2),M=L[0],F=L[1],U=s((0,t.useState)(!1),2),V=U[0],j=U[1],B=(0,t.useRef)(!1),z=(0,t.useRef)(!1),q=(0,t.useRef)(null),K=s((0,t.useState)(null),2),W=K[0],G=K[1],H=nC(n,G),Q=eC(b),Y="rtl"===(0,t.useContext)(pS).dir;r=vS(r,"modal");var X=(0,t.useMemo)((function(){return{onHide:Q}}),[Q]);function $(){return P||function(e){return RC||(RC=new LC(e)),RC}({isRTL:Y})}function J(e){if(KS){var t=$().getScrollbarWidth()>0,n=e.scrollHeight>YS(e).documentElement.clientHeight;F({paddingRight:t&&!n?JS():void 0,paddingLeft:!t&&n?JS():void 0})}}var Z=eC((function(){W&&J(W.dialog)}));rC((function(){$S(window,"resize",Z),null==q.current||q.current()}));var ee=function(){B.current=!0},te=function(e){B.current&&W&&e.target===W.dialog&&(z.current=!0),B.current=!1},ne=function(){j(!0),q.current=hC(W.dialog,(function(){j(!1)}))},re=function(e){"static"!==y?z.current||e.target!==e.currentTarget?z.current=!1:null==b||b():function(e){e.target===e.currentTarget&&ne()}(e)},ie=(0,t.useCallback)((function(e){return(0,hS.jsx)("div",ye(ye({},e),{},{className:lS()("".concat(r,"-backdrop"),D,!v&&"show")}))}),[v,D,r]),ae=ye(ye({},a),M);ae.display="block";return(0,hS.jsx)(rN.Provider,{value:X,children:(0,hS.jsx)(SC,{show:p,ref:H,backdrop:y,container:w,keyboard:!0,autoFocus:_,enforceFocus:x,restoreFocus:I,restoreFocusOptions:E,onEscapeKeyDown:function(e){m||"static"!==y?m&&g&&g(e):(e.preventDefault(),ne())},onShow:k,onHide:b,onEnter:function(e,t){e&&J(e),null==N||N(e,t)},onEntering:function(e,t){null==A||A(e,t),QS(window,"resize",Z)},onEntered:T,onExit:function(e){null==q.current||q.current(),null==S||S(e)},onExiting:C,onExited:function(e){e&&(e.style.display=""),null==R||R(e),$S(window,"resize",Z)},manager:$(),transition:v?xN:void 0,backdropTransition:v?IN:void 0,renderBackdrop:ie,renderDialog:function(e){return(0,hS.jsx)("div",ye(ye({role:"dialog"},e),{},{style:ae,className:lS()(i,r,V&&"".concat(r,"-static")),onClick:y?re:void 0,onMouseUp:te,"aria-label":d,"aria-labelledby":f,"aria-describedby":h,children:(0,hS.jsx)(l,ye(ye({},O),{},{onMouseDown:ee,className:o,contentClassName:u,children:c}))}))}})})}));EN.displayName="Modal",EN.defaultProps=_N;var TN=Object.assign(EN,{Body:nN,Header:gN,Title:bN,Footer:uN,Dialog:oN,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),SN=["color","size"];function CN(){return CN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CN.apply(this,arguments)}function NN(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var AN=(0,t.forwardRef)((function(e,n){var r=e.color,i=e.size,a=NN(e,SN);return t.createElement("svg",CN({ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:r},a),t.createElement("path",{fillRule:"evenodd",d:"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"}))}));AN.propTypes={color:AS().string,size:AS().oneOfType([AS().string,AS().number])},AN.defaultProps={color:"currentColor",size:"1em"};var RN=AN;Ct.initializeApp({apiKey:"AIzaSyALiOLWA6WfSmIQmPF3B7_xCEyFvYle874",authDomain:"yewon-39800.firebaseapp.com",projectId:"yewon-39800",storageBucket:"yewon-39800.appspot.com",messagingSenderId:"640984105983",appId:"1:640984105983:web:030128ce0251fca924ddca"});var DN=function(){var e=s((0,t.useState)(""),2),n=e[0],r=e[1],i=s((0,t.useState)(""),2),a=i[0],o=i[1],u=s((0,t.useState)(!1),2),c=u[0],l=u[1];return(0,hS.jsxs)("div",{className:"App",children:[(0,hS.jsxs)(CS,{style:{marginTop:"1%",height:"60px",marginLeft:"5%",width:"90%"},className:"mb-3",children:[(0,hS.jsx)(FS,{onChange:function(e){var t=e.target.value;r(t)},placeholder:"\uc9c8\ubb38\uc791\uc131"}),(0,hS.jsx)(qS,{variant:"outline-secondary",style:{width:"10%"},onClick:function(){Ct.firestore().collection("Qna").get().then((function(e){e.forEach((function(e){var t=e.data();void 0===t[n]?(o("\uc815\ubcf4 \uc5c6\uc74c \u314b"),l(!0)):(o(t[n]),l(!0))}))}))},children:(0,hS.jsx)(RN,{style:{fontSize:"30px"}})})]}),(0,hS.jsxs)(TN,{size:"lg",show:c,onHide:function(){return l(!1)},"aria-labelledby":"example-modal-sizes-title-lg",children:[(0,hS.jsx)(TN.Header,{closeButton:!0,children:(0,hS.jsx)(TN.Title,{id:"example-modal-sizes-title-lg",children:"\ub2f5"})}),(0,hS.jsx)(TN.Body,{children:a})]})]})};r.createRoot(document.getElementById("root")).render((0,hS.jsx)(t.StrictMode,{children:(0,hS.jsx)(DN,{})}))}()}();
//# sourceMappingURL=main.beaad150.js.map